#include "inc/mons.h"
#include "inc/def.h"
#include "inc/efx.h"
#include "inc/flag.h"
#include "inc/se.h"
#include "inc/scr_inc.h"
#include "inc/3dicon.h"
#include "inc/skilldef.h"
#include "inc/vo.h"
#include "inc/temp/rng.h"

function "0438"
{
    GetItem(None,1)
    GetItemMessageExPlus(None,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0520"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_ADOL,SKILL_ADOL_SP_C1,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CAdol has learned skill #2CSonic Slide#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0521"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_ADOL,SKILL_ADOL_SP_B2,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CAdol has learned skill #2CAerial Spin#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0523"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_LAXIA,SKILL_LAXIA_SP_A2,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CLaxia has learned skill #2CPrecious Impact#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0522"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_LAXIA,SKILL_LAXIA_SP_C3,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CLaxia has learned skill #2CRapid Thrust#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0525"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_SAHAD,SKILL_SAHAD_SP_C1,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CSahad has learned skill #2CHigh Wave#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0524"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_SAHAD,SKILL_SAHAD_SP_B3,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CSahad has learned skill #2CPower Strike#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0527"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_HUMMEL,SKILL_HUMMEL_SP_A3,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CHummel has learned skill #2CFirecracker#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0526"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_HUMMEL,SKILL_HUMMEL_SP_C2,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CHummel has learned skill #2CVenomous Bullet#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0528"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_RICOTTA,SKILL_RICOTTA_SP_C2,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CRicotta has learned skill #2CHandmade Trap#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0529"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_RICOTTA,SKILL_RICOTTA_SP_A3,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CRicotta has learned skill #2CDino Throw#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0531"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_DANA,SKILL_DANA_SP_A2,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CDana has learned skill #2CSpiel Round Dance#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0530"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_DANA,SKILL_DANA_SP_C4,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CDana has learned skill #2CDragon Spirit#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0621"
{
    if(!FLAG[SF_BOSS_BATTLE])
    {
        WaitFade()
	    Wait(20)
        
    SetStopFlag(STOPFLAG_TALK)
    Message("No presence felt.")
    WaitPrompt()
    WaitCloseWindow()
    ResetStopFlag(STOPFLAG_TALK)
    
    }
}


function "0625"
{
    if(!FLAG[SF_BOSS_BATTLE])
    {
        WaitFade()
	    Wait(20)
        CallFunc("rng:uraFight")
    }
}

    function "uraFight"
    {
        if(!FLAG[GF_06MP6308_TALK_SARAI])
        {
            Message("The presence of the Sky Warden can be felt.")
            WaitPrompt()
            WaitCloseWindow()
            SetStopFlag(STOPFLAG_SIMPLEEVENT2)
            SetFlag( TF_MENU_SELECT, 0 )
            YesNoMenu(TF_MENU_SELECT,"#7CFight?",1)
            
            //──────────────────────
            //　⇒支援要請を出す
            if( FLAG[TF_MENU_SELECT] )
            {
                SetEnvSEPlayState(-1, 0)
                FadeOut(FADE_BLACK,FADE_NORMAL)
                WaitFade()
                
                SetFlag( TF_MENU_SELECT, 1 )	
            }
            //	⇒やめる
            else
            {
                
                SetFlag( TF_MENU_SELECT, 0 )
            }
            //──────────────────────

            if( FLAG[TF_MENU_SELECT] == 0 )
            {
                CrossFade(FADE_CROSS)
                SetStopFlag(STOPFLAG_NOCHARACLIP)
                
                ResetPartyPos()
                ResetFollowPoint()
                
                RestoreCamera(0,0)
                ResetCameraObserver(0)
                ResetCameraZPlane()
                Wait(FADE_CROSS)
                
                ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
            }
            else
            {
                GetItem(ICON3D_972,1)
                LoadArg("map/mp6308b/mp6308b.arg")
                EventCue("mp6308b:EV_RetryBoss")
                //FadeIn(FADE_BLACK,FADE_NORMAL)
                WaitFade()
                ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
            }
        }
        else
        {
            SetStopFlag(STOPFLAG_TALK)
            Message("No presence felt.")
            WaitPrompt()
            WaitCloseWindow()
            ResetStopFlag(STOPFLAG_TALK)
        }
	}


function "0629"
{
    if(!FLAG[SF_BOSS_BATTLE])
    {
        WaitFade()
	    Wait(20)
        CallFunc("rng:nestorFight")
    }
}

    function "nestorFight"
    {
        if(!FLAG[GF_06MP6307_TALK_NESTOR])
        {
            Message("The presence of the Insect Warden can be felt.")
            WaitPrompt()
            WaitCloseWindow()
            SetStopFlag(STOPFLAG_SIMPLEEVENT2)
            SetFlag( TF_MENU_SELECT, 0 )
            YesNoMenu(TF_MENU_SELECT,"#7CFight?",1)
            
            //──────────────────────
            //　⇒支援要請を出す
            if( FLAG[TF_MENU_SELECT] )
            {
                SetEnvSEPlayState(-1, 0)
                FadeOut(FADE_BLACK,FADE_NORMAL)
                WaitFade()
                
                SetFlag( TF_MENU_SELECT, 1 )	
            }
            //	⇒やめる
            else
            {
                
                SetFlag( TF_MENU_SELECT, 0 )
            }
            //──────────────────────

            if( FLAG[TF_MENU_SELECT] == 0 )
            {
                CrossFade(FADE_CROSS)
                SetStopFlag(STOPFLAG_NOCHARACLIP)
                
                ResetPartyPos()
                ResetFollowPoint()
                
                RestoreCamera(0,0)
                ResetCameraObserver(0)
                ResetCameraZPlane()
                Wait(FADE_CROSS)
                
                ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
            }
            else
            {
                GetItem(ICON3D_972,1)
                LoadArg("map/mp6307b/mp6307b.arg")
                EventCue("mp6307b:EV_RetryBoss")
                //FadeIn(FADE_BLACK,FADE_NORMAL)
                WaitFade()
                ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
            }
        }
        else
        {
            SetStopFlag(STOPFLAG_TALK)
            Message("No presence felt.")
            WaitPrompt()
            WaitCloseWindow()
            ResetStopFlag(STOPFLAG_TALK)
        }
	}


function "0622"
{
    if(!FLAG[SF_BOSS_BATTLE])
    {
        WaitFade()
	    Wait(20)
        CallFunc("rng:minosFight")
    }
}

    function "minosFight"
    {
        if(!FLAG[GF_06MP6306_TALK_MINOS])
        {
            Message("The presence of the Frozen Warden can be felt.")
            WaitPrompt()
            WaitCloseWindow()
            SetStopFlag(STOPFLAG_SIMPLEEVENT2)
            SetFlag( TF_MENU_SELECT, 0 )
            YesNoMenu(TF_MENU_SELECT,"#7CFight?",1)
            
            //──────────────────────
            //　⇒支援要請を出す
            if( FLAG[TF_MENU_SELECT] )
            {
                SetEnvSEPlayState(-1, 0)
                FadeOut(FADE_BLACK,FADE_NORMAL)
                WaitFade()
                
                SetFlag( TF_MENU_SELECT, 1 )	
            }
            //	⇒やめる
            else
            {
                
                SetFlag( TF_MENU_SELECT, 0 )
            }
            //──────────────────────

            if( FLAG[TF_MENU_SELECT] == 0 )
            {
                CrossFade(FADE_CROSS)
                SetStopFlag(STOPFLAG_NOCHARACLIP)
                
                ResetPartyPos()
                ResetFollowPoint()
                
                RestoreCamera(0,0)
                ResetCameraObserver(0)
                ResetCameraZPlane()
                Wait(FADE_CROSS)
                
                ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
            }
            else
            {
                GetItem(ICON3D_972,1)
                LoadArg("map/mp6306b/mp6306b.arg")
                EventCue("mp6306b:EV_RetryBoss")
                //FadeIn(FADE_BLACK,FADE_NORMAL)
                WaitFade()
                ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
            }
        }
        else
        {
            SetStopFlag(STOPFLAG_TALK)
            Message("No presence felt.")
            WaitPrompt()
            WaitCloseWindow()
            ResetStopFlag(STOPFLAG_TALK)
        }
	}


function "0623"
{
    if(!FLAG[SF_BOSS_BATTLE])
    {
        WaitFade()
	    Wait(20)
        CallFunc("rng:hydraFight")
    }
}

    function "hydraFight"
    {
        if(!FLAG[GF_06MP6305_TALK_HYDRA])
        {
            SetStopFlag(STOPFLAG_SIMPLEEVENT2)
            Message("The presence of the Ocean Warden can be felt.")
            WaitPrompt()
            WaitCloseWindow()
            SetFlag( TF_MENU_SELECT, 0 )
            YesNoMenu(TF_MENU_SELECT,"#7CFight?",1)
            
            //──────────────────────
            //　⇒支援要請を出す
            if( FLAG[TF_MENU_SELECT] )
            {
                SetEnvSEPlayState(-1, 0)
                FadeOut(FADE_BLACK,FADE_NORMAL)
                WaitFade()
                
                SetFlag( TF_MENU_SELECT, 1 )	
            }
            //	⇒やめる
            else
            {
                
                SetFlag( TF_MENU_SELECT, 0 )
            }
            //──────────────────────

            if( FLAG[TF_MENU_SELECT] == 0 )
            {
                CrossFade(FADE_CROSS)
                SetStopFlag(STOPFLAG_NOCHARACLIP)
                
                ResetPartyPos()
                ResetFollowPoint()
                
                RestoreCamera(0,0)
                ResetCameraObserver(0)
                ResetCameraZPlane()
                Wait(FADE_CROSS)
                
                ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
            }
            else
            {
                GetItem(ICON3D_972,1)
                LoadArg("map/mp6305b/mp6305b.arg")
                EventCue("mp6305b:EV_RetryBoss")
                //FadeIn(FADE_BLACK,FADE_NORMAL)
                WaitFade()
                ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
            }
        }
        else
        {
            SetStopFlag(STOPFLAG_TALK)
            Message("No presence felt.")
            WaitPrompt()
            WaitCloseWindow()
            ResetStopFlag(STOPFLAG_TALK)
        }
	}


function "0627"
{
    if(!FLAG[SF_BOSS_BATTLE])
    {
        WaitFade()
	    Wait(20)
        
    SetStopFlag(STOPFLAG_TALK)
    Message("No presence felt.")
    WaitPrompt()
    WaitCloseWindow()
    ResetStopFlag(STOPFLAG_TALK)
    
    }
}


function "0626"
{
    if(!FLAG[SF_BOSS_BATTLE])
    {
        WaitFade()
	    Wait(20)
        
    SetStopFlag(STOPFLAG_TALK)
    Message("No presence felt.")
    WaitPrompt()
    WaitCloseWindow()
    ResetStopFlag(STOPFLAG_TALK)
    
    }
}


function "0624"
{
    if(!FLAG[SF_BOSS_BATTLE])
    {
        WaitFade()
	    Wait(20)
        
    SetStopFlag(STOPFLAG_TALK)
    Message("No presence felt.")
    WaitPrompt()
    WaitCloseWindow()
    ResetStopFlag(STOPFLAG_TALK)
    
    }
}


function "0630"
{
    if(!FLAG[SF_BOSS_BATTLE])
    {
        WaitFade()
	    Wait(20)
        
    SetStopFlag(STOPFLAG_TALK)
    Message("No presence felt.")
    WaitPrompt()
    WaitCloseWindow()
    ResetStopFlag(STOPFLAG_TALK)
    
    }
}


function "0628"
{
    if(!FLAG[SF_BOSS_BATTLE])
    {
        WaitFade()
	    Wait(20)
        
    SetStopFlag(STOPFLAG_TALK)
    Message("No presence felt.")
    WaitPrompt()
    WaitCloseWindow()
    ResetStopFlag(STOPFLAG_TALK)
    
    }
}


function "0618"
{
    if(!FLAG[SF_BOSS_BATTLE])
    {
        WaitFade()
	    Wait(20)
        
    SetStopFlag(STOPFLAG_TALK)
    Message("No presence felt.")
    WaitPrompt()
    WaitCloseWindow()
    ResetStopFlag(STOPFLAG_TALK)
    
    }
}


function "0620"
{
    if(!FLAG[SF_BOSS_BATTLE])
    {
        WaitFade()
	    Wait(20)
        
    SetStopFlag(STOPFLAG_TALK)
    Message("No presence felt.")
    WaitPrompt()
    WaitCloseWindow()
    ResetStopFlag(STOPFLAG_TALK)
    
    }
}


function "0619"
{
    if(!FLAG[SF_BOSS_BATTLE])
    {
        WaitFade()
	    Wait(20)
        
    SetStopFlag(STOPFLAG_TALK)
    Message("No presence felt.")
    WaitPrompt()
    WaitCloseWindow()
    ResetStopFlag(STOPFLAG_TALK)
    
    }
}


function "0617"
{
    if(!FLAG[SF_BOSS_BATTLE])
    {
        WaitFade()
	    Wait(20)
        
    SetStopFlag(STOPFLAG_TALK)
    Message("No presence felt.")
    WaitPrompt()
    WaitCloseWindow()
    ResetStopFlag(STOPFLAG_TALK)
    
    }
}


function "startParameters"
{
    SetFlag(SF_ADOL_JOINOK, 0)
    SetFlag(SF_ADOL_JOINED, 0)
    CallFunc("rng:earlyGameParty")
    SetLevel(ADOL,1)
    SetLevel(LAXIA,1)
    SetLevel(SAHAD,1)
    SetLevel(RICOTTA,1)
    SetLevel(HUMMEL,1)
    SetLevel(DANA,1)
    //Let's set the flags for checking a bunch of removeable obstacles so the players don't have to click on them twice
    SetFlag(GF_SUBEV_1111_CHECKED_ROCK,1)
    SetFlag(GF_SUBEV_2101_CHECKED_ROCK,1)
    SetFlag(GF_SUBEV_2101_SIEN03_LOOK, 1)
    SetFlag(GF_SUBEV_1131_CHECKED_ROCK,1)
    SetFlag(GF_SUBEV_1120_CHECKED_ROCK,1)
    SetFlag(GF_SUBEV_1117_CHECKED_ROCK,1)
    SetFlag(GF_SUBEV_2105_CHECKED_ROCK,1)
    SetFlag(GF_SUBEV_1116_CHECKED_ROCK,1)
    SetFlag(GF_SUBEV_1109_CHECKED_ROCK,1)
    SetFlag(GF_SUBEV_6102_CHECKED_ROCK,1)
    SetFlag(GF_SUBEV_1132_CHECKED_SAND,1)
    SetFlag(GF_SUBEV_4110_CHECKED_LADDER,1)
    SetFlag(GF_SUBEV_6107_CHECKED_SAND,1)
    SetFlag(GF_SUBEV_6362_CHECKED_PILLAR,1)
    SetFlag(GF_SUBEV_2104_CHECKED_SAND,1)
    SetFlag( GF_SUBEV_1107_CHECKED_BRIDGE , 1 )  //Checked broken bridge
    SetFlag( GF_03MP1107_REPAIR_ROPE , 1 )      //Had conversation with Ricotta about bridge
    //preset system flags for convenience 
    SetFlag(SF_CAMP_CANT_FORMATION,0)           // Formation menu prohibited
    SetFlag(SF_CAMP_CANT_MEMORYMENU,0)             // Disable memory menu
    SetFlag(SF_CAMP_CANT_DIARY,0)             // Adventure diary menu prohibited
    SetFlag(SF_CAMP_CANT_MAP,0)             // Map menu prohibited. If you stand on it while the map is open, it will not close.
    SetFlag(SF_CAMP_CANT_EQUIP,0)            // Equipment menu prohibited
    SetFlag(SF_CAMP_CANT_SKILL,0)
    SetFlag( SF_CANUSE_MAPWARP, 1 )
    SetFlag(SF_CANTUSE_MAP, 0)
    SetFlag(SF_CANTUSE_SKILL ,0)
    SetFlag(SF_CAN_EXSKILL, 1)
    //set a ton of story progress flags to try and make events more open, hopefully doesn't break anything, will need lots of testing
    SetFlag(GF_00MP0011_GO_CAPTAINROOM, 1)	// Head to the captain's room
    SetFlag(GF_00MP0012_START_PATROL, 1)	// start patrolling
    SetFlag(GF_00MP0012_GO_CAPTAINROOM2, 1)	// Head to the captain's room (second time)
    SetFlag(GF_00MP0016_HEAR_SCREAM, 1)		// I hear a scream
    SetFlag(GF_00MP0011b_DIVE_OCEAN, 1)		// jump into the sea
    SetFlag(GF_00MP1102_TALK_LAXIA,	1)	// Talked to Laxia
    SetFlag(GF_00MP1102_TALK_SAHAD,	1)	// Talked to Sahad
    SetFlag(GF_00MP1102_TALK_HUMMEL, 1)		// Talked to Hummel
    SetFlag(GF_00MP1102_TALK_DOGI, 1)		// Talked to Dogi
    SetFlag(GF_01MP1110_DRIFT,1)
    SetFlag(GF_01MP1110_GET_SWORD, 1)
    SetFlag(GF_01MP7301_GET_SKILL,1)
    SetFlag(GF_01MP7301_SET_SKILL,1)
    SetFlag(GF_01MP1110_BATTLE_WIN,1)
    SetFlag(GF_01MP1102_DRINK_WATER, 1)
    SetFlag(GF_01MP1201_IN_BASE, 1)
    SetFlag(GF_01MP1201_TALK_LAXIA, 1)
    SetFlag(GF_01MP1201_GET_DRIFT, 1)
    SetFlag(GF_01MP1202_IN_MP1202,1)
    SetFlag(GF_01MP1201_LOOK_MAN,1)
    SetFlag(GF_01MP7302_GET_ITEM, 1)
    SetFlag(GF_01MP7302_GET_ARMOR, 1)
    SetFlag(GF_01MP7302_GET_SWORD, 1)
    //SetFlag(GF_01MP1101_DRAW_MAP,1)
    SetFlag(GF_02MP1201_TALK_DOGISAHAD,	1)
	SetFlag(GF_02MP1203_START_FISHING,1)	
	SetFlag(GF_02MP1203_GET_FISH,1)	
    SetFlag(GF_02MP1201_TEST_SMITH, 1)
    SetFlag(GF_02MP1201_TEST_TRADE, 1)
    SetFlag(GF_02MP1201_TEST_DRUG, 1)
	SetFlag(GF_02MP1201_TAKE_BREAKFAST,	1)	
	SetFlag(GF_02MP1201_INFO_QUEST,1)			
	SetFlag(GF_GALL_EVIMG_01,1)			
	SetFlag(GF_GALL_EVIMG_02,1)		
	SetFlag(GF_GALL_EVIMG_03,1)	
    SetFlag(GF_02MP1110_REMOVE_OBSTACLE, 1)     // removed initial tree, lets the player see numbers required to move obstacles and makes sphere 0 more dynamic 
    SetFlag(GF_SUBEV_HELP_NUSHI,1)
    SetFlag( GF_02MP2102_LOOK_MONSTER , 1 )	
    SetFlag( GF_SUBEV_03_2102_SWAMP, 1 )
    //set flags fro arriving at the shoreline for great river valley
    SetFlag(GF_02MP1120_MEET_HUMMEL,1)
    SetFlag(GF_02MP1121_MAKE_CAMP,1)
    SetFlag( GF_02MP1201_TEST_RENSEI , 1 ) // Enables weapon enhancement, still requires kathleen
    SetFlag(GF_02MP1201_BEFORE_INTERCEPT,1) // Preparations for interception battle have begun.
    SetFlag(GF_02MP1201_START_INTERCEPT,1) // Started interception battle
    SetFlag(GF_02MP1201_AFTER_INTERCEPT,1) // The first interception battle is over.
    SetFlag(GF_02MP23xx_OCCUR_INTERCEPT3,1) // Interception 3 has occurred
    SetFlag(GF_02MP23xx_AFTER_INTERCEPT3,1) // Interception battle 3 has ended
    SetFlag(GF_03MP3109M_MOVE_CANYON,1) //Dana Edition Head to the Great Canyon
                                        //Dana Part 1: Declare the start of the tree-planting festival
                                        // Dana Edition Proceed deep into the valley
                                        //Dana Part 1: Start the tree-planting ceremony
    //SetFlag(GF_03MP1101_LEAVE_CAMP,1)  //Spawns tree that leads to primordial passage
    SetFlag(GF_03MP4202_IN_LODGE,1)
    SetFlag(GF_03MP4202_LOOK_LODGE,1)
    SetFlag(GF_03MP4202_LOOK_NOTE,1)
    SetFlag(GF_03MP4202_LOOK_FLOWER,1)
    SetFlag(GF_03MP4202_LOOK_BOOK,1)
    SetFlag(GF_03MP4202_TALK_LODGE,1)  //skip events at cabin on the initial way up gendarme
    SetFlag(GF_03MP433x_OCCUR_INTERCEPT5,1) // Interception battle 5 has occurred
    SetFlag(GF_03MP433x_AFTER_INTERCEPT5,1) // Intercept Battle 5 has ended
    SetFlag(GF_04MP5101_OCCUR_INTERCEPT7,1) // Intercept battle 7 has occurred
    SetFlag(GF_04MP5101_AFTER_INTERCEPT7,1) // Intercept Battle 7 has ended
    //Stop all the chasing of Thanatos
    SetFlag(GF_04MP6203_RUN_CENTER,1)
    SetFlag(GF_04MP6203_LOOK_BUILD,1)
    SetFlag(GF_04MP6203_IN_BUILD,1)
    SetFlag(GF_04MP6203_RUN_AWAY,1)
    SetFlag(GF_04MP6203_SEE_BUILD,1)
    SetFlag(GF_04MP6201_RUN_WEST,1)
    SetFlag(GF_04MP6201_LOOK_PAGOIDA,1)
    SetFlag(GF_04MP6203_RUN_CENTER,1)
    SetFlag(GF_04MP6202_SEE_FIGURE,1)
    SetFlag(GF_04MP6202_IN_EAST,1)
    SetFlag(GF_04MP6203_LOOK_BUILD,1)
    SetFlag(GF_04MP6214_GOTO_2F,1)
    SetFlag(GF_04MP6201_LOOK_PAGOIDA,1)
    SetFlag(GF_04MP6211_LOOK_STATUE,1)
    SetFlag(GF_04MP6211_RUN_PAGOIDA,1)
    SetFlag(GF_NPC_4_02_SEE_THANATOS,1)
    SetFlag(GF_04MP6204_IN_PAGOIDA,1)
    SetFlag(GF_04MP6201_TALK_THANATOS,1)
    //There are zero checks in temple of the great tree and the "puzzel" is simple to let's hurry the player along and open the doors for them.
    SetFlag(GF_04MP6402_CHECK_GIM,1)
    SetFlag(GF_MP6401_SWITCH_03,1)
    SetFlag(GF_MP6401_SWITCH_02,1)
    SetFlag(GF_MP6401_SWITCH_01R,1)
    SetFlag(GF_MP6401_SWITCH_01L,1)
    //SetFlag(GF_05MP1213_INTERCEPT_DANA,1) //Dana participates in the interception battle 2
    //SetFlag(GF_SUBEV_ST_6201_DOOR_OPEN,1)  //Door to Towal Highway is open if it can be reached, leaving this in as Dana can be a non-linear progression item for this
    //Towal entry cutscenes
    SetFlag(GF_05MP6204_SEE_RUIN,1)
    SetFlag(GF_05MP6201_IN_EAST,1)
    SetFlag(GF_05MP6203_SEE_BAHA,1)
    SetFlag(GF_05MP6115_SEE_HOLLOW,1)
    SetFlag(GF_05MP6110_OUT_CAMP,1)
    //Cutscenes before palace
    SetFlag(GF_05MP6204_FIND_CRYSTAL,1)
    SetFlag(GF_05MP6202_GOTO_SKYWAY,1)
    SetFlag(GF_05MP1201_OCCUR_INTERCEPT9,1) // Intercept battle 9 has occurred
    SetFlag(GF_05MP1201_AFTER_INTERCEPT9,1) // Intercept battle 9 has ended
    //Valley of Kings
    SetFlag(GF_05MP4105_PASS_TEM, 1)
    SetFlag(GF_05MP6108_MALK_CAMP,1)
    SetFlag(GF_SUBEV_ST_DOOR_1STTALK,1)
    SetFlag(GF_06MP6409_OCCUR_INTERCEPT12,1) // Interception 12 has occurred
    SetFlag(GF_06MP6409_AFTER_INTERCEPT12,1) // Interception Battle 12 has ended
    GetItem(ICON3D_MAP,1) //start with the map for faster exploration
    SetFlag(SF_ITEMSLOT_NUM,1) //Let's adventure books actually increase slots from the start of the game.
    //Remove all tutorials from the game
    SetFlag(    GF_HELP_A01,1 )
    SetFlag(	GF_HELP_A02,			1 )
    SetFlag(	GF_HELP_A03,			1 )
    SetFlag(	GF_HELP_A04,			1 )
    SetFlag(	GF_HELP_A05,			1 )
    SetFlag(	GF_HELP_A06,			1 )
    SetFlag(	GF_HELP_A07,			1 )
    SetFlag(	GF_HELP_A08,			1 )
    SetFlag(	GF_HELP_A09,			1 )
    SetFlag(	GF_HELP_A10,			1 )
    SetFlag(	GF_HELP_A11,			1 )
    SetFlag(	GF_HELP_A12,			1 )
    SetFlag(	GF_HELP_A13,			1 )
    SetFlag(	GF_HELP_A14,			1 )
    SetFlag(	GF_HELP_A15,			1 )
    SetFlag(	GF_HELP_A16,			1 )
    SetFlag(	GF_HELP_A17,			1 )
    SetFlag(	GF_HELP_A18,			1 )
    SetFlag(	GF_HELP_A19,			1 )
    SetFlag(	GF_HELP_A20,			1 )
    SetFlag(	GF_HELP_A21,			1 )
    SetFlag(	GF_HELP_A22,			1 )
    SetFlag(	GF_HELP_A23,			1 )
    SetFlag(	GF_HELP_A24,			1 )
    SetFlag(	GF_HELP_A25,			1 )
    SetFlag(	GF_HELP_A26,			1 )
    SetFlag(	GF_HELP_A27,			1 )
    SetFlag(	GF_HELP_A28,			1 )
    SetFlag(	GF_HELP_A29,			1 )
    SetFlag(	GF_HELP_A30,			1 )
    SetFlag(	GF_HELP_A31,			1 )
    SetFlag(	GF_HELP_A32,			1 )
    SetFlag(	GF_HELP_A33,			1 )
    SetFlag(	GF_HELP_A34,			1 )
    SetFlag(	GF_HELP_A35,			1 )
    SetFlag(	GF_HELP_A36,			1 )
    SetFlag(	GF_HELP_A37,			1 )
    SetFlag(	GF_HELP_A38,			1 )
    SetFlag(	GF_HELP_A39,			1 )
    SetFlag(	GF_HELP_A40,			1 )
    SetFlag(	GF_HELP_A41,			1 )
    SetFlag(	GF_HELP_A42,			1 )
    SetFlag(	GF_HELP_A43,			1 )
    SetFlag(	GF_HELP_A44,			1 )
    SetFlag(	GF_HELP_A45,			1 )
    SetFlag(	GF_HELP_B01,			1 )
    SetFlag(	GF_HELP_B02,			1 )
    SetFlag(	GF_HELP_B03,			1 )
    SetFlag(	GF_HELP_B04,			1 )
    SetFlag(	GF_HELP_B05,			1 )
    SetFlag(	GF_HELP_B06,			1 )
    SetFlag(	GF_HELP_B07,			1 )
    SetFlag(	GF_HELP_B08,			1 )
    SetFlag(	GF_HELP_B09,			1 )
    SetFlag(	GF_HELP_B10,			1 )
    SetFlag(	GF_HELP_B11,			1 )
    SetFlag(	GF_HELP_B12,			1 )
    SetFlag(	GF_HELP_B13,			1 )
    SetFlag(	GF_HELP_B13_B,			1 )
    SetFlag(	GF_HELP_B14,			1 )
    SetFlag(	GF_HELP_B15,			1 )
    SetFlag(	GF_HELP_B16,			1 )
    SetFlag(	GF_HELP_B17,			1 )
    SetFlag(	GF_HELP_B18,			1 )
    SetFlag(	GF_HELP_B19,			1 )
    SetFlag(	GF_HELP_B20,			1 )
    SetFlag(	GF_HELP_A46,			1 )
    SetFlag(	GF_HELP_A47,			1 )
    SetFlag(	GF_HELP_A48,			1 )
    SetFlag(	GF_HELP_A49,			1 )
    SetFlag(	GF_HELP_A50,			1 )
    SetFlag(	GF_HELP_A51,			1 )
    SetFlag(	GF_HELP_A52,			1 )
    SetFlag(	GF_HELP_A53,			1 )
    SetFlag(	GF_HELP_A54,			1 )
    SetFlag(	GF_HELP_A55,			1 )
    SetFlag(	GF_HELP_A56,			1 )
    SetFlag(	GF_HELP_A57,			1 )
    SetFlag(	GF_HELP_B21,			1 )
    SetFlag(	GF_HELP_B22,			1 )
    SetFlag(	GF_HELP_B23,			1 )
    SetFlag(	GF_HELP_B24,			1 )
    SetFlag(	GF_HELP_B25,			1 )
    SetFlag(	GF_HELP_B26,			1 )
    SetFlag(	GF_HELP_B27,			1 )
    SetFlag(	GF_HELP_B28,			1 )
    SetFlag(	GF_HELP_B29,			1 )
    SetFlag(	GF_HELP_B30,			1 )
    SetFlag(	GF_HELP_B31,			1 )
    SetFlag(	GF_HELP_A58,			1 )
    SetFlag(	GF_HELP_A59,			1 )
    SetFlag(	GF_HELP_A44_B,	1 )
    //Let's set every mission flag for a cleaner more stable looking diary and interface
    SetFlag(SF_MISSIONNO,MS_00_01)					
    SetFlag(SF_MISSIONNO,	MS_00_02)					
    SetFlag(SF_MISSIONNO,	MS_00_03)					
    SetFlag(SF_MISSIONNO,	MS_00_04)					
    SetFlag(SF_MISSIONNO,	MS_01_01)					
    SetFlag(SF_MISSIONNO,	MS_01_02)					
    SetFlag(SF_MISSIONNO,	MS_01_03)					
    SetFlag(SF_MISSIONNO,	MS_01_04)					
    SetFlag(SF_MISSIONNO,	MS_01_05)					
    SetFlag(SF_MISSIONNO,	MS_01_06)					
    SetFlag(SF_MISSIONNO,	MS_01_07)					
    SetFlag(SF_MISSIONNO,	MS_01_08)					
    SetFlag(SF_MISSIONNO,	MS_01_09)					
    SetFlag(SF_MISSIONNO,	MS_02_01)					
    SetFlag(SF_MISSIONNO,	MS_02_02)
    SetFlag(SF_MISSIONNO,	MS_02_02B)					
    SetFlag(SF_MISSIONNO,	MS_02_03)					
    SetFlag(SF_MISSIONNO,	MS_02_04)					
    SetFlag(SF_MISSIONNO,	MS_02_05)					
    SetFlag(SF_MISSIONNO,	MS_02_06)					
    SetFlag(SF_MISSIONNO,	MS_02_07)					
    SetFlag(SF_MISSIONNO,	MS_02_08)					
    SetFlag(SF_MISSIONNO,	MS_02_09)					
    SetFlag(SF_MISSIONNO,	MS_02_10)					
    SetFlag(SF_MISSIONNO,	MS_02_11)					
    SetFlag(SF_MISSIONNO,	MS_02_12)					
    SetFlag(SF_MISSIONNO,	MS_02_13)					
    SetFlag(SF_MISSIONNO,	MS_02_14)					
    SetFlag(SF_MISSIONNO,	MS_02_15)					
    SetFlag(SF_MISSIONNO,	MS_02_16)					
    SetFlag(SF_MISSIONNO,	MS_02_17)					
    SetFlag(SF_MISSIONNO,	MS_02_18)					
    SetFlag(SF_MISSIONNO,	MS_02_19)					
    SetFlag(SF_MISSIONNO,	MS_02_20)					
    SetFlag(SF_MISSIONNO,	MS_02_21)					
    SetFlag(SF_MISSIONNO,	MS_02_22)					
    SetFlag(SF_MISSIONNO,	MS_02_23)					
    SetFlag(SF_MISSIONNO,	MS_03_01)					
    SetFlag(SF_MISSIONNO,	MS_03_02)					
    SetFlag(SF_MISSIONNO,	MS_03_03)					
    SetFlag(SF_MISSIONNO,	MS_03_04)					
    SetFlag(SF_MISSIONNO,	MS_03_05)					
    SetFlag(SF_MISSIONNO,	MS_03_06)					
    SetFlag(SF_MISSIONNO,	MS_03_07)					
    SetFlag(SF_MISSIONNO,	MS_03_08)
    SetFlag(SF_MISSIONNO,	MS_03_08B)
    SetFlag(SF_MISSIONNO,	MS_03_08C)					
    SetFlag(SF_MISSIONNO,	MS_03_09)					
    SetFlag(SF_MISSIONNO,	MS_03_10)					
    SetFlag(SF_MISSIONNO,	MS_04_01)					
    SetFlag(SF_MISSIONNO,	MS_04_02)					
    SetFlag(SF_MISSIONNO,	MS_04_03)					
    SetFlag(SF_MISSIONNO,	MS_04_04)					
    SetFlag(SF_MISSIONNO,	MS_04_05)					
    SetFlag(SF_MISSIONNO,	MS_04_06)					
    SetFlag(SF_MISSIONNO,	MS_04_07)					
    SetFlag(SF_MISSIONNO,	MS_04_08)					
    SetFlag(SF_MISSIONNO,	MS_04_09)					
    SetFlag(SF_MISSIONNO,	MS_05_01)					
    SetFlag(SF_MISSIONNO,	MS_05_02)					
    SetFlag(SF_MISSIONNO,	MS_05_03)
    SetFlag(SF_MISSIONNO,	MS_05_03B)					
    SetFlag(SF_MISSIONNO,	MS_05_04)					
    SetFlag(SF_MISSIONNO,	MS_05_05)					
    SetFlag(SF_MISSIONNO,	MS_05_06)					
    SetFlag(SF_MISSIONNO,	MS_05_07)					
    SetFlag(SF_MISSIONNO,	MS_05_08)					
    SetFlag(SF_MISSIONNO,	MS_05_09)					
    SetFlag(SF_MISSIONNO,	MS_05_10)					
    SetFlag(SF_MISSIONNO,	MS_05_11)					
    SetFlag(SF_MISSIONNO,	MS_05_12)					
    SetFlag(SF_MISSIONNO,	MS_05_13)					
    SetFlag(SF_MISSIONNO,	MS_06_01)					
    SetFlag(SF_MISSIONNO,	MS_06_02)					
    SetFlag(SF_MISSIONNO,	MS_06_03)					
    SetFlag(SF_MISSIONNO,	MS_06_04)					
    SetFlag(SF_MISSIONNO,	MS_06_05)					
    SetFlag(SF_MISSIONNO,	MS_06_06)					
    SetFlag(SF_MISSIONNO,	MS_06_07)					
    SetFlag(SF_MISSIONNO,	MS_06_08)					
    SetFlag(SF_MISSIONNO,	MS_06_09)					
    SetFlag(SF_MISSIONNO,	MS_07_01)
    SetFlag(SF_MISSIONNO,	MS_07_01B)
    SetFlag(SF_MISSIONNO,	MS_07_01C)					
    SetFlag(SF_MISSIONNO,	MS_07_02)					
    SetFlag(SF_MISSIONNO,	MS_07_03)					
    SetFlag(SF_MISSIONNO,	MS_07_04)										
    SetFlag(SF_MISSIONNO,	MS_08_D1A)					
    SetFlag(SF_MISSIONNO,	MS_08_D1B)					
    SetFlag(SF_MISSIONNO,	MS_08_D1C)					
    SetFlag(SF_MISSIONNO,	MS_08_D3)					
    SetFlag(SF_MISSIONNO,	MS_08_D3B)					
    SetFlag(SF_MISSIONNO,	MS_08_01)					
    SetFlag(SF_MISSIONNO,	MS_08_01B)					
    SetFlag(SF_MISSIONNO,	MS_08_01C)					
    SetFlag(SF_MISSIONNO,	MS_08_02)					
    SetFlag(SF_MISSIONNO,	MS_08_02B)					
    SetFlag(SF_MISSIONNO,	MS_08_02C)					
    SetFlag(SF_MISSIONNO,	MS_08_02D)					
    SetFlag(SF_MISSIONNO,	MS_08_02E)					
    SetFlag(SF_MISSIONNO,	MS_08_02F)					
    SetFlag(SF_MISSIONNO,	MS_08_03)					
    SetFlag(SF_MISSIONNO,	MS_08_03B)					
    SetFlag(SF_MISSIONNO,	MS_08_03C)					
    SetFlag(SF_MISSIONNO,	MS_08_04)					
    SetFlag(SF_MISSIONNO,	MS_08_042)					
    SetFlag(SF_MISSIONNO,	MS_08_05)					
    SetFlag(SF_MISSIONNO,	MS_08_06)					
    SetFlag(SF_MISSIONNO,	MS_08_06B)					
    SetFlag(SF_MISSIONNO,	MS_08_06C)					
    SetFlag(SF_MISSIONNO,	MS_08_06D)					
    SetFlag(SF_MISSIONNO,	MS_08_07)					
    SetFlag(SF_MISSIONNO,	MS_08_07B)					
    SetFlag(SF_MISSIONNO,	MS_08_07C)					
    SetFlag(SF_MISSIONNO,	MS_08_07D)					
    SetFlag(GF_TBOX_DUMMY060,1) //enables first avolodragil fight from the start, this flag is replacing meeting barbaros
    SetFlag(GF_TBOX_DUMMY067,1) //Make ghostship available if it can be reached.
    SetFlag(GF_NPC_0_01_GO_CAPTAINROOM		, 1)
    SetFlag(	GF_NPC_0_02_START_PATROL		, 1)
    SetFlag(	GF_NPC_0_03_ATTACK_SHIP			, 1)
    SetFlag(	GF_NPC_1_01_IN_BASE				, 1)
    SetFlag(	GF_NPC_6_04_GET_MISTILTEINN		, 1)
    SetFlag( GF_CAMP_VILLAGE_LV, 7 )     //Same thing for the village build.
    //Set the captains quest to done, since he'll never be in the village.
    SetFlag(GF_QUEST_200, QUEST_END)
    SetFlag(GF_QUEST_201, QUEST_END)
    SetFlag(GF_QUEST_210, QUEST_END)
    SetFlag(GF_QUEST_220, QUEST_END)
    SetFlag(GF_QUEST_221, QUEST_END)
    SetFlag(GF_QUEST_222, QUEST_END)
    SetFlag(GF_QUEST_223, QUEST_END)
    SetFlag(GF_QUEST_230, QUEST_END)
    SetFlag(GF_QUEST_231, QUEST_END)
    SetFlag(GF_QUEST_300, QUEST_END)
    SetFlag(GF_QUEST_310, QUEST_END)
    SetFlag(GF_QUEST_301, QUEST_END)
    SetFlag(GF_QUEST_302, QUEST_END)
    SetFlag(GF_QUEST_310, QUEST_END)
    SetFlag(GF_QUEST_311, QUEST_END)
    SetFlag(GF_QUEST_401, QUEST_END)
    SetFlag(GF_QUEST_402, QUEST_END)
    SetFlag(GF_QUEST_500, QUEST_END)
    SetFlag(GF_QUEST_501, QUEST_END)
    SetFlag(GF_QUEST_502, QUEST_END)
    SetFlag(GF_QUEST_503, QUEST_END)
    SetFlag(GF_QUEST_510, QUEST_END)
    SetFlag(GF_QUEST_520, QUEST_END)
    SetFlag(GF_QUEST_521, QUEST_END)
    SetFlag(GF_QUEST_522, QUEST_END)
    SetFlag(GF_QUEST_530, QUEST_END)
    SetFlag(GF_QUEST_600, QUEST_END)
    SetFlag(GF_QUEST_601, QUEST_END)
    SetFlag(GF_QUEST_602, QUEST_END)
    SetFlag(GF_QUEST_610, QUEST_END)
    SetFlag(GF_QUEST_611, QUEST_END)
    SetFlag(GF_QUEST_612, QUEST_END)
    SetFlag(GF_QUEST_613, QUEST_END)
	SetFlag(GF_QUEST_232, QUEST_END)			
	SetFlag(GF_QUEST_303, QUEST_END)				
	SetFlag(GF_QUEST_504, QUEST_END)				
	SetFlag(GF_QUEST_505, QUEST_END)				
    SetFlag(GF_SUBEV_JOIN_CURRAN2,1)
    SetFlag(GF_SUBEV_LOOK_NIA1,1) 
    SetFlag(GF_SUBEV_LOOK_SILVIA2,1)
    EquipCostume(ADOL, ICON3D_COS_ADOL_01, EQC_MAIN, EQC_MODE_EVDEFAULT)
    EquipCostume(ADOL, -1, EQC_MAIN, EQC_MODE_EQUIP)
    EquipCostume(ADOL, -1, EQC_MAIN, EQC_MODE_EVFORCE)
    
    SetFlag(GF_TBOX_DUMMY109,1)
    
    SetFlag(SF_CANTLEARN_SKILL,1)
    SetFlag(GF_TBOX_DUMMY111,1)
    
    SetFlag(GF_TBOX_DUMMY112,1)
    SetFlag (GF_06MP6301_RETURN_CENTER,1)
    SetFlag (GF_06MP6301_OPEN_INSECT,1)
    SetFlag (GF_06MP6301_OPEN_HEAVENS,1)
    
    SetFlag(GF_TBOX_DUMMY113,1)
    
    GetItem(ICON3D_FD_SEA_SALT,3)
    GetItem(ICON3D_FD_MEAT_02,3)
    
    
    SetFlag(SF_RICOTTA_JOINED, 1)
    SetFlag(SF_RICOTTA_JOINOK, 1)
    SetDiaryFlag( DF_JOIN_RICOTTA, 1 )
    SetFlag( GF_QUEST_400, QUEST_START )
    SetDiaryFlag( DF_QS400_START, 1 )
    SetDiaryCharaFlag( DRCHA_RICOTTA, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_RICOTTA, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_RICOTTA, DRCHA_FLAG_INFO3, 1 )
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )

    if( FLAG[GF_03MP1201_ALARM_INTERCEPT])
    {
        GetItem(ICON3D_WP_RICOTTA_001	, 1)
	    EquipWeapon(RICOTTA, ICON3D_WP_RICOTTA_001)
    }
    
    JoinParty(PARTY_RICOTTA)

    if(FLAG[GF_TBOX_DUMMY111]) //if skill shuffle is on
    {
        CallFunc("rng:0528")
        CallFunc("rng:0529")
    }

	SetLevel(RICOTTA,3) 
	if(LEADER.CHRWORK[CWK_LV] ==1){SetLevel(RICOTTA,1)} 
	else if(LEADER.CHRWORK[CWK_LV] ==2){SetLevel(RICOTTA,2)} 
	else if(LEADER.CHRWORK[CWK_LV] ==3){SetLevel(RICOTTA,3)} 
	else if(LEADER.CHRWORK[CWK_LV] ==4){SetLevel(RICOTTA,4)} 
	else if(LEADER.CHRWORK[CWK_LV] ==5){SetLevel(RICOTTA,5)} 
	else if(LEADER.CHRWORK[CWK_LV] ==6){SetLevel(RICOTTA,6)} 
	else if(LEADER.CHRWORK[CWK_LV] ==7){SetLevel(RICOTTA,7)} 
	else if(LEADER.CHRWORK[CWK_LV] ==8){SetLevel(RICOTTA,8)} 
	else if(LEADER.CHRWORK[CWK_LV] ==9){SetLevel(RICOTTA,9)} 
	else if(LEADER.CHRWORK[CWK_LV] ==10){SetLevel(RICOTTA,10)} 
	else if(LEADER.CHRWORK[CWK_LV] ==11){SetLevel(RICOTTA,11)} 
	else if(LEADER.CHRWORK[CWK_LV] ==12){SetLevel(RICOTTA,12)} 
	else if(LEADER.CHRWORK[CWK_LV] ==13){SetLevel(RICOTTA,13)} 
	else if(LEADER.CHRWORK[CWK_LV] ==14){SetLevel(RICOTTA,14)} 
	else if(LEADER.CHRWORK[CWK_LV] ==15){SetLevel(RICOTTA,15)} 
	else if(LEADER.CHRWORK[CWK_LV] ==16){SetLevel(RICOTTA,16)} 
	else if(LEADER.CHRWORK[CWK_LV] ==17){SetLevel(RICOTTA,17)} 
	else if(LEADER.CHRWORK[CWK_LV] ==18){SetLevel(RICOTTA,18)} 
	else if(LEADER.CHRWORK[CWK_LV] ==19){SetLevel(RICOTTA,19)} 
	else if(LEADER.CHRWORK[CWK_LV] ==20){SetLevel(RICOTTA,20)} 
	else if(LEADER.CHRWORK[CWK_LV] ==21){SetLevel(RICOTTA,21)} 
	else if(LEADER.CHRWORK[CWK_LV] ==22){SetLevel(RICOTTA,22)} 
	else if(LEADER.CHRWORK[CWK_LV] ==23){SetLevel(RICOTTA,23)} 
	else if(LEADER.CHRWORK[CWK_LV] ==24){SetLevel(RICOTTA,24)} 
	else if(LEADER.CHRWORK[CWK_LV] ==25){SetLevel(RICOTTA,25)} 
	else if(LEADER.CHRWORK[CWK_LV] ==26){SetLevel(RICOTTA,26)} 
	else if(LEADER.CHRWORK[CWK_LV] ==27){SetLevel(RICOTTA,27)} 
	else if(LEADER.CHRWORK[CWK_LV] ==28){SetLevel(RICOTTA,28)} 
	else if(LEADER.CHRWORK[CWK_LV] ==29){SetLevel(RICOTTA,29)} 
	else if(LEADER.CHRWORK[CWK_LV] ==30){SetLevel(RICOTTA,30)} 
	else if(LEADER.CHRWORK[CWK_LV] ==31){SetLevel(RICOTTA,31)} 
	else if(LEADER.CHRWORK[CWK_LV] ==32){SetLevel(RICOTTA,32)} 
	else if(LEADER.CHRWORK[CWK_LV] ==33){SetLevel(RICOTTA,33)} 
	else if(LEADER.CHRWORK[CWK_LV] ==34){SetLevel(RICOTTA,34)} 
	else if(LEADER.CHRWORK[CWK_LV] ==35){SetLevel(RICOTTA,35)} 
	else if(LEADER.CHRWORK[CWK_LV] ==36){SetLevel(RICOTTA,36)} 
	else if(LEADER.CHRWORK[CWK_LV] ==37){SetLevel(RICOTTA,37)} 
	else if(LEADER.CHRWORK[CWK_LV] ==38){SetLevel(RICOTTA,38)} 
	else if(LEADER.CHRWORK[CWK_LV] ==39){SetLevel(RICOTTA,39)} 
	else if(LEADER.CHRWORK[CWK_LV] ==40){SetLevel(RICOTTA,40)} 
	else if(LEADER.CHRWORK[CWK_LV] ==41){SetLevel(RICOTTA,41)} 
	else if(LEADER.CHRWORK[CWK_LV] ==42){SetLevel(RICOTTA,42)} 
	else if(LEADER.CHRWORK[CWK_LV] ==43){SetLevel(RICOTTA,43)} 
	else if(LEADER.CHRWORK[CWK_LV] ==44){SetLevel(RICOTTA,44)} 
	else if(LEADER.CHRWORK[CWK_LV] ==45){SetLevel(RICOTTA,45)} 
	else if(LEADER.CHRWORK[CWK_LV] ==46){SetLevel(RICOTTA,46)} 
	else if(LEADER.CHRWORK[CWK_LV] ==47){SetLevel(RICOTTA,47)} 
	else if(LEADER.CHRWORK[CWK_LV] ==48){SetLevel(RICOTTA,48)} 
	else if(LEADER.CHRWORK[CWK_LV] ==49){SetLevel(RICOTTA,49)} 
	else if(LEADER.CHRWORK[CWK_LV] ==50){SetLevel(RICOTTA,50)} 
	else if(LEADER.CHRWORK[CWK_LV] ==51){SetLevel(RICOTTA,51)} 
	else if(LEADER.CHRWORK[CWK_LV] ==52){SetLevel(RICOTTA,52)} 
	else if(LEADER.CHRWORK[CWK_LV] ==53){SetLevel(RICOTTA,53)} 
	else if(LEADER.CHRWORK[CWK_LV] ==54){SetLevel(RICOTTA,54)} 
	else if(LEADER.CHRWORK[CWK_LV] ==55){SetLevel(RICOTTA,55)} 
	else if(LEADER.CHRWORK[CWK_LV] ==56){SetLevel(RICOTTA,56)} 
	else if(LEADER.CHRWORK[CWK_LV] ==57){SetLevel(RICOTTA,57)} 
	else if(LEADER.CHRWORK[CWK_LV] ==58){SetLevel(RICOTTA,58)} 
	else if(LEADER.CHRWORK[CWK_LV] ==59){SetLevel(RICOTTA,59)} 
	else if(LEADER.CHRWORK[CWK_LV] ==60){SetLevel(RICOTTA,60)} 
	else if(LEADER.CHRWORK[CWK_LV] ==61){SetLevel(RICOTTA,61)} 
	else if(LEADER.CHRWORK[CWK_LV] ==62){SetLevel(RICOTTA,62)} 
	else if(LEADER.CHRWORK[CWK_LV] ==63){SetLevel(RICOTTA,63)} 
	else if(LEADER.CHRWORK[CWK_LV] ==64){SetLevel(RICOTTA,64)} 
	else if(LEADER.CHRWORK[CWK_LV] ==65){SetLevel(RICOTTA,65)} 
	else if(LEADER.CHRWORK[CWK_LV] ==66){SetLevel(RICOTTA,66)} 
	else if(LEADER.CHRWORK[CWK_LV] ==67){SetLevel(RICOTTA,67)} 
	else if(LEADER.CHRWORK[CWK_LV] ==68){SetLevel(RICOTTA,68)} 
	else if(LEADER.CHRWORK[CWK_LV] ==69){SetLevel(RICOTTA,69)} 
	else if(LEADER.CHRWORK[CWK_LV] ==70){SetLevel(RICOTTA,70)} 
	else if(LEADER.CHRWORK[CWK_LV] ==71){SetLevel(RICOTTA,71)} 
	else if(LEADER.CHRWORK[CWK_LV] ==72){SetLevel(RICOTTA,72)} 
	else if(LEADER.CHRWORK[CWK_LV] ==73){SetLevel(RICOTTA,73)} 
	else if(LEADER.CHRWORK[CWK_LV] ==74){SetLevel(RICOTTA,74)} 
	else if(LEADER.CHRWORK[CWK_LV] ==75){SetLevel(RICOTTA,75)} 
	else if(LEADER.CHRWORK[CWK_LV] ==76){SetLevel(RICOTTA,76)} 
	else if(LEADER.CHRWORK[CWK_LV] ==77){SetLevel(RICOTTA,77)} 
	else if(LEADER.CHRWORK[CWK_LV] ==78){SetLevel(RICOTTA,78)} 
	else if(LEADER.CHRWORK[CWK_LV] ==79){SetLevel(RICOTTA,79)} 
	else if(LEADER.CHRWORK[CWK_LV] ==80){SetLevel(RICOTTA,80)} 
	else if(LEADER.CHRWORK[CWK_LV] ==81){SetLevel(RICOTTA,81)} 
	else if(LEADER.CHRWORK[CWK_LV] ==82){SetLevel(RICOTTA,82)} 
	else if(LEADER.CHRWORK[CWK_LV] ==83){SetLevel(RICOTTA,83)} 
	else if(LEADER.CHRWORK[CWK_LV] ==84){SetLevel(RICOTTA,84)} 
	else if(LEADER.CHRWORK[CWK_LV] ==85){SetLevel(RICOTTA,85)} 
	else if(LEADER.CHRWORK[CWK_LV] ==86){SetLevel(RICOTTA,86)} 
	else if(LEADER.CHRWORK[CWK_LV] ==87){SetLevel(RICOTTA,87)} 
	else if(LEADER.CHRWORK[CWK_LV] ==88){SetLevel(RICOTTA,88)} 
	else if(LEADER.CHRWORK[CWK_LV] ==89){SetLevel(RICOTTA,89)} 
	else if(LEADER.CHRWORK[CWK_LV] ==90){SetLevel(RICOTTA,90)} 
	else if(LEADER.CHRWORK[CWK_LV] ==91){SetLevel(RICOTTA,91)} 
	else if(LEADER.CHRWORK[CWK_LV] ==92){SetLevel(RICOTTA,92)} 
	else if(LEADER.CHRWORK[CWK_LV] ==93){SetLevel(RICOTTA,93)} 
	else if(LEADER.CHRWORK[CWK_LV] ==94){SetLevel(RICOTTA,94)} 
	else if(LEADER.CHRWORK[CWK_LV] ==95){SetLevel(RICOTTA,95)} 
	else if(LEADER.CHRWORK[CWK_LV] ==96){SetLevel(RICOTTA,96)} 
	else if(LEADER.CHRWORK[CWK_LV] ==97){SetLevel(RICOTTA,97)} 
	else if(LEADER.CHRWORK[CWK_LV] ==98){SetLevel(RICOTTA,98)} 
	else{SetLevel(RICOTTA,99)} 

    //We add strength to put the character's power in line with the rest of the cast for later joining characters and leave them without weapons until they hit the shop tier for their weapon.
    //Characters without weapons animate with their base weapons still.
    SetChrWork(HUMMEL,CWK_SUP_STR,(HUMMEL.CHRWORK[CWK_SUP_STR] + 18))
    SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 8))
    SetChrWork(RICOTTA,CWK_SUP_STR,(RICOTTA.CHRWORK[CWK_SUP_STR] + 22))
    LoadArg("map/mp1201/mp1201.arg")
    EventCue("mp1201:EV_M01S070_ED")
}

function "earlyGameParty"
{
    SetPartyMember(PARTY_RICOTTA , -1 , -1)
}

function "soloEvent"
{

    SetFlag(SF_ADOL_JOINOK, 0)
    SetFlag(SF_LAXIA_JOINOK, 0)
    SetFlag(SF_SAHAD_JOINOK, 0)
    SetFlag(SF_HUMMEL_JOINOK, 0)
    SetFlag(SF_RICOTTA_JOINOK, 1)
    SetFlag(SF_DANA_JOINOK, 0)

}

function "0429"
{
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CRicotta#4C Joined the Party.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetFlag(SF_RICOTTA_JOINED, 1)
    SetFlag(SF_RICOTTA_JOINOK, 1)
    SetDiaryFlag( DF_JOIN_RICOTTA, 1 )
    SetFlag( GF_QUEST_400, QUEST_START )
    SetDiaryFlag( DF_QS400_START, 1 )
    SetDiaryCharaFlag( DRCHA_RICOTTA, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_RICOTTA, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_RICOTTA, DRCHA_FLAG_INFO3, 1 )
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )

    if( FLAG[GF_03MP1201_ALARM_INTERCEPT])
    {
        GetItem(ICON3D_WP_RICOTTA_001	, 1)
	    EquipWeapon(RICOTTA, ICON3D_WP_RICOTTA_001)
    }
    
    JoinParty(PARTY_RICOTTA)

    if(FLAG[GF_TBOX_DUMMY111]) //if skill shuffle is on
    {
        CallFunc("rng:0528")
        CallFunc("rng:0529")
    }

	SetLevel(RICOTTA,3) 
	if(LEADER.CHRWORK[CWK_LV] ==1){SetLevel(RICOTTA,1)} 
	else if(LEADER.CHRWORK[CWK_LV] ==2){SetLevel(RICOTTA,2)} 
	else if(LEADER.CHRWORK[CWK_LV] ==3){SetLevel(RICOTTA,3)} 
	else if(LEADER.CHRWORK[CWK_LV] ==4){SetLevel(RICOTTA,4)} 
	else if(LEADER.CHRWORK[CWK_LV] ==5){SetLevel(RICOTTA,5)} 
	else if(LEADER.CHRWORK[CWK_LV] ==6){SetLevel(RICOTTA,6)} 
	else if(LEADER.CHRWORK[CWK_LV] ==7){SetLevel(RICOTTA,7)} 
	else if(LEADER.CHRWORK[CWK_LV] ==8){SetLevel(RICOTTA,8)} 
	else if(LEADER.CHRWORK[CWK_LV] ==9){SetLevel(RICOTTA,9)} 
	else if(LEADER.CHRWORK[CWK_LV] ==10){SetLevel(RICOTTA,10)} 
	else if(LEADER.CHRWORK[CWK_LV] ==11){SetLevel(RICOTTA,11)} 
	else if(LEADER.CHRWORK[CWK_LV] ==12){SetLevel(RICOTTA,12)} 
	else if(LEADER.CHRWORK[CWK_LV] ==13){SetLevel(RICOTTA,13)} 
	else if(LEADER.CHRWORK[CWK_LV] ==14){SetLevel(RICOTTA,14)} 
	else if(LEADER.CHRWORK[CWK_LV] ==15){SetLevel(RICOTTA,15)} 
	else if(LEADER.CHRWORK[CWK_LV] ==16){SetLevel(RICOTTA,16)} 
	else if(LEADER.CHRWORK[CWK_LV] ==17){SetLevel(RICOTTA,17)} 
	else if(LEADER.CHRWORK[CWK_LV] ==18){SetLevel(RICOTTA,18)} 
	else if(LEADER.CHRWORK[CWK_LV] ==19){SetLevel(RICOTTA,19)} 
	else if(LEADER.CHRWORK[CWK_LV] ==20){SetLevel(RICOTTA,20)} 
	else if(LEADER.CHRWORK[CWK_LV] ==21){SetLevel(RICOTTA,21)} 
	else if(LEADER.CHRWORK[CWK_LV] ==22){SetLevel(RICOTTA,22)} 
	else if(LEADER.CHRWORK[CWK_LV] ==23){SetLevel(RICOTTA,23)} 
	else if(LEADER.CHRWORK[CWK_LV] ==24){SetLevel(RICOTTA,24)} 
	else if(LEADER.CHRWORK[CWK_LV] ==25){SetLevel(RICOTTA,25)} 
	else if(LEADER.CHRWORK[CWK_LV] ==26){SetLevel(RICOTTA,26)} 
	else if(LEADER.CHRWORK[CWK_LV] ==27){SetLevel(RICOTTA,27)} 
	else if(LEADER.CHRWORK[CWK_LV] ==28){SetLevel(RICOTTA,28)} 
	else if(LEADER.CHRWORK[CWK_LV] ==29){SetLevel(RICOTTA,29)} 
	else if(LEADER.CHRWORK[CWK_LV] ==30){SetLevel(RICOTTA,30)} 
	else if(LEADER.CHRWORK[CWK_LV] ==31){SetLevel(RICOTTA,31)} 
	else if(LEADER.CHRWORK[CWK_LV] ==32){SetLevel(RICOTTA,32)} 
	else if(LEADER.CHRWORK[CWK_LV] ==33){SetLevel(RICOTTA,33)} 
	else if(LEADER.CHRWORK[CWK_LV] ==34){SetLevel(RICOTTA,34)} 
	else if(LEADER.CHRWORK[CWK_LV] ==35){SetLevel(RICOTTA,35)} 
	else if(LEADER.CHRWORK[CWK_LV] ==36){SetLevel(RICOTTA,36)} 
	else if(LEADER.CHRWORK[CWK_LV] ==37){SetLevel(RICOTTA,37)} 
	else if(LEADER.CHRWORK[CWK_LV] ==38){SetLevel(RICOTTA,38)} 
	else if(LEADER.CHRWORK[CWK_LV] ==39){SetLevel(RICOTTA,39)} 
	else if(LEADER.CHRWORK[CWK_LV] ==40){SetLevel(RICOTTA,40)} 
	else if(LEADER.CHRWORK[CWK_LV] ==41){SetLevel(RICOTTA,41)} 
	else if(LEADER.CHRWORK[CWK_LV] ==42){SetLevel(RICOTTA,42)} 
	else if(LEADER.CHRWORK[CWK_LV] ==43){SetLevel(RICOTTA,43)} 
	else if(LEADER.CHRWORK[CWK_LV] ==44){SetLevel(RICOTTA,44)} 
	else if(LEADER.CHRWORK[CWK_LV] ==45){SetLevel(RICOTTA,45)} 
	else if(LEADER.CHRWORK[CWK_LV] ==46){SetLevel(RICOTTA,46)} 
	else if(LEADER.CHRWORK[CWK_LV] ==47){SetLevel(RICOTTA,47)} 
	else if(LEADER.CHRWORK[CWK_LV] ==48){SetLevel(RICOTTA,48)} 
	else if(LEADER.CHRWORK[CWK_LV] ==49){SetLevel(RICOTTA,49)} 
	else if(LEADER.CHRWORK[CWK_LV] ==50){SetLevel(RICOTTA,50)} 
	else if(LEADER.CHRWORK[CWK_LV] ==51){SetLevel(RICOTTA,51)} 
	else if(LEADER.CHRWORK[CWK_LV] ==52){SetLevel(RICOTTA,52)} 
	else if(LEADER.CHRWORK[CWK_LV] ==53){SetLevel(RICOTTA,53)} 
	else if(LEADER.CHRWORK[CWK_LV] ==54){SetLevel(RICOTTA,54)} 
	else if(LEADER.CHRWORK[CWK_LV] ==55){SetLevel(RICOTTA,55)} 
	else if(LEADER.CHRWORK[CWK_LV] ==56){SetLevel(RICOTTA,56)} 
	else if(LEADER.CHRWORK[CWK_LV] ==57){SetLevel(RICOTTA,57)} 
	else if(LEADER.CHRWORK[CWK_LV] ==58){SetLevel(RICOTTA,58)} 
	else if(LEADER.CHRWORK[CWK_LV] ==59){SetLevel(RICOTTA,59)} 
	else if(LEADER.CHRWORK[CWK_LV] ==60){SetLevel(RICOTTA,60)} 
	else if(LEADER.CHRWORK[CWK_LV] ==61){SetLevel(RICOTTA,61)} 
	else if(LEADER.CHRWORK[CWK_LV] ==62){SetLevel(RICOTTA,62)} 
	else if(LEADER.CHRWORK[CWK_LV] ==63){SetLevel(RICOTTA,63)} 
	else if(LEADER.CHRWORK[CWK_LV] ==64){SetLevel(RICOTTA,64)} 
	else if(LEADER.CHRWORK[CWK_LV] ==65){SetLevel(RICOTTA,65)} 
	else if(LEADER.CHRWORK[CWK_LV] ==66){SetLevel(RICOTTA,66)} 
	else if(LEADER.CHRWORK[CWK_LV] ==67){SetLevel(RICOTTA,67)} 
	else if(LEADER.CHRWORK[CWK_LV] ==68){SetLevel(RICOTTA,68)} 
	else if(LEADER.CHRWORK[CWK_LV] ==69){SetLevel(RICOTTA,69)} 
	else if(LEADER.CHRWORK[CWK_LV] ==70){SetLevel(RICOTTA,70)} 
	else if(LEADER.CHRWORK[CWK_LV] ==71){SetLevel(RICOTTA,71)} 
	else if(LEADER.CHRWORK[CWK_LV] ==72){SetLevel(RICOTTA,72)} 
	else if(LEADER.CHRWORK[CWK_LV] ==73){SetLevel(RICOTTA,73)} 
	else if(LEADER.CHRWORK[CWK_LV] ==74){SetLevel(RICOTTA,74)} 
	else if(LEADER.CHRWORK[CWK_LV] ==75){SetLevel(RICOTTA,75)} 
	else if(LEADER.CHRWORK[CWK_LV] ==76){SetLevel(RICOTTA,76)} 
	else if(LEADER.CHRWORK[CWK_LV] ==77){SetLevel(RICOTTA,77)} 
	else if(LEADER.CHRWORK[CWK_LV] ==78){SetLevel(RICOTTA,78)} 
	else if(LEADER.CHRWORK[CWK_LV] ==79){SetLevel(RICOTTA,79)} 
	else if(LEADER.CHRWORK[CWK_LV] ==80){SetLevel(RICOTTA,80)} 
	else if(LEADER.CHRWORK[CWK_LV] ==81){SetLevel(RICOTTA,81)} 
	else if(LEADER.CHRWORK[CWK_LV] ==82){SetLevel(RICOTTA,82)} 
	else if(LEADER.CHRWORK[CWK_LV] ==83){SetLevel(RICOTTA,83)} 
	else if(LEADER.CHRWORK[CWK_LV] ==84){SetLevel(RICOTTA,84)} 
	else if(LEADER.CHRWORK[CWK_LV] ==85){SetLevel(RICOTTA,85)} 
	else if(LEADER.CHRWORK[CWK_LV] ==86){SetLevel(RICOTTA,86)} 
	else if(LEADER.CHRWORK[CWK_LV] ==87){SetLevel(RICOTTA,87)} 
	else if(LEADER.CHRWORK[CWK_LV] ==88){SetLevel(RICOTTA,88)} 
	else if(LEADER.CHRWORK[CWK_LV] ==89){SetLevel(RICOTTA,89)} 
	else if(LEADER.CHRWORK[CWK_LV] ==90){SetLevel(RICOTTA,90)} 
	else if(LEADER.CHRWORK[CWK_LV] ==91){SetLevel(RICOTTA,91)} 
	else if(LEADER.CHRWORK[CWK_LV] ==92){SetLevel(RICOTTA,92)} 
	else if(LEADER.CHRWORK[CWK_LV] ==93){SetLevel(RICOTTA,93)} 
	else if(LEADER.CHRWORK[CWK_LV] ==94){SetLevel(RICOTTA,94)} 
	else if(LEADER.CHRWORK[CWK_LV] ==95){SetLevel(RICOTTA,95)} 
	else if(LEADER.CHRWORK[CWK_LV] ==96){SetLevel(RICOTTA,96)} 
	else if(LEADER.CHRWORK[CWK_LV] ==97){SetLevel(RICOTTA,97)} 
	else if(LEADER.CHRWORK[CWK_LV] ==98){SetLevel(RICOTTA,98)} 
	else{SetLevel(RICOTTA,99)} 

    
}

function "0218"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CKatthew#4C Joined the Village.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetDiaryFlag( DF_JOIN_KASHU, 1 ) //Footprint memo: Rescued Cashu.
    SetDiaryCharaFlag( DRCHA_KASHU, DRCHA_FLAG_OPEN, 1 ) 
    SetDiaryCharaFlag( DRCHA_KASHU, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_KASHU, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_KASHU, DRCHA_FLAG_INFO3, 1 )
    SetFlag( GF_CAMP_SHIPYARD_LV, 7 )
    JoinNPC( NPC_KASHU, JOIN_NPC_JOIN ) // Joined with Cashu
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )	

    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0143"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_FISHINGROD,1)
    GetItemMessageExPlus(ICON3D_FISHINGROD,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    GetItem(ICON3D_FISHBAIT_WORM,30)
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0420"
{
    GetItem(ICON3D_EARTHSTYLE2,1)
    GetItemMessageExPlus(ICON3D_EARTHSTYLE2,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    if(!FLAG[GF_04MP6201_DIS_OBSTACLE]) //temple of the great tree access
    {
        SetFlag(GF_04MP6201_DIS_OBSTACLE,1)
        SetFlag(GF_SUBEV_PAST_02_GIMMICK_A, 1) // Past Part II: Watched the event [Past Gimmick : Listen to the story of the key]
        SetFlag(GF_SUBEV_PAST_02_GIMMICK_B, 1)// Past Part II: [Past Gimmick : Listen to the story about the key] Opened the door
        SetFlag(GF_SUBEV_PAST_02_FIRECNT_A, 1)// Past Part II: [Past Quest E: Examine the light on the statue] Light the three candlesticks
        SetFlag(GF_SUBEV_PAST_02_FIRECNT_B, 1)// Past Part II: [Past Quest E: Examine the light on the statue] Light the three candlesticks
        SetFlag(GF_SUBEV_PAST_02_FIRECNT_C, 1)// Past Part II: [Past Quest E: Examine the light on the statue] Light the three candlesticks
        GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"The path to The Maiden awaits.",0,0)
        WaitPrompt()
        WaitCloseWindow()
    }
    
}

function "0226"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_720,1)
    GetItemMessageExPlus(ICON3D_AC_720,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0092"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CSir Carlan#4C Joined the Village.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    JoinNPC( NPC_CURRAN, JOIN_NPC_JOIN ) //Rescued Lord Kahran.
    SetDiaryFlag( DF_JOIN_CURRAN, 1 ) //Footprint memo: Rescued Lord Kahran.
    SetDiaryCharaFlag( DRCHA_CURRAN, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_CURRAN, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_CURRAN, DRCHA_FLAG_INFO3, 1 ) 
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )	

    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0214"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R4_GOLD,1)
    GetItemMessageExPlus(ICON3D_MT_R4_GOLD,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0496"
{
    GetItem(ICON3D_MAIDEN_NOTE,1)
    GetItemMessageExPlus(ICON3D_MAIDEN_NOTE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    if(!FLAG[GF_03MP1101_LEAVE_CAMP] ) //primordial passage access
    {
        SetFlag(GF_03MP1101_LEAVE_CAMP,1)
        GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"The path up The Mountain is open.",0,0)
        WaitPrompt()
        WaitCloseWindow()

    }
    
}

    function "0122"
    {
        SetStopFlag(STOPFLAG_TALK)
        if (!FLAG[GF_02MP1201_JOIN_KATRIN])
        {
            GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CKathleen#4C  Joined the Village.",0,0)
            WaitPrompt()
            WaitCloseWindow()        
            
    SetDiaryFlag( DF_JOIN_KATRIN, 1 ) //Footprint memo: Rescued Katrin.
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_OPEN, 1 ) //Person memo: Register when joining (Katrin)
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO3, 1 )
    JoinNPC( NPC_KATRIN, JOIN_NPC_JOIN ) // Katrin has joined
    SetFlag( GF_02MP1201_JOIN_KATRIN , 1 )
    
    SetFlag(GF_SMITHY_LV,2) //Blacksmith level setting
    //SetFlag( GF_CAMP_SHIPYARD_LV, 1 ) // Drifting village development settings: Shipyard LV1
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )
    GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Weapons can now be reforged.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetDiaryShopFlag(SHOP_ID_WEAPON_A,0) // "Forge (enhanced)"
    SetDiaryShopFlag(SHOP_ID_WEAPON,1) // "Katlin's Weapon Workshop (Enhancement/Evolution)"
    SetDiaryShopFlag(SHOP_ID_ARMOR,1) // "Katlin's Weapon Workshop (Purchase Armor)"


            
            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 41))
            SetChrWork(RICOTTA,CWK_SUP_STR,(RICOTTA.CHRWORK[CWK_SUP_STR] + 33))
            SetChrWork(HUMMEL,CWK_SUP_STR,(HUMMEL.CHRWORK[CWK_SUP_STR] - 18))
            GetItem(ICON3D_WP_HUMMEL_000, 1)
            GetItem(ICON3D_AM_021, 1)
            EquipWeapon(HUMMEL,ICON3D_WP_HUMMEL_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY081])
        {
            SetFlag(GF_SHOP_RANK_3_02,1)
            SetFlag(GF_02MP4309_KILL_SPIDER,1)
            SetFlag(GF_QS201_SHOP_ADD,1)
            SetFlag(GF_TBOX_DUMMY081,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 2.",0,0)
            WaitPrompt()
            WaitCloseWindow()  

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 34))
            SetChrWork(RICOTTA,CWK_SUP_STR,(RICOTTA.CHRWORK[CWK_SUP_STR] - 55))
            GetItem(ICON3D_WP_RICOTTA_000, 1)
            GetItem(ICON3D_AM_022, 1)
            EquipWeapon(RICOTTA,ICON3D_WP_RICOTTA_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY082])
        {
            SetFlag(GF_SHOP_RANK_3_05,1)
            SetFlag(GF_SHOP_RANK_4_01,1)
            //The flag here is the trigger for speaking with Kathleen about the orichalcum and having new weapons made.
            //That event then trips the flag for being able to kill enemies flagged as Saurians.
            SetFlag(GF_03MP7401_GET_MATERIAL, 1)
            //Hummel has no shop upgarde to get him this weapon tier and therefore cannot upgrade to it. So we'll give it to him when we hit this level so Hummel isn't stuck with a tier 2 weapon all game.
            GetItem(ICON3D_WP_HUMMEL_002,1)
            EquipWeapon(HUMMEL, ICON3D_WP_HUMMEL_002)
            SetFlag(GF_TBOX_DUMMY082,1)
            GetItem(ICON3D_HIIROKANE,1)
            GetItemMessageExPlus(ICON3D_HIIROKANE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Turn this into Kathleen.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 3.",0,0)
            WaitPrompt()
            WaitCloseWindow()

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 47))
        }
        else if (!FLAG[GF_TBOX_DUMMY083])
        {
            SetFlag(GF_SHOP_RANK_5_02,1)
            SetFlag(GF_TBOX_DUMMY083,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 4.",0,0)
            WaitPrompt()
            WaitCloseWindow()

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] - 130))
            GetItem(ICON3D_AM_023, 1)
            GetItem(ICON3D_WP_DANA_000, 1)
            EquipWeapon(DANA,ICON3D_WP_DANA_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY084])
        {
            SetFlag(GF_SHOP_RANK_5_04,1)
            SetFlag(GF_QS222_SHOP_ADD,1)
            SetFlag(GF_QS310_GET_ITEM,1)
            SetFlag(GF_QS310_GET_ITEM2,1)
            SetFlag(GF_QS310_GET_ITEM3,1)
            SetFlag(GF_TBOX_DUMMY084,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 5.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        else if (!FLAG[GF_TBOX_DUMMY085])
        {
            SetFlag(GF_SHOP_RANK_5_07,1)
            SetFlag(GF_TBOX_DUMMY085,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 6.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        else if (!FLAG[GF_TBOX_DUMMY086])
        {
            SetFlag(GF_SHOP_RANK_6_01,1)
            SetFlag(GF_05MP6349_KILL_BOSS,1)
            SetFlag(GF_QS600_SHOP_ADD,1)
            SetFlag(GF_TBOX_DUMMY086,1)
            SetFlag(GF_NPC_6_03_AFTER_INTERCEPT12,1)
            SetFlag(GF_06MP1201_GOTO_GEND,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank MAX.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        ResetStopFlag(STOPFLAG_TALK)
    }
    
function "0207"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R4_GOLD,1)
    GetItemMessageExPlus(ICON3D_MT_R4_GOLD,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0394"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R4_GOLD,1)
    GetItemMessageExPlus(ICON3D_MT_R4_GOLD,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0469"
{
    GetItem(ICON3D_COOK_RECIPE10,1)
    GetItemMessageExPlus(ICON3D_COOK_RECIPE10,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
        GetItem(ICON3D_FD_WHEAT,2)
        GetItem(ICON3D_FD_MEAT_03,2)
        GetItem(ICON3D_FD_VG_EGGPLANT,4)
        GetItem(ICON3D_FD_VG_TOMATO,4)
        
}

function "0195"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_020,1)
    GetItemMessageExPlus(ICON3D_AC_020,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0254"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R4_GOLD,1)
    GetItemMessageExPlus(ICON3D_MT_R4_GOLD,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0249"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_WATERSTYLE2,1)
    GetItemMessageExPlus(ICON3D_WATERSTYLE2,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    if(!FLAG[GF_04MP5101_OUT_CAMP]) //ruins of eternia access
    {
        SetFlag( GF_04MP5101_OUT_CAMP, 1 )
        SetFlag(GF_04MP6401M_GO_MP6101M,1)
        SetFlag( GF_04MP6101_MAKE_CAMP, 1 )
        SetFlag( GF_04MP6101_CRYSTAL_FLASH, 1 )
        SetFlag(GF_SUBEV_PAST_01_GIMMICK_A,1) // Past Part I: Achieved [Past Gimmick : Waterway Repair]
        SetFlag(GF_SUBEV_PAST_01_GIMMICK_C,1) // Past episode I: Viewed [Past gimmick: Reflection in modern version]
        SetFlag(GF_SUBEV_PAST_01_LP_1ST,1) // Past Part I: [LP: Bookshelf in Dana's Room] First time
        GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"The streets of the Forgotten City can be walked.",0,0)
        WaitPrompt()
        WaitCloseWindow()

    }
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0385"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R2_PEARL,1)
    GetItemMessageExPlus(ICON3D_MT_R2_PEARL,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0261"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R4_GOLD,5)
    GetItemMessageExPlus(ICON3D_MT_R4_GOLD,5,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0539"
{
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CShoebill#4C Joined the Village.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    //Flag setting/obtaining items
    SetDiaryCharaFlag( DRCHA_RICOTTA, DRCHA_FLAG_INFO2, 1 ) //Person memo: Additional information release 2 (Ricotta)
    JoinNPC( NPC_BALAENICEPS_REX, JOIN_NPC_JOIN ) // Shoebill has joined the party
    JoinNPC( NPC_AUSTEN2, JOIN_NPC_JOIN )
    //Register person memo Register when you talk to Ricotta or see the reunion event with Ricotta
    SetDiaryCharaFlag( DRCHA_BALAENICEPS_REX, DRCHA_FLAG_OPEN, 1 ) 
    SetDiaryCharaFlag( DRCHA_BALAENICEPS_REX, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_BALAENICEPS_REX, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_BALAENICEPS_REX, DRCHA_FLAG_INFO3, 1 )
    
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )	

    
}

    function "0395"
    {
        SetStopFlag(STOPFLAG_TALK)
        if (!FLAG[GF_02MP1201_JOIN_KATRIN])
        {
            GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CKathleen#4C  Joined the Village.",0,0)
            WaitPrompt()
            WaitCloseWindow()        
            
    SetDiaryFlag( DF_JOIN_KATRIN, 1 ) //Footprint memo: Rescued Katrin.
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_OPEN, 1 ) //Person memo: Register when joining (Katrin)
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO3, 1 )
    JoinNPC( NPC_KATRIN, JOIN_NPC_JOIN ) // Katrin has joined
    SetFlag( GF_02MP1201_JOIN_KATRIN , 1 )
    
    SetFlag(GF_SMITHY_LV,2) //Blacksmith level setting
    //SetFlag( GF_CAMP_SHIPYARD_LV, 1 ) // Drifting village development settings: Shipyard LV1
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )
    GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Weapons can now be reforged.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetDiaryShopFlag(SHOP_ID_WEAPON_A,0) // "Forge (enhanced)"
    SetDiaryShopFlag(SHOP_ID_WEAPON,1) // "Katlin's Weapon Workshop (Enhancement/Evolution)"
    SetDiaryShopFlag(SHOP_ID_ARMOR,1) // "Katlin's Weapon Workshop (Purchase Armor)"


            
            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 41))
            SetChrWork(RICOTTA,CWK_SUP_STR,(RICOTTA.CHRWORK[CWK_SUP_STR] + 33))
            SetChrWork(HUMMEL,CWK_SUP_STR,(HUMMEL.CHRWORK[CWK_SUP_STR] - 18))
            GetItem(ICON3D_WP_HUMMEL_000, 1)
            GetItem(ICON3D_AM_021, 1)
            EquipWeapon(HUMMEL,ICON3D_WP_HUMMEL_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY081])
        {
            SetFlag(GF_SHOP_RANK_3_02,1)
            SetFlag(GF_02MP4309_KILL_SPIDER,1)
            SetFlag(GF_QS201_SHOP_ADD,1)
            SetFlag(GF_TBOX_DUMMY081,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 2.",0,0)
            WaitPrompt()
            WaitCloseWindow()  

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 34))
            SetChrWork(RICOTTA,CWK_SUP_STR,(RICOTTA.CHRWORK[CWK_SUP_STR] - 55))
            GetItem(ICON3D_WP_RICOTTA_000, 1)
            GetItem(ICON3D_AM_022, 1)
            EquipWeapon(RICOTTA,ICON3D_WP_RICOTTA_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY082])
        {
            SetFlag(GF_SHOP_RANK_3_05,1)
            SetFlag(GF_SHOP_RANK_4_01,1)
            //The flag here is the trigger for speaking with Kathleen about the orichalcum and having new weapons made.
            //That event then trips the flag for being able to kill enemies flagged as Saurians.
            SetFlag(GF_03MP7401_GET_MATERIAL, 1)
            //Hummel has no shop upgarde to get him this weapon tier and therefore cannot upgrade to it. So we'll give it to him when we hit this level so Hummel isn't stuck with a tier 2 weapon all game.
            GetItem(ICON3D_WP_HUMMEL_002,1)
            EquipWeapon(HUMMEL, ICON3D_WP_HUMMEL_002)
            SetFlag(GF_TBOX_DUMMY082,1)
            GetItem(ICON3D_HIIROKANE,1)
            GetItemMessageExPlus(ICON3D_HIIROKANE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Turn this into Kathleen.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 3.",0,0)
            WaitPrompt()
            WaitCloseWindow()

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 47))
        }
        else if (!FLAG[GF_TBOX_DUMMY083])
        {
            SetFlag(GF_SHOP_RANK_5_02,1)
            SetFlag(GF_TBOX_DUMMY083,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 4.",0,0)
            WaitPrompt()
            WaitCloseWindow()

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] - 130))
            GetItem(ICON3D_AM_023, 1)
            GetItem(ICON3D_WP_DANA_000, 1)
            EquipWeapon(DANA,ICON3D_WP_DANA_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY084])
        {
            SetFlag(GF_SHOP_RANK_5_04,1)
            SetFlag(GF_QS222_SHOP_ADD,1)
            SetFlag(GF_QS310_GET_ITEM,1)
            SetFlag(GF_QS310_GET_ITEM2,1)
            SetFlag(GF_QS310_GET_ITEM3,1)
            SetFlag(GF_TBOX_DUMMY084,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 5.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        else if (!FLAG[GF_TBOX_DUMMY085])
        {
            SetFlag(GF_SHOP_RANK_5_07,1)
            SetFlag(GF_TBOX_DUMMY085,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 6.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        else if (!FLAG[GF_TBOX_DUMMY086])
        {
            SetFlag(GF_SHOP_RANK_6_01,1)
            SetFlag(GF_05MP6349_KILL_BOSS,1)
            SetFlag(GF_QS600_SHOP_ADD,1)
            SetFlag(GF_TBOX_DUMMY086,1)
            SetFlag(GF_NPC_6_03_AFTER_INTERCEPT12,1)
            SetFlag(GF_06MP1201_GOTO_GEND,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank MAX.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        ResetStopFlag(STOPFLAG_TALK)
    }
    
function "0384"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R2_PEARL,1)
    GetItemMessageExPlus(ICON3D_MT_R2_PEARL,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0269"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_021,1)
    GetItemMessageExPlus(ICON3D_AC_021,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0436"
{
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CSilvia#4C Joined the Village.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetDiaryFlag( DF_JOIN_SILVIA, 1 ) //Footprint memo: Sylvia has joined the Drifting Village.
    SetDiaryCharaFlag( DRCHA_SILVIA, DRCHA_FLAG_OPEN, 1 ) 
    SetDiaryCharaFlag( DRCHA_SILVIA, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_SILVIA, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_SILVIA, DRCHA_FLAG_INFO3, 1 )
    JoinNPC( NPC_SILVIA, JOIN_NPC_JOIN ) // Sylvia has become a friend
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )	

    
}

function "0462"
{
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CAlison#4C Joined the Village.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    //SetFlag( SF_WARP_DISABLED, 1 ) //Warp disabled
    SetDiaryFlag( DF_JOIN_ALISON, 1 ) //Footprint memo: Rescued Alison.
    SetDiaryCharaFlag( DRCHA_ALISON, DRCHA_FLAG_OPEN, 1 ) //Person memo: Register when joining (Alison)
    SetDiaryCharaFlag( DRCHA_ALISON, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_ALISON, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_ALISON, DRCHA_FLAG_INFO3, 1 ) //Person memo: Additional information release 3 (Alison)
    SetFlag(GF_02MP1202_OPEN_DRESS,1)
    SetFlag( GF_CAMP_TAILOR_LV, 1 )
    SetFlag( GF_02MP1201_JOIN_ALISON , 1 ) /// Rescued Alison
    SetFlag( GF_NPC_2A_03_JOIN_ALISON , 1)
    //SetFlag( GF_HELP_A26, 1 ) // Tutorial: Rescue the castaways
    // Participate in interception battle
    JoinNPC(NPC_ALISON, JOIN_NPC_JOIN) // Rescued Alison
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )	

    
}

function "0135"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CDogi#4C Joined the Village.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetDiaryFlag( DF_JOIN_DOGI, 1 ) //Footprint memo: Reunited with Dogi.
    SetDiaryCharaFlag( DRCHA_DOGI, DRCHA_FLAG_OPEN, 1 ) //Person memo: Register when joining (Dogi)
    SetDiaryCharaFlag( DRCHA_DOGI, DRCHA_FLAG_INFO1, 1 ) //Person memo: Additional information release 1 (Dogi)
    SetDiaryCharaFlag( DRCHA_DOGI, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_DOGI, DRCHA_FLAG_INFO3, 1 )
    JoinNPC(NPC_DOGI, JOIN_NPC_JOIN) // Participate in Dogi interception battle
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )	

    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0144"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CEd#4C Joined the Village.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetDiaryFlag( DF_JOIN_ED, 1 ) //Footprint memo: Rescued Ed.
    SetFlag( GF_CAMP_TAILOR_LV, 2 ) // Drifting village development setting: Tailor LV2
    SetDiaryCharaFlag( DRCHA_ED, DRCHA_FLAG_OPEN, 1 ) 
    SetDiaryCharaFlag( DRCHA_ED, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_ED, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_ED, DRCHA_FLAG_INFO3, 1 )
    SetDiaryShopFlag(SHOP_ID_DRESS,0) // "Alison's Tailor"
    SetDiaryShopFlag(SHOP_ID_DRESS_E,1) // "Ed & Alison's Tailor"
    JoinNPC( NPC_ED, JOIN_NPC_JOIN ) // Joined with Ed
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )
    SetFlag( GF_QS510_FIND_ED, 1 ) //Found Ed on your own (achieved hometown flower)
    SetFlag( GF_SUBEV_JOIN_ED, 1 ) //Rescued Ed
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 1) ) //Quest accomplished [QS510] Hometown Flower Fame Value +1		
    SetDiaryFlag( DF_QS510_END, 1 ) // [QS510]At the same time as finding purple bellweed at Cape Bokkyo

    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0258"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CQuina#4C Joined the Village.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetDiaryFlag( DF_JOIN_KUINA, 1 ) //Footprint memo: Kuina was rescued.
    SetDiaryCharaFlag( DRCHA_KUINA, DRCHA_FLAG_OPEN, 1 ) //Person memo: Register when joining (Kuina)
    SetDiaryCharaFlag( DRCHA_KUINA, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_KUINA, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_KUINA, DRCHA_FLAG_INFO3, 1 )
    JoinNPC( NPC_KUINA, JOIN_NPC_JOIN ) //Rescued Kuina.
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )	

    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0130"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CSahad#4C Joined the Party.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetFlag(SF_SAHAD_JOINED, 1)
    SetFlag(SF_SAHAD_JOINOK, 1)
 
    SetDiaryFlag( DF_JOIN_SAHAD, 1 )		
    SetDiaryCharaFlag( DRCHA_SAHAD, DRCHA_FLAG_OPEN, 1 )
    SetDiaryCharaFlag( DRCHA_SAHAD, DRCHA_FLAG_INFO1, 1 )
    SetDiaryCharaFlag( DRCHA_SAHAD, DRCHA_FLAG_INFO2, 1 )
    SetDiaryCharaFlag( DRCHA_SAHAD, DRCHA_FLAG_INFO3, 1 )
    GetItem(ICON3D_WP_SAHAD_000, 1)
    GetItem(ICON3D_AM_020, 1)
    EquipWeapon(SAHAD,ICON3D_WP_SAHAD_000)
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )

    if( FLAG[GF_03MP1201_ALARM_INTERCEPT])
    {
        GetItem(ICON3D_WP_SAHAD_003, 1)		
	    EquipWeapon(SAHAD, ICON3D_WP_SAHAD_003)
    }

    JoinParty(PARTY_SAHAD)

    if(FLAG[GF_TBOX_DUMMY111]) //if skill shuffle is on
    {
        CallFunc("rng:0524")
        CallFunc("rng:0525")
    }
	SetLevel(SAHAD,3) 
	if(LEADER.CHRWORK[CWK_LV] ==1){SetLevel(SAHAD,1)} 
	else if(LEADER.CHRWORK[CWK_LV] ==2){SetLevel(SAHAD,2)} 
	else if(LEADER.CHRWORK[CWK_LV] ==3){SetLevel(SAHAD,3)} 
	else if(LEADER.CHRWORK[CWK_LV] ==4){SetLevel(SAHAD,4)} 
	else if(LEADER.CHRWORK[CWK_LV] ==5){SetLevel(SAHAD,5)} 
	else if(LEADER.CHRWORK[CWK_LV] ==6){SetLevel(SAHAD,6)} 
	else if(LEADER.CHRWORK[CWK_LV] ==7){SetLevel(SAHAD,7)} 
	else if(LEADER.CHRWORK[CWK_LV] ==8){SetLevel(SAHAD,8)} 
	else if(LEADER.CHRWORK[CWK_LV] ==9){SetLevel(SAHAD,9)} 
	else if(LEADER.CHRWORK[CWK_LV] ==10){SetLevel(SAHAD,10)} 
	else if(LEADER.CHRWORK[CWK_LV] ==11){SetLevel(SAHAD,11)} 
	else if(LEADER.CHRWORK[CWK_LV] ==12){SetLevel(SAHAD,12)} 
	else if(LEADER.CHRWORK[CWK_LV] ==13){SetLevel(SAHAD,13)} 
	else if(LEADER.CHRWORK[CWK_LV] ==14){SetLevel(SAHAD,14)} 
	else if(LEADER.CHRWORK[CWK_LV] ==15){SetLevel(SAHAD,15)} 
	else if(LEADER.CHRWORK[CWK_LV] ==16){SetLevel(SAHAD,16)} 
	else if(LEADER.CHRWORK[CWK_LV] ==17){SetLevel(SAHAD,17)} 
	else if(LEADER.CHRWORK[CWK_LV] ==18){SetLevel(SAHAD,18)} 
	else if(LEADER.CHRWORK[CWK_LV] ==19){SetLevel(SAHAD,19)} 
	else if(LEADER.CHRWORK[CWK_LV] ==20){SetLevel(SAHAD,20)} 
	else if(LEADER.CHRWORK[CWK_LV] ==21){SetLevel(SAHAD,21)} 
	else if(LEADER.CHRWORK[CWK_LV] ==22){SetLevel(SAHAD,22)} 
	else if(LEADER.CHRWORK[CWK_LV] ==23){SetLevel(SAHAD,23)} 
	else if(LEADER.CHRWORK[CWK_LV] ==24){SetLevel(SAHAD,24)} 
	else if(LEADER.CHRWORK[CWK_LV] ==25){SetLevel(SAHAD,25)} 
	else if(LEADER.CHRWORK[CWK_LV] ==26){SetLevel(SAHAD,26)} 
	else if(LEADER.CHRWORK[CWK_LV] ==27){SetLevel(SAHAD,27)} 
	else if(LEADER.CHRWORK[CWK_LV] ==28){SetLevel(SAHAD,28)} 
	else if(LEADER.CHRWORK[CWK_LV] ==29){SetLevel(SAHAD,29)} 
	else if(LEADER.CHRWORK[CWK_LV] ==30){SetLevel(SAHAD,30)} 
	else if(LEADER.CHRWORK[CWK_LV] ==31){SetLevel(SAHAD,31)} 
	else if(LEADER.CHRWORK[CWK_LV] ==32){SetLevel(SAHAD,32)} 
	else if(LEADER.CHRWORK[CWK_LV] ==33){SetLevel(SAHAD,33)} 
	else if(LEADER.CHRWORK[CWK_LV] ==34){SetLevel(SAHAD,34)} 
	else if(LEADER.CHRWORK[CWK_LV] ==35){SetLevel(SAHAD,35)} 
	else if(LEADER.CHRWORK[CWK_LV] ==36){SetLevel(SAHAD,36)} 
	else if(LEADER.CHRWORK[CWK_LV] ==37){SetLevel(SAHAD,37)} 
	else if(LEADER.CHRWORK[CWK_LV] ==38){SetLevel(SAHAD,38)} 
	else if(LEADER.CHRWORK[CWK_LV] ==39){SetLevel(SAHAD,39)} 
	else if(LEADER.CHRWORK[CWK_LV] ==40){SetLevel(SAHAD,40)} 
	else if(LEADER.CHRWORK[CWK_LV] ==41){SetLevel(SAHAD,41)} 
	else if(LEADER.CHRWORK[CWK_LV] ==42){SetLevel(SAHAD,42)} 
	else if(LEADER.CHRWORK[CWK_LV] ==43){SetLevel(SAHAD,43)} 
	else if(LEADER.CHRWORK[CWK_LV] ==44){SetLevel(SAHAD,44)} 
	else if(LEADER.CHRWORK[CWK_LV] ==45){SetLevel(SAHAD,45)} 
	else if(LEADER.CHRWORK[CWK_LV] ==46){SetLevel(SAHAD,46)} 
	else if(LEADER.CHRWORK[CWK_LV] ==47){SetLevel(SAHAD,47)} 
	else if(LEADER.CHRWORK[CWK_LV] ==48){SetLevel(SAHAD,48)} 
	else if(LEADER.CHRWORK[CWK_LV] ==49){SetLevel(SAHAD,49)} 
	else if(LEADER.CHRWORK[CWK_LV] ==50){SetLevel(SAHAD,50)} 
	else if(LEADER.CHRWORK[CWK_LV] ==51){SetLevel(SAHAD,51)} 
	else if(LEADER.CHRWORK[CWK_LV] ==52){SetLevel(SAHAD,52)} 
	else if(LEADER.CHRWORK[CWK_LV] ==53){SetLevel(SAHAD,53)} 
	else if(LEADER.CHRWORK[CWK_LV] ==54){SetLevel(SAHAD,54)} 
	else if(LEADER.CHRWORK[CWK_LV] ==55){SetLevel(SAHAD,55)} 
	else if(LEADER.CHRWORK[CWK_LV] ==56){SetLevel(SAHAD,56)} 
	else if(LEADER.CHRWORK[CWK_LV] ==57){SetLevel(SAHAD,57)} 
	else if(LEADER.CHRWORK[CWK_LV] ==58){SetLevel(SAHAD,58)} 
	else if(LEADER.CHRWORK[CWK_LV] ==59){SetLevel(SAHAD,59)} 
	else if(LEADER.CHRWORK[CWK_LV] ==60){SetLevel(SAHAD,60)} 
	else if(LEADER.CHRWORK[CWK_LV] ==61){SetLevel(SAHAD,61)} 
	else if(LEADER.CHRWORK[CWK_LV] ==62){SetLevel(SAHAD,62)} 
	else if(LEADER.CHRWORK[CWK_LV] ==63){SetLevel(SAHAD,63)} 
	else if(LEADER.CHRWORK[CWK_LV] ==64){SetLevel(SAHAD,64)} 
	else if(LEADER.CHRWORK[CWK_LV] ==65){SetLevel(SAHAD,65)} 
	else if(LEADER.CHRWORK[CWK_LV] ==66){SetLevel(SAHAD,66)} 
	else if(LEADER.CHRWORK[CWK_LV] ==67){SetLevel(SAHAD,67)} 
	else if(LEADER.CHRWORK[CWK_LV] ==68){SetLevel(SAHAD,68)} 
	else if(LEADER.CHRWORK[CWK_LV] ==69){SetLevel(SAHAD,69)} 
	else if(LEADER.CHRWORK[CWK_LV] ==70){SetLevel(SAHAD,70)} 
	else if(LEADER.CHRWORK[CWK_LV] ==71){SetLevel(SAHAD,71)} 
	else if(LEADER.CHRWORK[CWK_LV] ==72){SetLevel(SAHAD,72)} 
	else if(LEADER.CHRWORK[CWK_LV] ==73){SetLevel(SAHAD,73)} 
	else if(LEADER.CHRWORK[CWK_LV] ==74){SetLevel(SAHAD,74)} 
	else if(LEADER.CHRWORK[CWK_LV] ==75){SetLevel(SAHAD,75)} 
	else if(LEADER.CHRWORK[CWK_LV] ==76){SetLevel(SAHAD,76)} 
	else if(LEADER.CHRWORK[CWK_LV] ==77){SetLevel(SAHAD,77)} 
	else if(LEADER.CHRWORK[CWK_LV] ==78){SetLevel(SAHAD,78)} 
	else if(LEADER.CHRWORK[CWK_LV] ==79){SetLevel(SAHAD,79)} 
	else if(LEADER.CHRWORK[CWK_LV] ==80){SetLevel(SAHAD,80)} 
	else if(LEADER.CHRWORK[CWK_LV] ==81){SetLevel(SAHAD,81)} 
	else if(LEADER.CHRWORK[CWK_LV] ==82){SetLevel(SAHAD,82)} 
	else if(LEADER.CHRWORK[CWK_LV] ==83){SetLevel(SAHAD,83)} 
	else if(LEADER.CHRWORK[CWK_LV] ==84){SetLevel(SAHAD,84)} 
	else if(LEADER.CHRWORK[CWK_LV] ==85){SetLevel(SAHAD,85)} 
	else if(LEADER.CHRWORK[CWK_LV] ==86){SetLevel(SAHAD,86)} 
	else if(LEADER.CHRWORK[CWK_LV] ==87){SetLevel(SAHAD,87)} 
	else if(LEADER.CHRWORK[CWK_LV] ==88){SetLevel(SAHAD,88)} 
	else if(LEADER.CHRWORK[CWK_LV] ==89){SetLevel(SAHAD,89)} 
	else if(LEADER.CHRWORK[CWK_LV] ==90){SetLevel(SAHAD,90)} 
	else if(LEADER.CHRWORK[CWK_LV] ==91){SetLevel(SAHAD,91)} 
	else if(LEADER.CHRWORK[CWK_LV] ==92){SetLevel(SAHAD,92)} 
	else if(LEADER.CHRWORK[CWK_LV] ==93){SetLevel(SAHAD,93)} 
	else if(LEADER.CHRWORK[CWK_LV] ==94){SetLevel(SAHAD,94)} 
	else if(LEADER.CHRWORK[CWK_LV] ==95){SetLevel(SAHAD,95)} 
	else if(LEADER.CHRWORK[CWK_LV] ==96){SetLevel(SAHAD,96)} 
	else if(LEADER.CHRWORK[CWK_LV] ==97){SetLevel(SAHAD,97)} 
	else if(LEADER.CHRWORK[CWK_LV] ==98){SetLevel(SAHAD,98)} 
	else{SetLevel(SAHAD,99)} 

    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0408"
{
    GetItem(ICON3D_MEMO_R_001,1)
    GetItemMessageExPlus(ICON3D_MEMO_R_001,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    

    SetFlag(GF_05MP7411_READ_NOTE1, 1)
    GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"The gangway has been dropped.",0,0)
    WaitPrompt()
    WaitCloseWindow()


}

function "0133"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_ICE_FLOWER,1)
    GetItemMessageExPlus(ICON3D_ICE_FLOWER,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    if(!FLAG[GF_05MP6204_APPEAR_CASTLE]) //chasm access
    {
        SetFlag(GF_05MP6204_APPEAR_CASTLE,1)
        SetFlag(GF_SUBEV_PAST_04_GIMMICK_L, 1)// Watched Past Chapter IV: [Past Gimmick : Repairing the Great Monastery Door]
        SetFlag(GF_SUBEV_PAST_04_GIMMICK, 2)// Past Part IV: Achieved [Past Gimmick : Repairing the door of the Great Monastery] (substitute 2)
        SetFlag(GF_OPEN_FLOOR_02,1) //I saw a prediction that the second floor would open.
        GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"The Palace emerges from the depths.",0,0)
        WaitPrompt()
        WaitCloseWindow()
    }
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0228"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_COOK_RECIPE09,1)
    GetItemMessageExPlus(ICON3D_COOK_RECIPE09,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
        GetItem(ICON3D_FD_SEA_SALT,2)
        GetItem(ICON3D_FD_LAND_HONEY,2)
        GetItem(ICON3D_FD_VG_CABBAGE,4)
        GetItem(ICON3D_FD_VG_CORN,4)
        
    ResetStopFlag(STOPFLAG_TALK)
}

    function "0095"
    {
        SetStopFlag(STOPFLAG_TALK)
        if (!FLAG[GF_02MP1201_JOIN_KATRIN])
        {
            GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CKathleen#4C  Joined the Village.",0,0)
            WaitPrompt()
            WaitCloseWindow()        
            
    SetDiaryFlag( DF_JOIN_KATRIN, 1 ) //Footprint memo: Rescued Katrin.
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_OPEN, 1 ) //Person memo: Register when joining (Katrin)
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO3, 1 )
    JoinNPC( NPC_KATRIN, JOIN_NPC_JOIN ) // Katrin has joined
    SetFlag( GF_02MP1201_JOIN_KATRIN , 1 )
    
    SetFlag(GF_SMITHY_LV,2) //Blacksmith level setting
    //SetFlag( GF_CAMP_SHIPYARD_LV, 1 ) // Drifting village development settings: Shipyard LV1
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )
    GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Weapons can now be reforged.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetDiaryShopFlag(SHOP_ID_WEAPON_A,0) // "Forge (enhanced)"
    SetDiaryShopFlag(SHOP_ID_WEAPON,1) // "Katlin's Weapon Workshop (Enhancement/Evolution)"
    SetDiaryShopFlag(SHOP_ID_ARMOR,1) // "Katlin's Weapon Workshop (Purchase Armor)"


            
            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 41))
            SetChrWork(RICOTTA,CWK_SUP_STR,(RICOTTA.CHRWORK[CWK_SUP_STR] + 33))
            SetChrWork(HUMMEL,CWK_SUP_STR,(HUMMEL.CHRWORK[CWK_SUP_STR] - 18))
            GetItem(ICON3D_WP_HUMMEL_000, 1)
            GetItem(ICON3D_AM_021, 1)
            EquipWeapon(HUMMEL,ICON3D_WP_HUMMEL_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY081])
        {
            SetFlag(GF_SHOP_RANK_3_02,1)
            SetFlag(GF_02MP4309_KILL_SPIDER,1)
            SetFlag(GF_QS201_SHOP_ADD,1)
            SetFlag(GF_TBOX_DUMMY081,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 2.",0,0)
            WaitPrompt()
            WaitCloseWindow()  

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 34))
            SetChrWork(RICOTTA,CWK_SUP_STR,(RICOTTA.CHRWORK[CWK_SUP_STR] - 55))
            GetItem(ICON3D_WP_RICOTTA_000, 1)
            GetItem(ICON3D_AM_022, 1)
            EquipWeapon(RICOTTA,ICON3D_WP_RICOTTA_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY082])
        {
            SetFlag(GF_SHOP_RANK_3_05,1)
            SetFlag(GF_SHOP_RANK_4_01,1)
            //The flag here is the trigger for speaking with Kathleen about the orichalcum and having new weapons made.
            //That event then trips the flag for being able to kill enemies flagged as Saurians.
            SetFlag(GF_03MP7401_GET_MATERIAL, 1)
            //Hummel has no shop upgarde to get him this weapon tier and therefore cannot upgrade to it. So we'll give it to him when we hit this level so Hummel isn't stuck with a tier 2 weapon all game.
            GetItem(ICON3D_WP_HUMMEL_002,1)
            EquipWeapon(HUMMEL, ICON3D_WP_HUMMEL_002)
            SetFlag(GF_TBOX_DUMMY082,1)
            GetItem(ICON3D_HIIROKANE,1)
            GetItemMessageExPlus(ICON3D_HIIROKANE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Turn this into Kathleen.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 3.",0,0)
            WaitPrompt()
            WaitCloseWindow()

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 47))
        }
        else if (!FLAG[GF_TBOX_DUMMY083])
        {
            SetFlag(GF_SHOP_RANK_5_02,1)
            SetFlag(GF_TBOX_DUMMY083,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 4.",0,0)
            WaitPrompt()
            WaitCloseWindow()

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] - 130))
            GetItem(ICON3D_AM_023, 1)
            GetItem(ICON3D_WP_DANA_000, 1)
            EquipWeapon(DANA,ICON3D_WP_DANA_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY084])
        {
            SetFlag(GF_SHOP_RANK_5_04,1)
            SetFlag(GF_QS222_SHOP_ADD,1)
            SetFlag(GF_QS310_GET_ITEM,1)
            SetFlag(GF_QS310_GET_ITEM2,1)
            SetFlag(GF_QS310_GET_ITEM3,1)
            SetFlag(GF_TBOX_DUMMY084,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 5.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        else if (!FLAG[GF_TBOX_DUMMY085])
        {
            SetFlag(GF_SHOP_RANK_5_07,1)
            SetFlag(GF_TBOX_DUMMY085,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 6.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        else if (!FLAG[GF_TBOX_DUMMY086])
        {
            SetFlag(GF_SHOP_RANK_6_01,1)
            SetFlag(GF_05MP6349_KILL_BOSS,1)
            SetFlag(GF_QS600_SHOP_ADD,1)
            SetFlag(GF_TBOX_DUMMY086,1)
            SetFlag(GF_NPC_6_03_AFTER_INTERCEPT12,1)
            SetFlag(GF_06MP1201_GOTO_GEND,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank MAX.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        ResetStopFlag(STOPFLAG_TALK)
    }
    
function "0574"
{
    GetItem(ICON3D_MEMO_T_002,1)
    GetItemMessageExPlus(ICON3D_MEMO_T_002,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    if( !FLAG[GF_TBOX_DUMMY100])
    {
        Intercept(INTERCEPT_STAGE01,1)
        Intercept(INTERCEPT_STAGE02,1)
        Intercept(INTERCEPT_STAGE03,1)
        Intercept(INTERCEPT_STAGE04,1)
        Intercept(INTERCEPT_STAGE05,1)
        Intercept(INTERCEPT_STAGE06,1)
        Intercept(INTERCEPT_STAGE07,1)
        GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Intercept list updated.",0,0)
        WaitPrompt()
        WaitCloseWindow()
        SetFlag(GF_TBOX_DUMMY100,1)
    }
    else if( !FLAG[GF_TBOX_DUMMY101])
    {
        SetFlag(GF_TBOX_DUMMY094,1)
        Intercept(INTERCEPT_STAGE31,1)
        SetFlag(GF_QS303_QUESTCLEAR,1)
        Intercept(INTERCEPT_STAGE32,1)
        Intercept(INTERCEPT_STAGE33,1)
        Intercept(INTERCEPT_STAGE34,1)
        Intercept(INTERCEPT_STAGE35,1)
        Intercept(INTERCEPT_STAGE36,1)
        Intercept(INTERCEPT_STAGE37,1)
        GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Intercept list updated.",0,0)
        WaitPrompt()
        WaitCloseWindow()
        SetFlag(GF_TBOX_DUMMY101,1)
    }
    else if( !FLAG[GF_TBOX_DUMMY102])
    {
        Intercept(INTERCEPT_STAGE08,1)
        Intercept(INTERCEPT_STAGE09,1)
        Intercept(INTERCEPT_STAGE11,1)
        Intercept(INTERCEPT_STAGE12,1)
        Intercept(INTERCEPT_STAGE38,1)
        Intercept(INTERCEPT_STAGE39,1)
        GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Intercept list updated.",0,0)
        WaitPrompt()
        WaitCloseWindow()
        SetFlag(GF_TBOX_DUMMY102,1)
    }
    else if ( !FLAG[GF_TBOX_DUMMY103])
    {
	    Intercept(INTERCEPT_STAGE21,1)
        GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Intercept list complete.",0,0)
        WaitPrompt()
        WaitCloseWindow()
        SetFlag(GF_TBOX_DUMMY103,1)
    }

}

function "0208"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_058,1)
    GetItemMessageExPlus(ICON3D_AC_058,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0082"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CLittle Paro#4C Joined the Village.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetDiaryCharaFlag( DRCHA_PARO, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_PARO, DRCHA_FLAG_OPEN, 1 ) //Person memo: Register when joining (Little Paro) -> (Patch 1.01) Move after name is known
    SetDiaryCharaFlag( DRCHA_PARO, DRCHA_FLAG_INFO2, 1 )
    SetDiaryCharaFlag( DRCHA_PARO, DRCHA_FLAG_INFO3, 1 )
    JoinNPC( NPC_PARO, JOIN_NPC_JOIN ) // Little Paro has become a friend
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )

    
    ResetStopFlag(STOPFLAG_TALK)
}

    function "0119"
    {
        SetStopFlag(STOPFLAG_TALK)
        if (!FLAG[GF_02MP1201_JOIN_KATRIN])
        {
            GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CKathleen#4C  Joined the Village.",0,0)
            WaitPrompt()
            WaitCloseWindow()        
            
    SetDiaryFlag( DF_JOIN_KATRIN, 1 ) //Footprint memo: Rescued Katrin.
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_OPEN, 1 ) //Person memo: Register when joining (Katrin)
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO3, 1 )
    JoinNPC( NPC_KATRIN, JOIN_NPC_JOIN ) // Katrin has joined
    SetFlag( GF_02MP1201_JOIN_KATRIN , 1 )
    
    SetFlag(GF_SMITHY_LV,2) //Blacksmith level setting
    //SetFlag( GF_CAMP_SHIPYARD_LV, 1 ) // Drifting village development settings: Shipyard LV1
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )
    GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Weapons can now be reforged.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetDiaryShopFlag(SHOP_ID_WEAPON_A,0) // "Forge (enhanced)"
    SetDiaryShopFlag(SHOP_ID_WEAPON,1) // "Katlin's Weapon Workshop (Enhancement/Evolution)"
    SetDiaryShopFlag(SHOP_ID_ARMOR,1) // "Katlin's Weapon Workshop (Purchase Armor)"


            
            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 41))
            SetChrWork(RICOTTA,CWK_SUP_STR,(RICOTTA.CHRWORK[CWK_SUP_STR] + 33))
            SetChrWork(HUMMEL,CWK_SUP_STR,(HUMMEL.CHRWORK[CWK_SUP_STR] - 18))
            GetItem(ICON3D_WP_HUMMEL_000, 1)
            GetItem(ICON3D_AM_021, 1)
            EquipWeapon(HUMMEL,ICON3D_WP_HUMMEL_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY081])
        {
            SetFlag(GF_SHOP_RANK_3_02,1)
            SetFlag(GF_02MP4309_KILL_SPIDER,1)
            SetFlag(GF_QS201_SHOP_ADD,1)
            SetFlag(GF_TBOX_DUMMY081,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 2.",0,0)
            WaitPrompt()
            WaitCloseWindow()  

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 34))
            SetChrWork(RICOTTA,CWK_SUP_STR,(RICOTTA.CHRWORK[CWK_SUP_STR] - 55))
            GetItem(ICON3D_WP_RICOTTA_000, 1)
            GetItem(ICON3D_AM_022, 1)
            EquipWeapon(RICOTTA,ICON3D_WP_RICOTTA_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY082])
        {
            SetFlag(GF_SHOP_RANK_3_05,1)
            SetFlag(GF_SHOP_RANK_4_01,1)
            //The flag here is the trigger for speaking with Kathleen about the orichalcum and having new weapons made.
            //That event then trips the flag for being able to kill enemies flagged as Saurians.
            SetFlag(GF_03MP7401_GET_MATERIAL, 1)
            //Hummel has no shop upgarde to get him this weapon tier and therefore cannot upgrade to it. So we'll give it to him when we hit this level so Hummel isn't stuck with a tier 2 weapon all game.
            GetItem(ICON3D_WP_HUMMEL_002,1)
            EquipWeapon(HUMMEL, ICON3D_WP_HUMMEL_002)
            SetFlag(GF_TBOX_DUMMY082,1)
            GetItem(ICON3D_HIIROKANE,1)
            GetItemMessageExPlus(ICON3D_HIIROKANE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Turn this into Kathleen.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 3.",0,0)
            WaitPrompt()
            WaitCloseWindow()

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 47))
        }
        else if (!FLAG[GF_TBOX_DUMMY083])
        {
            SetFlag(GF_SHOP_RANK_5_02,1)
            SetFlag(GF_TBOX_DUMMY083,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 4.",0,0)
            WaitPrompt()
            WaitCloseWindow()

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] - 130))
            GetItem(ICON3D_AM_023, 1)
            GetItem(ICON3D_WP_DANA_000, 1)
            EquipWeapon(DANA,ICON3D_WP_DANA_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY084])
        {
            SetFlag(GF_SHOP_RANK_5_04,1)
            SetFlag(GF_QS222_SHOP_ADD,1)
            SetFlag(GF_QS310_GET_ITEM,1)
            SetFlag(GF_QS310_GET_ITEM2,1)
            SetFlag(GF_QS310_GET_ITEM3,1)
            SetFlag(GF_TBOX_DUMMY084,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 5.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        else if (!FLAG[GF_TBOX_DUMMY085])
        {
            SetFlag(GF_SHOP_RANK_5_07,1)
            SetFlag(GF_TBOX_DUMMY085,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 6.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        else if (!FLAG[GF_TBOX_DUMMY086])
        {
            SetFlag(GF_SHOP_RANK_6_01,1)
            SetFlag(GF_05MP6349_KILL_BOSS,1)
            SetFlag(GF_QS600_SHOP_ADD,1)
            SetFlag(GF_TBOX_DUMMY086,1)
            SetFlag(GF_NPC_6_03_AFTER_INTERCEPT12,1)
            SetFlag(GF_06MP1201_GOTO_GEND,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank MAX.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        ResetStopFlag(STOPFLAG_TALK)
    }
    
function "0559"
{
    GetItem(ICON3D_AC_727,1)
    GetItemMessageExPlus(ICON3D_AC_727,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    if(!FLAG[GF_SUBEV_PAST_06_GIMMICK_A]) //hill of eternity
    {
        SetFlag(GF_SUBEV_PAST_06_GIMMICK_A,1) // Watched Past Edition VI: [Past Gimmick : Discovered Poisonous Swamp]
        SetFlag(GF_SUBEV_PAST_06_GIMMICK_B,1)// Past Chapter VI: Moved the meteor fragment with [Past Gimmick : Purification of Poisonous Swamp]
        SetFlag(GF_SUBEV_PAST_06_GIMMICK_C,1) // Watched past edition VI: [Past gimmick : Reflection in modern edition]
        SetFlag(GF_OPEN_FLOOR_04, 1) //I saw a prediction that the 4th floor would open.
        SetFlag(GF_OPEN_FLOOR_05, 1) //I saw a prediction that the 5th floor would open.
        GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Hill of Eternity can now be accessed.",0,0)
        WaitPrompt()
        WaitCloseWindow()
    }  									
    
}

function "0021"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CDana#4C Joined the Party.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetFlag(SF_DANA_JOINED, 1)
    SetFlag(SF_DANA_JOINOK, 1)

    SetDiaryFlag( DF_JOIN_DANA, 1 )
    SetDiaryCharaFlag( DRCHA_DANA2, DRCHA_FLAG_OPEN, 1 ) 
    SetDiaryCharaFlag( DRCHA_DANA2, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_DANA2, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_DANA2, DRCHA_FLAG_INFO3, 1 )
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )

    if( FLAG[GF_TBOX_DUMMY108] && !FLAG[GF_TBOX_DUMMY109])
    {
        GetItem(ICON3D_WP_DANA_005,1)
	    EquipWeapon(DANA,ICON3D_WP_DANA_005)
    }
    
    JoinParty(PARTY_DANA)
    
    if(FLAG[GF_TBOX_DUMMY111]) //if skill shuffle is on
    {
        CallFunc("rng:0530")
        CallFunc("rng:0531")
    }

    GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Essence doors can be unlocked.",0,0)
    WaitPrompt()
    WaitCloseWindow()
	SetLevel(DANA,3) 
	if(LEADER.CHRWORK[CWK_LV] ==1){SetLevel(DANA,1)} 
	else if(LEADER.CHRWORK[CWK_LV] ==2){SetLevel(DANA,2)} 
	else if(LEADER.CHRWORK[CWK_LV] ==3){SetLevel(DANA,3)} 
	else if(LEADER.CHRWORK[CWK_LV] ==4){SetLevel(DANA,4)} 
	else if(LEADER.CHRWORK[CWK_LV] ==5){SetLevel(DANA,5)} 
	else if(LEADER.CHRWORK[CWK_LV] ==6){SetLevel(DANA,6)} 
	else if(LEADER.CHRWORK[CWK_LV] ==7){SetLevel(DANA,7)} 
	else if(LEADER.CHRWORK[CWK_LV] ==8){SetLevel(DANA,8)} 
	else if(LEADER.CHRWORK[CWK_LV] ==9){SetLevel(DANA,9)} 
	else if(LEADER.CHRWORK[CWK_LV] ==10){SetLevel(DANA,10)} 
	else if(LEADER.CHRWORK[CWK_LV] ==11){SetLevel(DANA,11)} 
	else if(LEADER.CHRWORK[CWK_LV] ==12){SetLevel(DANA,12)} 
	else if(LEADER.CHRWORK[CWK_LV] ==13){SetLevel(DANA,13)} 
	else if(LEADER.CHRWORK[CWK_LV] ==14){SetLevel(DANA,14)} 
	else if(LEADER.CHRWORK[CWK_LV] ==15){SetLevel(DANA,15)} 
	else if(LEADER.CHRWORK[CWK_LV] ==16){SetLevel(DANA,16)} 
	else if(LEADER.CHRWORK[CWK_LV] ==17){SetLevel(DANA,17)} 
	else if(LEADER.CHRWORK[CWK_LV] ==18){SetLevel(DANA,18)} 
	else if(LEADER.CHRWORK[CWK_LV] ==19){SetLevel(DANA,19)} 
	else if(LEADER.CHRWORK[CWK_LV] ==20){SetLevel(DANA,20)} 
	else if(LEADER.CHRWORK[CWK_LV] ==21){SetLevel(DANA,21)} 
	else if(LEADER.CHRWORK[CWK_LV] ==22){SetLevel(DANA,22)} 
	else if(LEADER.CHRWORK[CWK_LV] ==23){SetLevel(DANA,23)} 
	else if(LEADER.CHRWORK[CWK_LV] ==24){SetLevel(DANA,24)} 
	else if(LEADER.CHRWORK[CWK_LV] ==25){SetLevel(DANA,25)} 
	else if(LEADER.CHRWORK[CWK_LV] ==26){SetLevel(DANA,26)} 
	else if(LEADER.CHRWORK[CWK_LV] ==27){SetLevel(DANA,27)} 
	else if(LEADER.CHRWORK[CWK_LV] ==28){SetLevel(DANA,28)} 
	else if(LEADER.CHRWORK[CWK_LV] ==29){SetLevel(DANA,29)} 
	else if(LEADER.CHRWORK[CWK_LV] ==30){SetLevel(DANA,30)} 
	else if(LEADER.CHRWORK[CWK_LV] ==31){SetLevel(DANA,31)} 
	else if(LEADER.CHRWORK[CWK_LV] ==32){SetLevel(DANA,32)} 
	else if(LEADER.CHRWORK[CWK_LV] ==33){SetLevel(DANA,33)} 
	else if(LEADER.CHRWORK[CWK_LV] ==34){SetLevel(DANA,34)} 
	else if(LEADER.CHRWORK[CWK_LV] ==35){SetLevel(DANA,35)} 
	else if(LEADER.CHRWORK[CWK_LV] ==36){SetLevel(DANA,36)} 
	else if(LEADER.CHRWORK[CWK_LV] ==37){SetLevel(DANA,37)} 
	else if(LEADER.CHRWORK[CWK_LV] ==38){SetLevel(DANA,38)} 
	else if(LEADER.CHRWORK[CWK_LV] ==39){SetLevel(DANA,39)} 
	else if(LEADER.CHRWORK[CWK_LV] ==40){SetLevel(DANA,40)} 
	else if(LEADER.CHRWORK[CWK_LV] ==41){SetLevel(DANA,41)} 
	else if(LEADER.CHRWORK[CWK_LV] ==42){SetLevel(DANA,42)} 
	else if(LEADER.CHRWORK[CWK_LV] ==43){SetLevel(DANA,43)} 
	else if(LEADER.CHRWORK[CWK_LV] ==44){SetLevel(DANA,44)} 
	else if(LEADER.CHRWORK[CWK_LV] ==45){SetLevel(DANA,45)} 
	else if(LEADER.CHRWORK[CWK_LV] ==46){SetLevel(DANA,46)} 
	else if(LEADER.CHRWORK[CWK_LV] ==47){SetLevel(DANA,47)} 
	else if(LEADER.CHRWORK[CWK_LV] ==48){SetLevel(DANA,48)} 
	else if(LEADER.CHRWORK[CWK_LV] ==49){SetLevel(DANA,49)} 
	else if(LEADER.CHRWORK[CWK_LV] ==50){SetLevel(DANA,50)} 
	else if(LEADER.CHRWORK[CWK_LV] ==51){SetLevel(DANA,51)} 
	else if(LEADER.CHRWORK[CWK_LV] ==52){SetLevel(DANA,52)} 
	else if(LEADER.CHRWORK[CWK_LV] ==53){SetLevel(DANA,53)} 
	else if(LEADER.CHRWORK[CWK_LV] ==54){SetLevel(DANA,54)} 
	else if(LEADER.CHRWORK[CWK_LV] ==55){SetLevel(DANA,55)} 
	else if(LEADER.CHRWORK[CWK_LV] ==56){SetLevel(DANA,56)} 
	else if(LEADER.CHRWORK[CWK_LV] ==57){SetLevel(DANA,57)} 
	else if(LEADER.CHRWORK[CWK_LV] ==58){SetLevel(DANA,58)} 
	else if(LEADER.CHRWORK[CWK_LV] ==59){SetLevel(DANA,59)} 
	else if(LEADER.CHRWORK[CWK_LV] ==60){SetLevel(DANA,60)} 
	else if(LEADER.CHRWORK[CWK_LV] ==61){SetLevel(DANA,61)} 
	else if(LEADER.CHRWORK[CWK_LV] ==62){SetLevel(DANA,62)} 
	else if(LEADER.CHRWORK[CWK_LV] ==63){SetLevel(DANA,63)} 
	else if(LEADER.CHRWORK[CWK_LV] ==64){SetLevel(DANA,64)} 
	else if(LEADER.CHRWORK[CWK_LV] ==65){SetLevel(DANA,65)} 
	else if(LEADER.CHRWORK[CWK_LV] ==66){SetLevel(DANA,66)} 
	else if(LEADER.CHRWORK[CWK_LV] ==67){SetLevel(DANA,67)} 
	else if(LEADER.CHRWORK[CWK_LV] ==68){SetLevel(DANA,68)} 
	else if(LEADER.CHRWORK[CWK_LV] ==69){SetLevel(DANA,69)} 
	else if(LEADER.CHRWORK[CWK_LV] ==70){SetLevel(DANA,70)} 
	else if(LEADER.CHRWORK[CWK_LV] ==71){SetLevel(DANA,71)} 
	else if(LEADER.CHRWORK[CWK_LV] ==72){SetLevel(DANA,72)} 
	else if(LEADER.CHRWORK[CWK_LV] ==73){SetLevel(DANA,73)} 
	else if(LEADER.CHRWORK[CWK_LV] ==74){SetLevel(DANA,74)} 
	else if(LEADER.CHRWORK[CWK_LV] ==75){SetLevel(DANA,75)} 
	else if(LEADER.CHRWORK[CWK_LV] ==76){SetLevel(DANA,76)} 
	else if(LEADER.CHRWORK[CWK_LV] ==77){SetLevel(DANA,77)} 
	else if(LEADER.CHRWORK[CWK_LV] ==78){SetLevel(DANA,78)} 
	else if(LEADER.CHRWORK[CWK_LV] ==79){SetLevel(DANA,79)} 
	else if(LEADER.CHRWORK[CWK_LV] ==80){SetLevel(DANA,80)} 
	else if(LEADER.CHRWORK[CWK_LV] ==81){SetLevel(DANA,81)} 
	else if(LEADER.CHRWORK[CWK_LV] ==82){SetLevel(DANA,82)} 
	else if(LEADER.CHRWORK[CWK_LV] ==83){SetLevel(DANA,83)} 
	else if(LEADER.CHRWORK[CWK_LV] ==84){SetLevel(DANA,84)} 
	else if(LEADER.CHRWORK[CWK_LV] ==85){SetLevel(DANA,85)} 
	else if(LEADER.CHRWORK[CWK_LV] ==86){SetLevel(DANA,86)} 
	else if(LEADER.CHRWORK[CWK_LV] ==87){SetLevel(DANA,87)} 
	else if(LEADER.CHRWORK[CWK_LV] ==88){SetLevel(DANA,88)} 
	else if(LEADER.CHRWORK[CWK_LV] ==89){SetLevel(DANA,89)} 
	else if(LEADER.CHRWORK[CWK_LV] ==90){SetLevel(DANA,90)} 
	else if(LEADER.CHRWORK[CWK_LV] ==91){SetLevel(DANA,91)} 
	else if(LEADER.CHRWORK[CWK_LV] ==92){SetLevel(DANA,92)} 
	else if(LEADER.CHRWORK[CWK_LV] ==93){SetLevel(DANA,93)} 
	else if(LEADER.CHRWORK[CWK_LV] ==94){SetLevel(DANA,94)} 
	else if(LEADER.CHRWORK[CWK_LV] ==95){SetLevel(DANA,95)} 
	else if(LEADER.CHRWORK[CWK_LV] ==96){SetLevel(DANA,96)} 
	else if(LEADER.CHRWORK[CWK_LV] ==97){SetLevel(DANA,97)} 
	else if(LEADER.CHRWORK[CWK_LV] ==98){SetLevel(DANA,98)} 
	else{SetLevel(DANA,99)} 

    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0025"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R4_GOLD,2)
    GetItemMessageExPlus(ICON3D_MT_R4_GOLD,2,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0250"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_LIGHTSTYLE2,1)
    GetItemMessageExPlus(ICON3D_LIGHTSTYLE2,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    if(!FLAG[GF_05MP6201M_GOTO_BAHA]) //baja tower access
    {
        SetFlag(GF_05MP6201M_GOTO_BAHA,1)
        SetFlag(GF_SUBEV_PAST_03_GIMMICK_L,1) // Watched Past Edition III: [Past Gimmick : Helping Animals]
        SetFlag(GF_SUBEV_PAST_03_GIMMICK_A, 2) // Past Edition III: Achieved [Past Gimmick: Helping animals] (substitute 2)
        SetFlag(GF_SUBEV_PAST_03_GIMMICK_B, 1) // Viewed past edition III: [Past gimmick : Reflection in modern edition]
        SetFlag(GF_GET_GRATICA,	1)
        GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"The Leaning Tower can now be scaled.",0,0)
        WaitPrompt()
        WaitCloseWindow()
    }
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0493"
{
    GetItem(ICON3D_MAPOPENUP,1)
    GetItemMessageExPlus(ICON3D_MAPOPENUP,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0471"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R2_PEARL,1)
    GetItemMessageExPlus(ICON3D_MT_R2_PEARL,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0440"
{
    GetItem(ICON3D_AC_542,1)
    GetItemMessageExPlus(ICON3D_AC_542,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0142"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R2_PEARL,3)
    GetItemMessageExPlus(ICON3D_MT_R2_PEARL,3,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0100"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CKiergaard#4C Joined the Village.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetFlag( GF_02MP1307_JOIN_KIERGAARD, 1 ) 
    JoinNPC( NPC_KIERGAARD, JOIN_NPC_JOIN ) //Rescued Killgor.
    SetFlag( GF_CAMP_BED_LV, 2 )
    SetDiaryFlag( DF_JOIN_KIERGAARD, 1 ) //Footprint memo: Rescued Killgor.
    SetDiaryCharaFlag( DRCHA_KIERGAARD, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_KIERGAARD, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_KIERGAARD, DRCHA_FLAG_INFO3, 1 )
    WaitPrompt()
    WaitCloseWindow()
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )	

    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0087"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MEMO_T_004,1)
    GetItemMessageExPlus(ICON3D_MEMO_T_004,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    if( !FLAG[GF_TBOX_DUMMY100])
    {
        Intercept(INTERCEPT_STAGE01,1)
        Intercept(INTERCEPT_STAGE02,1)
        Intercept(INTERCEPT_STAGE03,1)
        Intercept(INTERCEPT_STAGE04,1)
        Intercept(INTERCEPT_STAGE05,1)
        Intercept(INTERCEPT_STAGE06,1)
        Intercept(INTERCEPT_STAGE07,1)
        GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Intercept list updated.",0,0)
        WaitPrompt()
        WaitCloseWindow()
        SetFlag(GF_TBOX_DUMMY100,1)
    }
    else if( !FLAG[GF_TBOX_DUMMY101])
    {
        SetFlag(GF_TBOX_DUMMY094,1)
        Intercept(INTERCEPT_STAGE31,1)
        SetFlag(GF_QS303_QUESTCLEAR,1)
        Intercept(INTERCEPT_STAGE32,1)
        Intercept(INTERCEPT_STAGE33,1)
        Intercept(INTERCEPT_STAGE34,1)
        Intercept(INTERCEPT_STAGE35,1)
        Intercept(INTERCEPT_STAGE36,1)
        Intercept(INTERCEPT_STAGE37,1)
        GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Intercept list updated.",0,0)
        WaitPrompt()
        WaitCloseWindow()
        SetFlag(GF_TBOX_DUMMY101,1)
    }
    else if( !FLAG[GF_TBOX_DUMMY102])
    {
        Intercept(INTERCEPT_STAGE08,1)
        Intercept(INTERCEPT_STAGE09,1)
        Intercept(INTERCEPT_STAGE11,1)
        Intercept(INTERCEPT_STAGE12,1)
        Intercept(INTERCEPT_STAGE38,1)
        Intercept(INTERCEPT_STAGE39,1)
        GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Intercept list updated.",0,0)
        WaitPrompt()
        WaitCloseWindow()
        SetFlag(GF_TBOX_DUMMY102,1)
    }
    else if ( !FLAG[GF_TBOX_DUMMY103])
    {
	    Intercept(INTERCEPT_STAGE21,1)
        GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Intercept list complete.",0,0)
        WaitPrompt()
        WaitCloseWindow()
        SetFlag(GF_TBOX_DUMMY103,1)
    }

    ResetStopFlag(STOPFLAG_TALK)
}

function "0098"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_TBOX_KEY,1)
    GetItemMessageExPlus(ICON3D_TBOX_KEY,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    if(!FLAG[GF_05MP6105_GOTO_VALLAY]) //lodinia marsh back half access
    {
        SetFlag(GF_05MP6105_GOTO_VALLAY,1)
        SetFlag(GF_OPEN_FLOOR_03,1) //I saw a prediction that the third floor would open.
        SetFlag(GF_GET_LUMINOUS,1)
        GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"The way through Lodinia Marsh is cleared.",0,0)
        WaitPrompt()
        WaitCloseWindow()
    }
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0212"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CSister Nia#4C Joined the Village.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetDiaryFlag( DF_JOIN_NIA, 1 ) //Footprint memo: Rescued Sister Nia.
    SetDiaryCharaFlag( DRCHA_NIA, DRCHA_FLAG_OPEN, 1 ) //Person memo: Register when joining (Sister Nia)
    SetDiaryCharaFlag( DRCHA_NIA, DRCHA_FLAG_INFO1, 1 ) //Person memo: Additional information release 1 (Sister Nia)
    SetDiaryCharaFlag( DRCHA_NIA, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_NIA, DRCHA_FLAG_INFO3, 1 )
    JoinNPC( NPC_NIA, JOIN_NPC_JOIN ) // Joined with Sister Nia
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )	

    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0413"
{
    GetItem(ICON3D_CLIMBGLOVE,1)
    GetItemMessageExPlus(ICON3D_CLIMBGLOVE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0430"
{
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CDina#4C Joined the Village.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetFlag( GF_02MP1119_JOIN_DINA , 1 ) // Meet Dina
    SetFlag(GF_NPC_2_11_JOIN_DINA,1)
    SetDiaryFlag( DF_JOIN_DINA, 1 )  //Footprints memo: Dina was rescued.
    SetFlag(GF_TOOLSHOP_LV, 2) //Trade shop level setting
    JoinNPC( NPC_DINA, JOIN_NPC_JOIN ) //Rescued Dina
    SetDiaryShopFlag(SHOP_ID_TRADE_A,0) // "Warehouse"
    SetDiaryShopFlag(SHOP_ID_TRADE,1) // "Dina's Trading Post"
    SetDiaryShopFlag(SHOP_ID_TRADE_SELL,1) // "Trade post/pickup"
    SetDiaryCharaFlag( DRCHA_DINA, DRCHA_FLAG_INFO1, 1 )
    SetDiaryCharaFlag( DRCHA_DINA, DRCHA_FLAG_INFO2, 1 )
    SetDiaryCharaFlag( DRCHA_DINA, DRCHA_FLAG_INFO3, 1 )
    GetItem(ICON3D_US_PESTCIDE,10)
    SetStopFlag(STOPFLAG_TALK)
    GetItemMessageExPlus(ICON3D_US_PESTCIDE,10,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()	
    GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Trades can now be made.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    ResetStopFlag(STOPFLAG_TALK)
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )	

    
}

    function "0417"
    {
        
        if (!FLAG[GF_02MP1201_JOIN_KATRIN])
        {
            GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CKathleen#4C  Joined the Village.",0,0)
            WaitPrompt()
            WaitCloseWindow()        
            
    SetDiaryFlag( DF_JOIN_KATRIN, 1 ) //Footprint memo: Rescued Katrin.
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_OPEN, 1 ) //Person memo: Register when joining (Katrin)
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO3, 1 )
    JoinNPC( NPC_KATRIN, JOIN_NPC_JOIN ) // Katrin has joined
    SetFlag( GF_02MP1201_JOIN_KATRIN , 1 )
    
    SetFlag(GF_SMITHY_LV,2) //Blacksmith level setting
    //SetFlag( GF_CAMP_SHIPYARD_LV, 1 ) // Drifting village development settings: Shipyard LV1
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )
    GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Weapons can now be reforged.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetDiaryShopFlag(SHOP_ID_WEAPON_A,0) // "Forge (enhanced)"
    SetDiaryShopFlag(SHOP_ID_WEAPON,1) // "Katlin's Weapon Workshop (Enhancement/Evolution)"
    SetDiaryShopFlag(SHOP_ID_ARMOR,1) // "Katlin's Weapon Workshop (Purchase Armor)"


            
            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 41))
            SetChrWork(RICOTTA,CWK_SUP_STR,(RICOTTA.CHRWORK[CWK_SUP_STR] + 33))
            SetChrWork(HUMMEL,CWK_SUP_STR,(HUMMEL.CHRWORK[CWK_SUP_STR] - 18))
            GetItem(ICON3D_WP_HUMMEL_000, 1)
            GetItem(ICON3D_AM_021, 1)
            EquipWeapon(HUMMEL,ICON3D_WP_HUMMEL_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY081])
        {
            SetFlag(GF_SHOP_RANK_3_02,1)
            SetFlag(GF_02MP4309_KILL_SPIDER,1)
            SetFlag(GF_QS201_SHOP_ADD,1)
            SetFlag(GF_TBOX_DUMMY081,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 2.",0,0)
            WaitPrompt()
            WaitCloseWindow()  

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 34))
            SetChrWork(RICOTTA,CWK_SUP_STR,(RICOTTA.CHRWORK[CWK_SUP_STR] - 55))
            GetItem(ICON3D_WP_RICOTTA_000, 1)
            GetItem(ICON3D_AM_022, 1)
            EquipWeapon(RICOTTA,ICON3D_WP_RICOTTA_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY082])
        {
            SetFlag(GF_SHOP_RANK_3_05,1)
            SetFlag(GF_SHOP_RANK_4_01,1)
            //The flag here is the trigger for speaking with Kathleen about the orichalcum and having new weapons made.
            //That event then trips the flag for being able to kill enemies flagged as Saurians.
            SetFlag(GF_03MP7401_GET_MATERIAL, 1)
            //Hummel has no shop upgarde to get him this weapon tier and therefore cannot upgrade to it. So we'll give it to him when we hit this level so Hummel isn't stuck with a tier 2 weapon all game.
            GetItem(ICON3D_WP_HUMMEL_002,1)
            EquipWeapon(HUMMEL, ICON3D_WP_HUMMEL_002)
            SetFlag(GF_TBOX_DUMMY082,1)
            GetItem(ICON3D_HIIROKANE,1)
            GetItemMessageExPlus(ICON3D_HIIROKANE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Turn this into Kathleen.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 3.",0,0)
            WaitPrompt()
            WaitCloseWindow()

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 47))
        }
        else if (!FLAG[GF_TBOX_DUMMY083])
        {
            SetFlag(GF_SHOP_RANK_5_02,1)
            SetFlag(GF_TBOX_DUMMY083,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 4.",0,0)
            WaitPrompt()
            WaitCloseWindow()

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] - 130))
            GetItem(ICON3D_AM_023, 1)
            GetItem(ICON3D_WP_DANA_000, 1)
            EquipWeapon(DANA,ICON3D_WP_DANA_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY084])
        {
            SetFlag(GF_SHOP_RANK_5_04,1)
            SetFlag(GF_QS222_SHOP_ADD,1)
            SetFlag(GF_QS310_GET_ITEM,1)
            SetFlag(GF_QS310_GET_ITEM2,1)
            SetFlag(GF_QS310_GET_ITEM3,1)
            SetFlag(GF_TBOX_DUMMY084,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 5.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        else if (!FLAG[GF_TBOX_DUMMY085])
        {
            SetFlag(GF_SHOP_RANK_5_07,1)
            SetFlag(GF_TBOX_DUMMY085,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 6.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        else if (!FLAG[GF_TBOX_DUMMY086])
        {
            SetFlag(GF_SHOP_RANK_6_01,1)
            SetFlag(GF_05MP6349_KILL_BOSS,1)
            SetFlag(GF_QS600_SHOP_ADD,1)
            SetFlag(GF_TBOX_DUMMY086,1)
            SetFlag(GF_NPC_6_03_AFTER_INTERCEPT12,1)
            SetFlag(GF_06MP1201_GOTO_GEND,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank MAX.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        
    }
    
function "0234"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R2_PEARL,1)
    GetItemMessageExPlus(ICON3D_MT_R2_PEARL,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0173"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CGriselda#4C Joined the Village.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetDiaryFlag( DF_JOIN_GRISELDA, 1 ) //Footprint memo: Griselda has joined the Drifting Village.
    SetDiaryCharaFlag( DRCHA_GRISELDA, DRCHA_FLAG_OPEN, 1 ) 
    SetDiaryCharaFlag( DRCHA_GRISELDA, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_GRISELDA, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_GRISELDA, DRCHA_FLAG_INFO3, 1 )
    JoinNPC( NPC_GRISELDA, JOIN_NPC_JOIN ) // Joined up with Griselda
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )	

    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0443"
{
    GetItem(ICON3D_MT_R4_GOLD,3)
    GetItemMessageExPlus(ICON3D_MT_R4_GOLD,3,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0159"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MEMO_T_003,1)
    GetItemMessageExPlus(ICON3D_MEMO_T_003,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    if( !FLAG[GF_TBOX_DUMMY100])
    {
        Intercept(INTERCEPT_STAGE01,1)
        Intercept(INTERCEPT_STAGE02,1)
        Intercept(INTERCEPT_STAGE03,1)
        Intercept(INTERCEPT_STAGE04,1)
        Intercept(INTERCEPT_STAGE05,1)
        Intercept(INTERCEPT_STAGE06,1)
        Intercept(INTERCEPT_STAGE07,1)
        GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Intercept list updated.",0,0)
        WaitPrompt()
        WaitCloseWindow()
        SetFlag(GF_TBOX_DUMMY100,1)
    }
    else if( !FLAG[GF_TBOX_DUMMY101])
    {
        SetFlag(GF_TBOX_DUMMY094,1)
        Intercept(INTERCEPT_STAGE31,1)
        SetFlag(GF_QS303_QUESTCLEAR,1)
        Intercept(INTERCEPT_STAGE32,1)
        Intercept(INTERCEPT_STAGE33,1)
        Intercept(INTERCEPT_STAGE34,1)
        Intercept(INTERCEPT_STAGE35,1)
        Intercept(INTERCEPT_STAGE36,1)
        Intercept(INTERCEPT_STAGE37,1)
        GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Intercept list updated.",0,0)
        WaitPrompt()
        WaitCloseWindow()
        SetFlag(GF_TBOX_DUMMY101,1)
    }
    else if( !FLAG[GF_TBOX_DUMMY102])
    {
        Intercept(INTERCEPT_STAGE08,1)
        Intercept(INTERCEPT_STAGE09,1)
        Intercept(INTERCEPT_STAGE11,1)
        Intercept(INTERCEPT_STAGE12,1)
        Intercept(INTERCEPT_STAGE38,1)
        Intercept(INTERCEPT_STAGE39,1)
        GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Intercept list updated.",0,0)
        WaitPrompt()
        WaitCloseWindow()
        SetFlag(GF_TBOX_DUMMY102,1)
    }
    else if ( !FLAG[GF_TBOX_DUMMY103])
    {
	    Intercept(INTERCEPT_STAGE21,1)
        GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Intercept list complete.",0,0)
        WaitPrompt()
        WaitCloseWindow()
        SetFlag(GF_TBOX_DUMMY103,1)
    }

    ResetStopFlag(STOPFLAG_TALK)
}

function "0055"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_TORCH,1)
    GetItemMessageExPlus(ICON3D_TORCH,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    // Flag setting/item collection
    SetFlag(GF_OPEN_PANGAIA_T2,1) //Pangaia Great Plains night map released
    //SetFlag( GF_QUEST_613, QUEST_START ) // [QS613]
    //SetDiaryFlag( DF_QS613_START, 1 ) // [QS613]
    // Flag setting/item collection
    SetFlag(GF_OPEN_GENSD_T2,1) //Gendarme night map released
    //SetFlag( GF_QUEST_505, QUEST_START ) // [QS505] Saw the start event for gathering moonlight grass (Drifting Village/Night D)
    //SetDiaryFlag( DF_QS505_START, 1 ) // [QS505]I heard from Licht.
    //Flag setting/item collection
    SetFlag(GF_OPEN_CORAL_T2,1) //Coral Forest night map released
    //SetFlag( GF_QUEST_232, QUEST_START ) // [QS232] Watched the Dark Night Mystery (Drifting Village/Night D) starting event
    //SetDiaryFlag( DF_QS232_START, 1 ) // [QS232]I heard from Dogi.
    GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Night Explorations can now be undertaken.",0,0)
    WaitPrompt()
    WaitCloseWindow()

    ResetStopFlag(STOPFLAG_TALK)
}

function "0472"
{
    GetItem(ICON3D_MEMO_T_001,1)
    GetItemMessageExPlus(ICON3D_MEMO_T_001,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    if( !FLAG[GF_TBOX_DUMMY100])
    {
        Intercept(INTERCEPT_STAGE01,1)
        Intercept(INTERCEPT_STAGE02,1)
        Intercept(INTERCEPT_STAGE03,1)
        Intercept(INTERCEPT_STAGE04,1)
        Intercept(INTERCEPT_STAGE05,1)
        Intercept(INTERCEPT_STAGE06,1)
        Intercept(INTERCEPT_STAGE07,1)
        GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Intercept list updated.",0,0)
        WaitPrompt()
        WaitCloseWindow()
        SetFlag(GF_TBOX_DUMMY100,1)
    }
    else if( !FLAG[GF_TBOX_DUMMY101])
    {
        SetFlag(GF_TBOX_DUMMY094,1)
        Intercept(INTERCEPT_STAGE31,1)
        SetFlag(GF_QS303_QUESTCLEAR,1)
        Intercept(INTERCEPT_STAGE32,1)
        Intercept(INTERCEPT_STAGE33,1)
        Intercept(INTERCEPT_STAGE34,1)
        Intercept(INTERCEPT_STAGE35,1)
        Intercept(INTERCEPT_STAGE36,1)
        Intercept(INTERCEPT_STAGE37,1)
        GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Intercept list updated.",0,0)
        WaitPrompt()
        WaitCloseWindow()
        SetFlag(GF_TBOX_DUMMY101,1)
    }
    else if( !FLAG[GF_TBOX_DUMMY102])
    {
        Intercept(INTERCEPT_STAGE08,1)
        Intercept(INTERCEPT_STAGE09,1)
        Intercept(INTERCEPT_STAGE11,1)
        Intercept(INTERCEPT_STAGE12,1)
        Intercept(INTERCEPT_STAGE38,1)
        Intercept(INTERCEPT_STAGE39,1)
        GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Intercept list updated.",0,0)
        WaitPrompt()
        WaitCloseWindow()
        SetFlag(GF_TBOX_DUMMY102,1)
    }
    else if ( !FLAG[GF_TBOX_DUMMY103])
    {
	    Intercept(INTERCEPT_STAGE21,1)
        GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Intercept list complete.",0,0)
        WaitPrompt()
        WaitCloseWindow()
        SetFlag(GF_TBOX_DUMMY103,1)
    }

}

function "0407"
{
    GetItem(ICON3D_AC_548,1)
    GetItemMessageExPlus(ICON3D_AC_548,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0200"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R4_GOLD,2)
    GetItemMessageExPlus(ICON3D_MT_R4_GOLD,2,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0028"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CAdol#4C Joined the Party.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetFlag(SF_ADOL_JOINED, 1)
    SetFlag(SF_ADOL_JOINOK, 1)
    
    GetItem(ICON3D_WP_ADOL_000,1)
    EquipWeapon(ADOL,ICON3D_WP_ADOL_000)
    
    if( FLAG[GF_03MP1201_ALARM_INTERCEPT] && !FLAG[GF_TBOX_DUMMY071])
    {
        GetItem(ICON3D_WP_ADOL_003, 1)		
	    EquipWeapon(ADOL, ICON3D_WP_ADOL_003)
    }
    if( FLAG[GF_TBOX_DUMMY071] && !FLAG[GF_TBOX_DUMMY109])
    {
        SetFlag(GF_ADOLWEAPON_BACKUP,(ADOL.CHRWORK[CWK_WEAPON]))
        GetItem(ICON3D_WP_ADOL_008, 1)		
	    EquipWeapon(ADOL, ICON3D_WP_ADOL_008)
    }
    
    JoinParty(PARTY_ADOL)

    if(FLAG[GF_TBOX_DUMMY111]) //if skill shuffle is on
    {
        CallFunc("rng:0520")
        CallFunc("rng:0521")
    }
	SetLevel(ADOL,3) 
	if(LEADER.CHRWORK[CWK_LV] ==1){SetLevel(ADOL,1)} 
	else if(LEADER.CHRWORK[CWK_LV] ==2){SetLevel(ADOL,2)} 
	else if(LEADER.CHRWORK[CWK_LV] ==3){SetLevel(ADOL,3)} 
	else if(LEADER.CHRWORK[CWK_LV] ==4){SetLevel(ADOL,4)} 
	else if(LEADER.CHRWORK[CWK_LV] ==5){SetLevel(ADOL,5)} 
	else if(LEADER.CHRWORK[CWK_LV] ==6){SetLevel(ADOL,6)} 
	else if(LEADER.CHRWORK[CWK_LV] ==7){SetLevel(ADOL,7)} 
	else if(LEADER.CHRWORK[CWK_LV] ==8){SetLevel(ADOL,8)} 
	else if(LEADER.CHRWORK[CWK_LV] ==9){SetLevel(ADOL,9)} 
	else if(LEADER.CHRWORK[CWK_LV] ==10){SetLevel(ADOL,10)} 
	else if(LEADER.CHRWORK[CWK_LV] ==11){SetLevel(ADOL,11)} 
	else if(LEADER.CHRWORK[CWK_LV] ==12){SetLevel(ADOL,12)} 
	else if(LEADER.CHRWORK[CWK_LV] ==13){SetLevel(ADOL,13)} 
	else if(LEADER.CHRWORK[CWK_LV] ==14){SetLevel(ADOL,14)} 
	else if(LEADER.CHRWORK[CWK_LV] ==15){SetLevel(ADOL,15)} 
	else if(LEADER.CHRWORK[CWK_LV] ==16){SetLevel(ADOL,16)} 
	else if(LEADER.CHRWORK[CWK_LV] ==17){SetLevel(ADOL,17)} 
	else if(LEADER.CHRWORK[CWK_LV] ==18){SetLevel(ADOL,18)} 
	else if(LEADER.CHRWORK[CWK_LV] ==19){SetLevel(ADOL,19)} 
	else if(LEADER.CHRWORK[CWK_LV] ==20){SetLevel(ADOL,20)} 
	else if(LEADER.CHRWORK[CWK_LV] ==21){SetLevel(ADOL,21)} 
	else if(LEADER.CHRWORK[CWK_LV] ==22){SetLevel(ADOL,22)} 
	else if(LEADER.CHRWORK[CWK_LV] ==23){SetLevel(ADOL,23)} 
	else if(LEADER.CHRWORK[CWK_LV] ==24){SetLevel(ADOL,24)} 
	else if(LEADER.CHRWORK[CWK_LV] ==25){SetLevel(ADOL,25)} 
	else if(LEADER.CHRWORK[CWK_LV] ==26){SetLevel(ADOL,26)} 
	else if(LEADER.CHRWORK[CWK_LV] ==27){SetLevel(ADOL,27)} 
	else if(LEADER.CHRWORK[CWK_LV] ==28){SetLevel(ADOL,28)} 
	else if(LEADER.CHRWORK[CWK_LV] ==29){SetLevel(ADOL,29)} 
	else if(LEADER.CHRWORK[CWK_LV] ==30){SetLevel(ADOL,30)} 
	else if(LEADER.CHRWORK[CWK_LV] ==31){SetLevel(ADOL,31)} 
	else if(LEADER.CHRWORK[CWK_LV] ==32){SetLevel(ADOL,32)} 
	else if(LEADER.CHRWORK[CWK_LV] ==33){SetLevel(ADOL,33)} 
	else if(LEADER.CHRWORK[CWK_LV] ==34){SetLevel(ADOL,34)} 
	else if(LEADER.CHRWORK[CWK_LV] ==35){SetLevel(ADOL,35)} 
	else if(LEADER.CHRWORK[CWK_LV] ==36){SetLevel(ADOL,36)} 
	else if(LEADER.CHRWORK[CWK_LV] ==37){SetLevel(ADOL,37)} 
	else if(LEADER.CHRWORK[CWK_LV] ==38){SetLevel(ADOL,38)} 
	else if(LEADER.CHRWORK[CWK_LV] ==39){SetLevel(ADOL,39)} 
	else if(LEADER.CHRWORK[CWK_LV] ==40){SetLevel(ADOL,40)} 
	else if(LEADER.CHRWORK[CWK_LV] ==41){SetLevel(ADOL,41)} 
	else if(LEADER.CHRWORK[CWK_LV] ==42){SetLevel(ADOL,42)} 
	else if(LEADER.CHRWORK[CWK_LV] ==43){SetLevel(ADOL,43)} 
	else if(LEADER.CHRWORK[CWK_LV] ==44){SetLevel(ADOL,44)} 
	else if(LEADER.CHRWORK[CWK_LV] ==45){SetLevel(ADOL,45)} 
	else if(LEADER.CHRWORK[CWK_LV] ==46){SetLevel(ADOL,46)} 
	else if(LEADER.CHRWORK[CWK_LV] ==47){SetLevel(ADOL,47)} 
	else if(LEADER.CHRWORK[CWK_LV] ==48){SetLevel(ADOL,48)} 
	else if(LEADER.CHRWORK[CWK_LV] ==49){SetLevel(ADOL,49)} 
	else if(LEADER.CHRWORK[CWK_LV] ==50){SetLevel(ADOL,50)} 
	else if(LEADER.CHRWORK[CWK_LV] ==51){SetLevel(ADOL,51)} 
	else if(LEADER.CHRWORK[CWK_LV] ==52){SetLevel(ADOL,52)} 
	else if(LEADER.CHRWORK[CWK_LV] ==53){SetLevel(ADOL,53)} 
	else if(LEADER.CHRWORK[CWK_LV] ==54){SetLevel(ADOL,54)} 
	else if(LEADER.CHRWORK[CWK_LV] ==55){SetLevel(ADOL,55)} 
	else if(LEADER.CHRWORK[CWK_LV] ==56){SetLevel(ADOL,56)} 
	else if(LEADER.CHRWORK[CWK_LV] ==57){SetLevel(ADOL,57)} 
	else if(LEADER.CHRWORK[CWK_LV] ==58){SetLevel(ADOL,58)} 
	else if(LEADER.CHRWORK[CWK_LV] ==59){SetLevel(ADOL,59)} 
	else if(LEADER.CHRWORK[CWK_LV] ==60){SetLevel(ADOL,60)} 
	else if(LEADER.CHRWORK[CWK_LV] ==61){SetLevel(ADOL,61)} 
	else if(LEADER.CHRWORK[CWK_LV] ==62){SetLevel(ADOL,62)} 
	else if(LEADER.CHRWORK[CWK_LV] ==63){SetLevel(ADOL,63)} 
	else if(LEADER.CHRWORK[CWK_LV] ==64){SetLevel(ADOL,64)} 
	else if(LEADER.CHRWORK[CWK_LV] ==65){SetLevel(ADOL,65)} 
	else if(LEADER.CHRWORK[CWK_LV] ==66){SetLevel(ADOL,66)} 
	else if(LEADER.CHRWORK[CWK_LV] ==67){SetLevel(ADOL,67)} 
	else if(LEADER.CHRWORK[CWK_LV] ==68){SetLevel(ADOL,68)} 
	else if(LEADER.CHRWORK[CWK_LV] ==69){SetLevel(ADOL,69)} 
	else if(LEADER.CHRWORK[CWK_LV] ==70){SetLevel(ADOL,70)} 
	else if(LEADER.CHRWORK[CWK_LV] ==71){SetLevel(ADOL,71)} 
	else if(LEADER.CHRWORK[CWK_LV] ==72){SetLevel(ADOL,72)} 
	else if(LEADER.CHRWORK[CWK_LV] ==73){SetLevel(ADOL,73)} 
	else if(LEADER.CHRWORK[CWK_LV] ==74){SetLevel(ADOL,74)} 
	else if(LEADER.CHRWORK[CWK_LV] ==75){SetLevel(ADOL,75)} 
	else if(LEADER.CHRWORK[CWK_LV] ==76){SetLevel(ADOL,76)} 
	else if(LEADER.CHRWORK[CWK_LV] ==77){SetLevel(ADOL,77)} 
	else if(LEADER.CHRWORK[CWK_LV] ==78){SetLevel(ADOL,78)} 
	else if(LEADER.CHRWORK[CWK_LV] ==79){SetLevel(ADOL,79)} 
	else if(LEADER.CHRWORK[CWK_LV] ==80){SetLevel(ADOL,80)} 
	else if(LEADER.CHRWORK[CWK_LV] ==81){SetLevel(ADOL,81)} 
	else if(LEADER.CHRWORK[CWK_LV] ==82){SetLevel(ADOL,82)} 
	else if(LEADER.CHRWORK[CWK_LV] ==83){SetLevel(ADOL,83)} 
	else if(LEADER.CHRWORK[CWK_LV] ==84){SetLevel(ADOL,84)} 
	else if(LEADER.CHRWORK[CWK_LV] ==85){SetLevel(ADOL,85)} 
	else if(LEADER.CHRWORK[CWK_LV] ==86){SetLevel(ADOL,86)} 
	else if(LEADER.CHRWORK[CWK_LV] ==87){SetLevel(ADOL,87)} 
	else if(LEADER.CHRWORK[CWK_LV] ==88){SetLevel(ADOL,88)} 
	else if(LEADER.CHRWORK[CWK_LV] ==89){SetLevel(ADOL,89)} 
	else if(LEADER.CHRWORK[CWK_LV] ==90){SetLevel(ADOL,90)} 
	else if(LEADER.CHRWORK[CWK_LV] ==91){SetLevel(ADOL,91)} 
	else if(LEADER.CHRWORK[CWK_LV] ==92){SetLevel(ADOL,92)} 
	else if(LEADER.CHRWORK[CWK_LV] ==93){SetLevel(ADOL,93)} 
	else if(LEADER.CHRWORK[CWK_LV] ==94){SetLevel(ADOL,94)} 
	else if(LEADER.CHRWORK[CWK_LV] ==95){SetLevel(ADOL,95)} 
	else if(LEADER.CHRWORK[CWK_LV] ==96){SetLevel(ADOL,96)} 
	else if(LEADER.CHRWORK[CWK_LV] ==97){SetLevel(ADOL,97)} 
	else if(LEADER.CHRWORK[CWK_LV] ==98){SetLevel(ADOL,98)} 
	else{SetLevel(ADOL,99)} 

    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0416"
{
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CCaptain Barbaros#4C Joined the Village.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetDiaryFlag( DF_JOIN_BARBAROSS, 1 )	//Footprint memo: Reunited with Captain Barbaros.
    JoinNPC(NPC_BARBAROSS, JOIN_NPC_JOIN) // Captain Barbaros joins the interception battle
    SetDiaryCharaFlag( DRCHA_BARBAROSS, DRCHA_FLAG_OPEN, 1 ) //Person memo: Register when joining (Captain Barbaros)
    SetDiaryCharaFlag( DRCHA_BARBAROSS2, DRCHA_FLAG_OPEN, 1 ) //Person memo: Register when joining (Captain Barbaros)
    SetDiaryCharaFlag( DRCHA_BARBAROSS, DRCHA_FLAG_INFO1, 1 ) //Person memo: Additional information release 1 (Captain Barbaros)
    SetDiaryCharaFlag( DRCHA_BARBAROSS2, DRCHA_FLAG_INFO1, 1 ) //Character memo: Additional information release 1 (Captain Barbaros)
    SetDiaryCharaFlag( DRCHA_BARBAROSS, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_BARBAROSS2, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_BARBAROSS, DRCHA_FLAG_INFO3, 1 )  
    
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )	

    
}

function "0467"
{
    GetItem(ICON3D_SHIP_PLAN,1)
    GetItemMessageExPlus(ICON3D_SHIP_PLAN,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetFlag(GF_SUBEV_06_1111_LOOK_BOAT,1)
    
}

function "0255"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CFranz#4C Joined the Village.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetDiaryCharaFlag( DRCHA_FRANZ, DRCHA_FLAG_OPEN, 1 ) 
    SetDiaryCharaFlag( DRCHA_FRANZ, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_FRANZ, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_FRANZ, DRCHA_FLAG_INFO3, 1 )
    JoinNPC( NPC_FRANZ, JOIN_NPC_JOIN ) // Joined with Franz
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )	

    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0077"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CAustin#4C Joined the Village.",0,0)
    WaitPrompt()
    WaitCloseWindow()
     
    SetFlag( GF_SUBEV_JOIN_AUSTEN, 1 ) // Joined with Austin
    SetDiaryFlag( DF_JOIN_AUSTEN, 1 ) //Footprint memo: Rescued Austin.
    JoinNPC( NPC_AUSTEN, JOIN_NPC_JOIN ) // Austin has become a friend
    GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Discoveries can now be shown.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    SetDiaryCharaFlag( DRCHA_AUSTEN, DRCHA_FLAG_OPEN, 1 )
    SetDiaryCharaFlag( DRCHA_AUSTEN2, DRCHA_FLAG_OPEN, 0 )
    SetDiaryCharaFlag( DRCHA_AUSTEN, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_AUSTEN, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_AUSTEN, DRCHA_FLAG_INFO3, 1 )
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )	

    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0439"
{
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CLicht#4C Joined the Village.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetDiaryFlag( DF_JOIN_LICHT, 1 ) //Footprint memo: Rescued Licht.
    SetDiaryCharaFlag( DRCHA_LICHT, DRCHA_FLAG_OPEN, 1 ) //Person memo: Register when joining (Licht)
    SetDiaryCharaFlag( DRCHA_LICHT, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_LICHT, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_LICHT, DRCHA_FLAG_INFO3, 1 )
    GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Medicine can now be brewed.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    SetFlag( GF_CAMP_BED_LV, 2 ) // Drifting village development settings: Bed LV2
    JoinNPC( NPC_LICHT, JOIN_NPC_JOIN ) // Licht has become a friend
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )	

    
}

function "0517"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_COOK_RECIPE07,1)
    GetItemMessageExPlus(ICON3D_COOK_RECIPE07,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
        GetItem(ICON3D_FD_WHEAT,2)
        GetItem(ICON3D_FD_LAND_EGG,2)
        GetItem(ICON3D_FD_MEAT_02,4)
        GetItem(ICON3D_FD_VG_TOMATO,2)
        
    ResetStopFlag(STOPFLAG_TALK)
}

function "0481"
{
    GetItem(ICON3D_NUMA_BOOTS,1)
    GetItemMessageExPlus(ICON3D_NUMA_BOOTS,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0035"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_COOK_RECIPE02,1)
    GetItemMessageExPlus(ICON3D_COOK_RECIPE02,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
        GetItem(ICON3D_FD_LAND_HONEY,2)
        GetItem(ICON3D_FD_MEAT_01,2)
        GetItem(ICON3D_FD_VG_EGGPLANT,2)
        
    ResetStopFlag(STOPFLAG_TALK)
}

function "0108"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_005,1)
    GetItemMessageExPlus(ICON3D_AC_005,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0434"
{
    GetItem(ICON3D_MT_R4_GOLD,1)
    GetItemMessageExPlus(ICON3D_MT_R4_GOLD,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0070"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_OXYGEN_BOTTLE,1)
    GetItemMessageExPlus(ICON3D_OXYGEN_BOTTLE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0203"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_COOK_RECIPE03,1)
    GetItemMessageExPlus(ICON3D_COOK_RECIPE03,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
        GetItem(ICON3D_FD_WHEAT,2)
        GetItem(ICON3D_FD_MEAT_02,2)
        GetItem(ICON3D_FD_MUSHROOM,2)
        GetItem(ICON3D_FD_VG_PAPRIKA,2)
        
    ResetStopFlag(STOPFLAG_TALK)
}

    function "0451"
    {
        
        if (!FLAG[GF_02MP1201_JOIN_KATRIN])
        {
            GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CKathleen#4C  Joined the Village.",0,0)
            WaitPrompt()
            WaitCloseWindow()        
            
    SetDiaryFlag( DF_JOIN_KATRIN, 1 ) //Footprint memo: Rescued Katrin.
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_OPEN, 1 ) //Person memo: Register when joining (Katrin)
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO3, 1 )
    JoinNPC( NPC_KATRIN, JOIN_NPC_JOIN ) // Katrin has joined
    SetFlag( GF_02MP1201_JOIN_KATRIN , 1 )
    
    SetFlag(GF_SMITHY_LV,2) //Blacksmith level setting
    //SetFlag( GF_CAMP_SHIPYARD_LV, 1 ) // Drifting village development settings: Shipyard LV1
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )
    GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Weapons can now be reforged.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetDiaryShopFlag(SHOP_ID_WEAPON_A,0) // "Forge (enhanced)"
    SetDiaryShopFlag(SHOP_ID_WEAPON,1) // "Katlin's Weapon Workshop (Enhancement/Evolution)"
    SetDiaryShopFlag(SHOP_ID_ARMOR,1) // "Katlin's Weapon Workshop (Purchase Armor)"


            
            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 41))
            SetChrWork(RICOTTA,CWK_SUP_STR,(RICOTTA.CHRWORK[CWK_SUP_STR] + 33))
            SetChrWork(HUMMEL,CWK_SUP_STR,(HUMMEL.CHRWORK[CWK_SUP_STR] - 18))
            GetItem(ICON3D_WP_HUMMEL_000, 1)
            GetItem(ICON3D_AM_021, 1)
            EquipWeapon(HUMMEL,ICON3D_WP_HUMMEL_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY081])
        {
            SetFlag(GF_SHOP_RANK_3_02,1)
            SetFlag(GF_02MP4309_KILL_SPIDER,1)
            SetFlag(GF_QS201_SHOP_ADD,1)
            SetFlag(GF_TBOX_DUMMY081,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 2.",0,0)
            WaitPrompt()
            WaitCloseWindow()  

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 34))
            SetChrWork(RICOTTA,CWK_SUP_STR,(RICOTTA.CHRWORK[CWK_SUP_STR] - 55))
            GetItem(ICON3D_WP_RICOTTA_000, 1)
            GetItem(ICON3D_AM_022, 1)
            EquipWeapon(RICOTTA,ICON3D_WP_RICOTTA_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY082])
        {
            SetFlag(GF_SHOP_RANK_3_05,1)
            SetFlag(GF_SHOP_RANK_4_01,1)
            //The flag here is the trigger for speaking with Kathleen about the orichalcum and having new weapons made.
            //That event then trips the flag for being able to kill enemies flagged as Saurians.
            SetFlag(GF_03MP7401_GET_MATERIAL, 1)
            //Hummel has no shop upgarde to get him this weapon tier and therefore cannot upgrade to it. So we'll give it to him when we hit this level so Hummel isn't stuck with a tier 2 weapon all game.
            GetItem(ICON3D_WP_HUMMEL_002,1)
            EquipWeapon(HUMMEL, ICON3D_WP_HUMMEL_002)
            SetFlag(GF_TBOX_DUMMY082,1)
            GetItem(ICON3D_HIIROKANE,1)
            GetItemMessageExPlus(ICON3D_HIIROKANE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Turn this into Kathleen.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 3.",0,0)
            WaitPrompt()
            WaitCloseWindow()

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 47))
        }
        else if (!FLAG[GF_TBOX_DUMMY083])
        {
            SetFlag(GF_SHOP_RANK_5_02,1)
            SetFlag(GF_TBOX_DUMMY083,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 4.",0,0)
            WaitPrompt()
            WaitCloseWindow()

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] - 130))
            GetItem(ICON3D_AM_023, 1)
            GetItem(ICON3D_WP_DANA_000, 1)
            EquipWeapon(DANA,ICON3D_WP_DANA_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY084])
        {
            SetFlag(GF_SHOP_RANK_5_04,1)
            SetFlag(GF_QS222_SHOP_ADD,1)
            SetFlag(GF_QS310_GET_ITEM,1)
            SetFlag(GF_QS310_GET_ITEM2,1)
            SetFlag(GF_QS310_GET_ITEM3,1)
            SetFlag(GF_TBOX_DUMMY084,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 5.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        else if (!FLAG[GF_TBOX_DUMMY085])
        {
            SetFlag(GF_SHOP_RANK_5_07,1)
            SetFlag(GF_TBOX_DUMMY085,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 6.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        else if (!FLAG[GF_TBOX_DUMMY086])
        {
            SetFlag(GF_SHOP_RANK_6_01,1)
            SetFlag(GF_05MP6349_KILL_BOSS,1)
            SetFlag(GF_QS600_SHOP_ADD,1)
            SetFlag(GF_TBOX_DUMMY086,1)
            SetFlag(GF_NPC_6_03_AFTER_INTERCEPT12,1)
            SetFlag(GF_06MP1201_GOTO_GEND,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank MAX.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        
    }
    
function "0081"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_COOK_RECIPE05,1)
    GetItemMessageExPlus(ICON3D_COOK_RECIPE05,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
        GetItem(ICON3D_FD_SEA_SALT,2)
        GetItem(ICON3D_FD_LAND_HONEY,2)
        GetItem(ICON3D_FD_MEAT_01,2)
        GetItem(ICON3D_FD_VG_CABBAGE,2)
        
    ResetStopFlag(STOPFLAG_TALK)
}

function "0176"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_COOK_RECIPE04,1)
    GetItemMessageExPlus(ICON3D_COOK_RECIPE04,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
        GetItem(ICON3D_FD_WHEAT,2)
        GetItem(ICON3D_FD_LAND_EGG,2)
        GetItem(ICON3D_FD_MEAT_02,2)
        GetItem(ICON3D_FD_SEA_SHELLFISH,2)
        
    ResetStopFlag(STOPFLAG_TALK)
}

function "0056"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CMiralda#4C Joined the Village.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetFlag( GF_SUBEV_JOIN_MIRALDA, 1 )
    SetDiaryFlag( DF_JOIN_MIRALDA, 1 ) //Footprint memo: Rescued Miralda.
    JoinNPC( NPC_MIRALDA, JOIN_NPC_JOIN ) // Joined with Miralda
    SetDiaryCharaFlag( DRCHA_MIRALDA, DRCHA_FLAG_OPEN, 1 ) //Person memo: Register when joining (Miralda)
    SetDiaryCharaFlag( DRCHA_MIRALDA, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_MIRALDA, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_MIRALDA, DRCHA_FLAG_INFO3, 1 )
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )	

    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0564"
{
    GetItem(ICON3D_COOK_RECIPE08,1)
    GetItemMessageExPlus(ICON3D_COOK_RECIPE08,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
        GetItem(ICON3D_FD_SEA_SHELLFISH,2)
        GetItem(ICON3D_FD_MEAT_01,2)
        GetItem(ICON3D_FD_MEAT_03,4)
        GetItem(ICON3D_FD_VG_PUMPKIN,2)
        
}

function "0566"
{
    GetItem(ICON3D_AR_025,1)
    GetItemMessageExPlus(ICON3D_AR_025,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0042"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_018,1)
    GetItemMessageExPlus(ICON3D_AC_018,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0515"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_COOK_RECIPE01,1)
    GetItemMessageExPlus(ICON3D_COOK_RECIPE01,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
        GetItem(ICON3D_FD_LAND_EGG,2)
        GetItem(ICON3D_FD_MUSHROOM,2)
        GetItem(ICON3D_FD_SEA_SHELLFISH,2)
        
    ResetStopFlag(STOPFLAG_TALK)
}

function "0510"
{
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CMaster Kong#4C Joined the Village.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    JoinNPC( NPC_SKILLMONKY, JOIN_NPC_JOIN ) // Master Kong has become a friend
    JoinNPC( NPC_CURRAN2, JOIN_NPC_JOIN )
    // Switch character memo Master Kong (2) After meeting up with Drifting Village (version with support skill notation)
    SetDiaryCharaFlag( DRCHA_SKILLMONKY, DRCHA_FLAG_OPEN, 0 ) //Person memo: Register when joining (Master Kong)
    SetDiaryCharaFlag( DRCHA_SKILLMONKY2, DRCHA_FLAG_OPEN, 1 ) //Person memo: Register when joining (Master Kong)
    SetDiaryCharaFlag( DRCHA_SKILLMONKY, DRCHA_FLAG_INFO1, 1 ) //Character memo: Additional information release 2 (Master Kong)
    SetDiaryCharaFlag( DRCHA_SKILLMONKY2, DRCHA_FLAG_INFO1, 1 ) //Character memo: Additional information release 2 (Master Kong)
    SetDiaryCharaFlag( DRCHA_SKILLMONKY, DRCHA_FLAG_INFO2, 1 ) //Character memo: Additional information release 2 (Master Kong)
    SetDiaryCharaFlag( DRCHA_SKILLMONKY2, DRCHA_FLAG_INFO2, 1 ) //Character memo: Additional information release 2 (Master Kong)
    SetDiaryCharaFlag( DRCHA_SKILLMONKY, DRCHA_FLAG_INFO3, 1 ) //Character memo: Additional information release 2 (Master Kong)
    SetDiaryCharaFlag( DRCHA_SKILLMONKY2, DRCHA_FLAG_INFO3, 1 ) //Character memo: Additional information release 2 (Master Kong)
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 3) )	

    
}

function "0543"
{
    GetItem(ICON3D_DOUBLEJUMP,1)
    GetItemMessageExPlus(ICON3D_DOUBLEJUMP,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0206"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_SILVERBELL,1)
    GetItemMessageExPlus(ICON3D_SILVERBELL,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

    function "0102"
    {
        SetStopFlag(STOPFLAG_TALK)
        if (!FLAG[GF_02MP1201_JOIN_KATRIN])
        {
            GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CKathleen#4C  Joined the Village.",0,0)
            WaitPrompt()
            WaitCloseWindow()        
            
    SetDiaryFlag( DF_JOIN_KATRIN, 1 ) //Footprint memo: Rescued Katrin.
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_OPEN, 1 ) //Person memo: Register when joining (Katrin)
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO3, 1 )
    JoinNPC( NPC_KATRIN, JOIN_NPC_JOIN ) // Katrin has joined
    SetFlag( GF_02MP1201_JOIN_KATRIN , 1 )
    
    SetFlag(GF_SMITHY_LV,2) //Blacksmith level setting
    //SetFlag( GF_CAMP_SHIPYARD_LV, 1 ) // Drifting village development settings: Shipyard LV1
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )
    GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Weapons can now be reforged.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetDiaryShopFlag(SHOP_ID_WEAPON_A,0) // "Forge (enhanced)"
    SetDiaryShopFlag(SHOP_ID_WEAPON,1) // "Katlin's Weapon Workshop (Enhancement/Evolution)"
    SetDiaryShopFlag(SHOP_ID_ARMOR,1) // "Katlin's Weapon Workshop (Purchase Armor)"


            
            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 41))
            SetChrWork(RICOTTA,CWK_SUP_STR,(RICOTTA.CHRWORK[CWK_SUP_STR] + 33))
            SetChrWork(HUMMEL,CWK_SUP_STR,(HUMMEL.CHRWORK[CWK_SUP_STR] - 18))
            GetItem(ICON3D_WP_HUMMEL_000, 1)
            GetItem(ICON3D_AM_021, 1)
            EquipWeapon(HUMMEL,ICON3D_WP_HUMMEL_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY081])
        {
            SetFlag(GF_SHOP_RANK_3_02,1)
            SetFlag(GF_02MP4309_KILL_SPIDER,1)
            SetFlag(GF_QS201_SHOP_ADD,1)
            SetFlag(GF_TBOX_DUMMY081,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 2.",0,0)
            WaitPrompt()
            WaitCloseWindow()  

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 34))
            SetChrWork(RICOTTA,CWK_SUP_STR,(RICOTTA.CHRWORK[CWK_SUP_STR] - 55))
            GetItem(ICON3D_WP_RICOTTA_000, 1)
            GetItem(ICON3D_AM_022, 1)
            EquipWeapon(RICOTTA,ICON3D_WP_RICOTTA_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY082])
        {
            SetFlag(GF_SHOP_RANK_3_05,1)
            SetFlag(GF_SHOP_RANK_4_01,1)
            //The flag here is the trigger for speaking with Kathleen about the orichalcum and having new weapons made.
            //That event then trips the flag for being able to kill enemies flagged as Saurians.
            SetFlag(GF_03MP7401_GET_MATERIAL, 1)
            //Hummel has no shop upgarde to get him this weapon tier and therefore cannot upgrade to it. So we'll give it to him when we hit this level so Hummel isn't stuck with a tier 2 weapon all game.
            GetItem(ICON3D_WP_HUMMEL_002,1)
            EquipWeapon(HUMMEL, ICON3D_WP_HUMMEL_002)
            SetFlag(GF_TBOX_DUMMY082,1)
            GetItem(ICON3D_HIIROKANE,1)
            GetItemMessageExPlus(ICON3D_HIIROKANE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Turn this into Kathleen.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 3.",0,0)
            WaitPrompt()
            WaitCloseWindow()

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 47))
        }
        else if (!FLAG[GF_TBOX_DUMMY083])
        {
            SetFlag(GF_SHOP_RANK_5_02,1)
            SetFlag(GF_TBOX_DUMMY083,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 4.",0,0)
            WaitPrompt()
            WaitCloseWindow()

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] - 130))
            GetItem(ICON3D_AM_023, 1)
            GetItem(ICON3D_WP_DANA_000, 1)
            EquipWeapon(DANA,ICON3D_WP_DANA_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY084])
        {
            SetFlag(GF_SHOP_RANK_5_04,1)
            SetFlag(GF_QS222_SHOP_ADD,1)
            SetFlag(GF_QS310_GET_ITEM,1)
            SetFlag(GF_QS310_GET_ITEM2,1)
            SetFlag(GF_QS310_GET_ITEM3,1)
            SetFlag(GF_TBOX_DUMMY084,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 5.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        else if (!FLAG[GF_TBOX_DUMMY085])
        {
            SetFlag(GF_SHOP_RANK_5_07,1)
            SetFlag(GF_TBOX_DUMMY085,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 6.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        else if (!FLAG[GF_TBOX_DUMMY086])
        {
            SetFlag(GF_SHOP_RANK_6_01,1)
            SetFlag(GF_05MP6349_KILL_BOSS,1)
            SetFlag(GF_QS600_SHOP_ADD,1)
            SetFlag(GF_TBOX_DUMMY086,1)
            SetFlag(GF_NPC_6_03_AFTER_INTERCEPT12,1)
            SetFlag(GF_06MP1201_GOTO_GEND,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank MAX.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        ResetStopFlag(STOPFLAG_TALK)
    }
    
function "0545"
{
    GetItem(ICON3D_COOK_RECIPE11,1)
    GetItemMessageExPlus(ICON3D_COOK_RECIPE11,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
        GetItem(ICON3D_FD_LAND_HONEY,2)
        GetItem(ICON3D_FD_WHEAT,2)
        GetItem(ICON3D_FD_VG_PAPRIKA,4)
        GetItem(ICON3D_FD_VG_PUMPKIN,4)
        
}

function "0010"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CReja#4C Joined the Village.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetFlag( GF_SUBEV_JOIN_REJA, 1 )
    SetDiaryFlag( DF_JOIN_REJA, 1 ) //Footprint memo: Reya was rescued.
    SetDiaryCharaFlag( DRCHA_REJA, DRCHA_FLAG_OPEN, 1 ) //Person memo: Register when meeting (layer)
    SetDiaryCharaFlag( DRCHA_REJA, DRCHA_FLAG_INFO1, 1 ) //Person memo: Additional information release 1 (layer)
    SetDiaryCharaFlag( DRCHA_REJA, DRCHA_FLAG_INFO2, 1 )
    SetDiaryCharaFlag( DRCHA_REJA, DRCHA_FLAG_INFO3, 1 )
    SetFlag( GF_CAMP_FARM_LV, 1 ) // Drifting village development settings: Farm LV1
    SetFlag( GF_CAMP_FARMFENCE_LV, 1 ) // Drifting village development settings: Farm fence LV1
    SetFlag( GF_SPEEDRUN_FARM_NASUBI_KC, FLAG[SF_KILLMONSTER_COUNT] )
	SetFlag( GF_SPEEDRUN_FARM_PAPRIKA_KC, FLAG[SF_KILLMONSTER_COUNT] )
	SetFlag( GF_SPEEDRUN_FARM_CABBAGE_KC, FLAG[SF_KILLMONSTER_COUNT] )
	SetFlag( GF_SPEEDRUN_FARM_CORN_KC, FLAG[SF_KILLMONSTER_COUNT] )
	SetFlag( GF_SPEEDRUN_FARM_TOMATO_KC, FLAG[SF_KILLMONSTER_COUNT] )
	SetFlag( GF_SPEEDRUN_FARM_PUMPKIN_KC, FLAG[SF_KILLMONSTER_COUNT] )
	SetFlag( GF_SPEEDRUN_FARM_1ST_KC, FLAG[SF_KILLMONSTER_COUNT] )
    JoinNPC( NPC_REJA, JOIN_NPC_JOIN ) // Joined with Reya
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )	

    
    ResetStopFlag(STOPFLAG_TALK)
}

    function "0435"
    {
        
        if (!FLAG[GF_02MP1201_JOIN_KATRIN])
        {
            GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CKathleen#4C  Joined the Village.",0,0)
            WaitPrompt()
            WaitCloseWindow()        
            
    SetDiaryFlag( DF_JOIN_KATRIN, 1 ) //Footprint memo: Rescued Katrin.
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_OPEN, 1 ) //Person memo: Register when joining (Katrin)
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO3, 1 )
    JoinNPC( NPC_KATRIN, JOIN_NPC_JOIN ) // Katrin has joined
    SetFlag( GF_02MP1201_JOIN_KATRIN , 1 )
    
    SetFlag(GF_SMITHY_LV,2) //Blacksmith level setting
    //SetFlag( GF_CAMP_SHIPYARD_LV, 1 ) // Drifting village development settings: Shipyard LV1
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )
    GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Weapons can now be reforged.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetDiaryShopFlag(SHOP_ID_WEAPON_A,0) // "Forge (enhanced)"
    SetDiaryShopFlag(SHOP_ID_WEAPON,1) // "Katlin's Weapon Workshop (Enhancement/Evolution)"
    SetDiaryShopFlag(SHOP_ID_ARMOR,1) // "Katlin's Weapon Workshop (Purchase Armor)"


            
            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 41))
            SetChrWork(RICOTTA,CWK_SUP_STR,(RICOTTA.CHRWORK[CWK_SUP_STR] + 33))
            SetChrWork(HUMMEL,CWK_SUP_STR,(HUMMEL.CHRWORK[CWK_SUP_STR] - 18))
            GetItem(ICON3D_WP_HUMMEL_000, 1)
            GetItem(ICON3D_AM_021, 1)
            EquipWeapon(HUMMEL,ICON3D_WP_HUMMEL_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY081])
        {
            SetFlag(GF_SHOP_RANK_3_02,1)
            SetFlag(GF_02MP4309_KILL_SPIDER,1)
            SetFlag(GF_QS201_SHOP_ADD,1)
            SetFlag(GF_TBOX_DUMMY081,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 2.",0,0)
            WaitPrompt()
            WaitCloseWindow()  

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 34))
            SetChrWork(RICOTTA,CWK_SUP_STR,(RICOTTA.CHRWORK[CWK_SUP_STR] - 55))
            GetItem(ICON3D_WP_RICOTTA_000, 1)
            GetItem(ICON3D_AM_022, 1)
            EquipWeapon(RICOTTA,ICON3D_WP_RICOTTA_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY082])
        {
            SetFlag(GF_SHOP_RANK_3_05,1)
            SetFlag(GF_SHOP_RANK_4_01,1)
            //The flag here is the trigger for speaking with Kathleen about the orichalcum and having new weapons made.
            //That event then trips the flag for being able to kill enemies flagged as Saurians.
            SetFlag(GF_03MP7401_GET_MATERIAL, 1)
            //Hummel has no shop upgarde to get him this weapon tier and therefore cannot upgrade to it. So we'll give it to him when we hit this level so Hummel isn't stuck with a tier 2 weapon all game.
            GetItem(ICON3D_WP_HUMMEL_002,1)
            EquipWeapon(HUMMEL, ICON3D_WP_HUMMEL_002)
            SetFlag(GF_TBOX_DUMMY082,1)
            GetItem(ICON3D_HIIROKANE,1)
            GetItemMessageExPlus(ICON3D_HIIROKANE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Turn this into Kathleen.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 3.",0,0)
            WaitPrompt()
            WaitCloseWindow()

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 47))
        }
        else if (!FLAG[GF_TBOX_DUMMY083])
        {
            SetFlag(GF_SHOP_RANK_5_02,1)
            SetFlag(GF_TBOX_DUMMY083,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 4.",0,0)
            WaitPrompt()
            WaitCloseWindow()

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] - 130))
            GetItem(ICON3D_AM_023, 1)
            GetItem(ICON3D_WP_DANA_000, 1)
            EquipWeapon(DANA,ICON3D_WP_DANA_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY084])
        {
            SetFlag(GF_SHOP_RANK_5_04,1)
            SetFlag(GF_QS222_SHOP_ADD,1)
            SetFlag(GF_QS310_GET_ITEM,1)
            SetFlag(GF_QS310_GET_ITEM2,1)
            SetFlag(GF_QS310_GET_ITEM3,1)
            SetFlag(GF_TBOX_DUMMY084,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 5.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        else if (!FLAG[GF_TBOX_DUMMY085])
        {
            SetFlag(GF_SHOP_RANK_5_07,1)
            SetFlag(GF_TBOX_DUMMY085,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 6.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        else if (!FLAG[GF_TBOX_DUMMY086])
        {
            SetFlag(GF_SHOP_RANK_6_01,1)
            SetFlag(GF_05MP6349_KILL_BOSS,1)
            SetFlag(GF_QS600_SHOP_ADD,1)
            SetFlag(GF_TBOX_DUMMY086,1)
            SetFlag(GF_NPC_6_03_AFTER_INTERCEPT12,1)
            SetFlag(GF_06MP1201_GOTO_GEND,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank MAX.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        
    }
    
function "0097"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_006,1)
    GetItemMessageExPlus(ICON3D_AC_006,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0568"
{
    GetItem(ICON3D_MT_R4_GOLD,5)
    GetItemMessageExPlus(ICON3D_MT_R4_GOLD,5,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0068"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R4_GOLD,2)
    GetItemMessageExPlus(ICON3D_MT_R4_GOLD,2,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0412"
{
    GetItem(ICON3D_MT_R4_GOLD,1)
    GetItemMessageExPlus(ICON3D_MT_R4_GOLD,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0225"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CEuron#4C Joined the Village.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetFlag( GF_02MP2301_JOIN_AARON , 1 )	
    SetDiaryFlag( DF_JOIN_AARON, 1 ) //Footprint memo: Airan has joined the Drifting Village.
    SetDiaryCharaFlag( DRCHA_AARON, DRCHA_FLAG_OPEN, 1 ) //Person memo: Register when joining (air run)
    SetDiaryCharaFlag( DRCHA_AARON, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_AARON, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_AARON, DRCHA_FLAG_INFO3, 1 ) 
    JoinNPC( NPC_AARON, JOIN_NPC_JOIN ) //Joined with Airan
    GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Accessories can now be crafted and the map can be shown.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )	

    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0387"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_COOK_RECIPE06,1)
    GetItemMessageExPlus(ICON3D_COOK_RECIPE06,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
        GetItem(ICON3D_FD_SEA_SALT,2)
        GetItem(ICON3D_FD_MUSHROOM,4)
        GetItem(ICON3D_FD_MEAT_03,2)
        GetItem(ICON3D_FD_VG_CORN,2)
        
    ResetStopFlag(STOPFLAG_TALK)
}

    function "0023"
    {
        SetStopFlag(STOPFLAG_TALK)
        if (!FLAG[GF_02MP1201_JOIN_KATRIN])
        {
            GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CKathleen#4C  Joined the Village.",0,0)
            WaitPrompt()
            WaitCloseWindow()        
            
    SetDiaryFlag( DF_JOIN_KATRIN, 1 ) //Footprint memo: Rescued Katrin.
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_OPEN, 1 ) //Person memo: Register when joining (Katrin)
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO3, 1 )
    JoinNPC( NPC_KATRIN, JOIN_NPC_JOIN ) // Katrin has joined
    SetFlag( GF_02MP1201_JOIN_KATRIN , 1 )
    
    SetFlag(GF_SMITHY_LV,2) //Blacksmith level setting
    //SetFlag( GF_CAMP_SHIPYARD_LV, 1 ) // Drifting village development settings: Shipyard LV1
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )
    GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Weapons can now be reforged.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetDiaryShopFlag(SHOP_ID_WEAPON_A,0) // "Forge (enhanced)"
    SetDiaryShopFlag(SHOP_ID_WEAPON,1) // "Katlin's Weapon Workshop (Enhancement/Evolution)"
    SetDiaryShopFlag(SHOP_ID_ARMOR,1) // "Katlin's Weapon Workshop (Purchase Armor)"


            
            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 41))
            SetChrWork(RICOTTA,CWK_SUP_STR,(RICOTTA.CHRWORK[CWK_SUP_STR] + 33))
            SetChrWork(HUMMEL,CWK_SUP_STR,(HUMMEL.CHRWORK[CWK_SUP_STR] - 18))
            GetItem(ICON3D_WP_HUMMEL_000, 1)
            GetItem(ICON3D_AM_021, 1)
            EquipWeapon(HUMMEL,ICON3D_WP_HUMMEL_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY081])
        {
            SetFlag(GF_SHOP_RANK_3_02,1)
            SetFlag(GF_02MP4309_KILL_SPIDER,1)
            SetFlag(GF_QS201_SHOP_ADD,1)
            SetFlag(GF_TBOX_DUMMY081,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 2.",0,0)
            WaitPrompt()
            WaitCloseWindow()  

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 34))
            SetChrWork(RICOTTA,CWK_SUP_STR,(RICOTTA.CHRWORK[CWK_SUP_STR] - 55))
            GetItem(ICON3D_WP_RICOTTA_000, 1)
            GetItem(ICON3D_AM_022, 1)
            EquipWeapon(RICOTTA,ICON3D_WP_RICOTTA_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY082])
        {
            SetFlag(GF_SHOP_RANK_3_05,1)
            SetFlag(GF_SHOP_RANK_4_01,1)
            //The flag here is the trigger for speaking with Kathleen about the orichalcum and having new weapons made.
            //That event then trips the flag for being able to kill enemies flagged as Saurians.
            SetFlag(GF_03MP7401_GET_MATERIAL, 1)
            //Hummel has no shop upgarde to get him this weapon tier and therefore cannot upgrade to it. So we'll give it to him when we hit this level so Hummel isn't stuck with a tier 2 weapon all game.
            GetItem(ICON3D_WP_HUMMEL_002,1)
            EquipWeapon(HUMMEL, ICON3D_WP_HUMMEL_002)
            SetFlag(GF_TBOX_DUMMY082,1)
            GetItem(ICON3D_HIIROKANE,1)
            GetItemMessageExPlus(ICON3D_HIIROKANE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Turn this into Kathleen.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 3.",0,0)
            WaitPrompt()
            WaitCloseWindow()

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 47))
        }
        else if (!FLAG[GF_TBOX_DUMMY083])
        {
            SetFlag(GF_SHOP_RANK_5_02,1)
            SetFlag(GF_TBOX_DUMMY083,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 4.",0,0)
            WaitPrompt()
            WaitCloseWindow()

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] - 130))
            GetItem(ICON3D_AM_023, 1)
            GetItem(ICON3D_WP_DANA_000, 1)
            EquipWeapon(DANA,ICON3D_WP_DANA_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY084])
        {
            SetFlag(GF_SHOP_RANK_5_04,1)
            SetFlag(GF_QS222_SHOP_ADD,1)
            SetFlag(GF_QS310_GET_ITEM,1)
            SetFlag(GF_QS310_GET_ITEM2,1)
            SetFlag(GF_QS310_GET_ITEM3,1)
            SetFlag(GF_TBOX_DUMMY084,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 5.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        else if (!FLAG[GF_TBOX_DUMMY085])
        {
            SetFlag(GF_SHOP_RANK_5_07,1)
            SetFlag(GF_TBOX_DUMMY085,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 6.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        else if (!FLAG[GF_TBOX_DUMMY086])
        {
            SetFlag(GF_SHOP_RANK_6_01,1)
            SetFlag(GF_05MP6349_KILL_BOSS,1)
            SetFlag(GF_QS600_SHOP_ADD,1)
            SetFlag(GF_TBOX_DUMMY086,1)
            SetFlag(GF_NPC_6_03_AFTER_INTERCEPT12,1)
            SetFlag(GF_06MP1201_GOTO_GEND,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank MAX.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        ResetStopFlag(STOPFLAG_TALK)
    }
    
function "0052"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CThanatos#4C Joined the Village.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    

    SetDiaryFlag( DF_JOIN_THANATOS, 1 ) //Footprint memo: Thanatos has joined the Drifting Village.
    SetDiaryCharaFlag( DRCHA_THANATOS, DRCHA_FLAG_OPEN, 1 ) //Person memo: Register when joining (Thanatos)
    SetDiaryCharaFlag( DRCHA_THANATOS, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_THANATOS, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_THANATOS, DRCHA_FLAG_INFO3, 1 )
    JoinNPC( NPC_THANATOS, JOIN_NPC_JOIN ) // Thanatos has become a friend
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )	

    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0551"
{
    GetItem(ICON3D_MT_R4_GOLD,1)
    GetItemMessageExPlus(ICON3D_MT_R4_GOLD,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0380"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CHummel#4C Joined the Party.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetFlag(SF_HUMMEL_JOINED, 1)
    SetFlag(SF_HUMMEL_JOINOK, 1)

    SetDiaryFlag( DF_JOIN_HUMMEL, 1 )
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )
    SetDiaryCharaFlag( DRCHA_HUMMEL, DRCHA_FLAG_OPEN, 1 ) 
    SetDiaryCharaFlag( DRCHA_HUMMEL, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_HUMMEL, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_HUMMEL, DRCHA_FLAG_INFO3, 1 )
    
    if( FLAG[GF_03MP1201_ALARM_INTERCEPT] || FLAG[GF_TBOX_DUMMY082])
    {
        GetItem(ICON3D_WP_HUMMEL_002	, 1)
	    EquipWeapon(HUMMEL, ICON3D_WP_HUMMEL_002)
    }
    
    JoinParty(PARTY_HUMMEL)

    if(FLAG[GF_TBOX_DUMMY111]) //if skill shuffle is on
    {
        CallFunc("rng:0526")
        CallFunc("rng:0527")
    }
	SetLevel(HUMMEL,3) 
	if(LEADER.CHRWORK[CWK_LV] ==1){SetLevel(HUMMEL,1)} 
	else if(LEADER.CHRWORK[CWK_LV] ==2){SetLevel(HUMMEL,2)} 
	else if(LEADER.CHRWORK[CWK_LV] ==3){SetLevel(HUMMEL,3)} 
	else if(LEADER.CHRWORK[CWK_LV] ==4){SetLevel(HUMMEL,4)} 
	else if(LEADER.CHRWORK[CWK_LV] ==5){SetLevel(HUMMEL,5)} 
	else if(LEADER.CHRWORK[CWK_LV] ==6){SetLevel(HUMMEL,6)} 
	else if(LEADER.CHRWORK[CWK_LV] ==7){SetLevel(HUMMEL,7)} 
	else if(LEADER.CHRWORK[CWK_LV] ==8){SetLevel(HUMMEL,8)} 
	else if(LEADER.CHRWORK[CWK_LV] ==9){SetLevel(HUMMEL,9)} 
	else if(LEADER.CHRWORK[CWK_LV] ==10){SetLevel(HUMMEL,10)} 
	else if(LEADER.CHRWORK[CWK_LV] ==11){SetLevel(HUMMEL,11)} 
	else if(LEADER.CHRWORK[CWK_LV] ==12){SetLevel(HUMMEL,12)} 
	else if(LEADER.CHRWORK[CWK_LV] ==13){SetLevel(HUMMEL,13)} 
	else if(LEADER.CHRWORK[CWK_LV] ==14){SetLevel(HUMMEL,14)} 
	else if(LEADER.CHRWORK[CWK_LV] ==15){SetLevel(HUMMEL,15)} 
	else if(LEADER.CHRWORK[CWK_LV] ==16){SetLevel(HUMMEL,16)} 
	else if(LEADER.CHRWORK[CWK_LV] ==17){SetLevel(HUMMEL,17)} 
	else if(LEADER.CHRWORK[CWK_LV] ==18){SetLevel(HUMMEL,18)} 
	else if(LEADER.CHRWORK[CWK_LV] ==19){SetLevel(HUMMEL,19)} 
	else if(LEADER.CHRWORK[CWK_LV] ==20){SetLevel(HUMMEL,20)} 
	else if(LEADER.CHRWORK[CWK_LV] ==21){SetLevel(HUMMEL,21)} 
	else if(LEADER.CHRWORK[CWK_LV] ==22){SetLevel(HUMMEL,22)} 
	else if(LEADER.CHRWORK[CWK_LV] ==23){SetLevel(HUMMEL,23)} 
	else if(LEADER.CHRWORK[CWK_LV] ==24){SetLevel(HUMMEL,24)} 
	else if(LEADER.CHRWORK[CWK_LV] ==25){SetLevel(HUMMEL,25)} 
	else if(LEADER.CHRWORK[CWK_LV] ==26){SetLevel(HUMMEL,26)} 
	else if(LEADER.CHRWORK[CWK_LV] ==27){SetLevel(HUMMEL,27)} 
	else if(LEADER.CHRWORK[CWK_LV] ==28){SetLevel(HUMMEL,28)} 
	else if(LEADER.CHRWORK[CWK_LV] ==29){SetLevel(HUMMEL,29)} 
	else if(LEADER.CHRWORK[CWK_LV] ==30){SetLevel(HUMMEL,30)} 
	else if(LEADER.CHRWORK[CWK_LV] ==31){SetLevel(HUMMEL,31)} 
	else if(LEADER.CHRWORK[CWK_LV] ==32){SetLevel(HUMMEL,32)} 
	else if(LEADER.CHRWORK[CWK_LV] ==33){SetLevel(HUMMEL,33)} 
	else if(LEADER.CHRWORK[CWK_LV] ==34){SetLevel(HUMMEL,34)} 
	else if(LEADER.CHRWORK[CWK_LV] ==35){SetLevel(HUMMEL,35)} 
	else if(LEADER.CHRWORK[CWK_LV] ==36){SetLevel(HUMMEL,36)} 
	else if(LEADER.CHRWORK[CWK_LV] ==37){SetLevel(HUMMEL,37)} 
	else if(LEADER.CHRWORK[CWK_LV] ==38){SetLevel(HUMMEL,38)} 
	else if(LEADER.CHRWORK[CWK_LV] ==39){SetLevel(HUMMEL,39)} 
	else if(LEADER.CHRWORK[CWK_LV] ==40){SetLevel(HUMMEL,40)} 
	else if(LEADER.CHRWORK[CWK_LV] ==41){SetLevel(HUMMEL,41)} 
	else if(LEADER.CHRWORK[CWK_LV] ==42){SetLevel(HUMMEL,42)} 
	else if(LEADER.CHRWORK[CWK_LV] ==43){SetLevel(HUMMEL,43)} 
	else if(LEADER.CHRWORK[CWK_LV] ==44){SetLevel(HUMMEL,44)} 
	else if(LEADER.CHRWORK[CWK_LV] ==45){SetLevel(HUMMEL,45)} 
	else if(LEADER.CHRWORK[CWK_LV] ==46){SetLevel(HUMMEL,46)} 
	else if(LEADER.CHRWORK[CWK_LV] ==47){SetLevel(HUMMEL,47)} 
	else if(LEADER.CHRWORK[CWK_LV] ==48){SetLevel(HUMMEL,48)} 
	else if(LEADER.CHRWORK[CWK_LV] ==49){SetLevel(HUMMEL,49)} 
	else if(LEADER.CHRWORK[CWK_LV] ==50){SetLevel(HUMMEL,50)} 
	else if(LEADER.CHRWORK[CWK_LV] ==51){SetLevel(HUMMEL,51)} 
	else if(LEADER.CHRWORK[CWK_LV] ==52){SetLevel(HUMMEL,52)} 
	else if(LEADER.CHRWORK[CWK_LV] ==53){SetLevel(HUMMEL,53)} 
	else if(LEADER.CHRWORK[CWK_LV] ==54){SetLevel(HUMMEL,54)} 
	else if(LEADER.CHRWORK[CWK_LV] ==55){SetLevel(HUMMEL,55)} 
	else if(LEADER.CHRWORK[CWK_LV] ==56){SetLevel(HUMMEL,56)} 
	else if(LEADER.CHRWORK[CWK_LV] ==57){SetLevel(HUMMEL,57)} 
	else if(LEADER.CHRWORK[CWK_LV] ==58){SetLevel(HUMMEL,58)} 
	else if(LEADER.CHRWORK[CWK_LV] ==59){SetLevel(HUMMEL,59)} 
	else if(LEADER.CHRWORK[CWK_LV] ==60){SetLevel(HUMMEL,60)} 
	else if(LEADER.CHRWORK[CWK_LV] ==61){SetLevel(HUMMEL,61)} 
	else if(LEADER.CHRWORK[CWK_LV] ==62){SetLevel(HUMMEL,62)} 
	else if(LEADER.CHRWORK[CWK_LV] ==63){SetLevel(HUMMEL,63)} 
	else if(LEADER.CHRWORK[CWK_LV] ==64){SetLevel(HUMMEL,64)} 
	else if(LEADER.CHRWORK[CWK_LV] ==65){SetLevel(HUMMEL,65)} 
	else if(LEADER.CHRWORK[CWK_LV] ==66){SetLevel(HUMMEL,66)} 
	else if(LEADER.CHRWORK[CWK_LV] ==67){SetLevel(HUMMEL,67)} 
	else if(LEADER.CHRWORK[CWK_LV] ==68){SetLevel(HUMMEL,68)} 
	else if(LEADER.CHRWORK[CWK_LV] ==69){SetLevel(HUMMEL,69)} 
	else if(LEADER.CHRWORK[CWK_LV] ==70){SetLevel(HUMMEL,70)} 
	else if(LEADER.CHRWORK[CWK_LV] ==71){SetLevel(HUMMEL,71)} 
	else if(LEADER.CHRWORK[CWK_LV] ==72){SetLevel(HUMMEL,72)} 
	else if(LEADER.CHRWORK[CWK_LV] ==73){SetLevel(HUMMEL,73)} 
	else if(LEADER.CHRWORK[CWK_LV] ==74){SetLevel(HUMMEL,74)} 
	else if(LEADER.CHRWORK[CWK_LV] ==75){SetLevel(HUMMEL,75)} 
	else if(LEADER.CHRWORK[CWK_LV] ==76){SetLevel(HUMMEL,76)} 
	else if(LEADER.CHRWORK[CWK_LV] ==77){SetLevel(HUMMEL,77)} 
	else if(LEADER.CHRWORK[CWK_LV] ==78){SetLevel(HUMMEL,78)} 
	else if(LEADER.CHRWORK[CWK_LV] ==79){SetLevel(HUMMEL,79)} 
	else if(LEADER.CHRWORK[CWK_LV] ==80){SetLevel(HUMMEL,80)} 
	else if(LEADER.CHRWORK[CWK_LV] ==81){SetLevel(HUMMEL,81)} 
	else if(LEADER.CHRWORK[CWK_LV] ==82){SetLevel(HUMMEL,82)} 
	else if(LEADER.CHRWORK[CWK_LV] ==83){SetLevel(HUMMEL,83)} 
	else if(LEADER.CHRWORK[CWK_LV] ==84){SetLevel(HUMMEL,84)} 
	else if(LEADER.CHRWORK[CWK_LV] ==85){SetLevel(HUMMEL,85)} 
	else if(LEADER.CHRWORK[CWK_LV] ==86){SetLevel(HUMMEL,86)} 
	else if(LEADER.CHRWORK[CWK_LV] ==87){SetLevel(HUMMEL,87)} 
	else if(LEADER.CHRWORK[CWK_LV] ==88){SetLevel(HUMMEL,88)} 
	else if(LEADER.CHRWORK[CWK_LV] ==89){SetLevel(HUMMEL,89)} 
	else if(LEADER.CHRWORK[CWK_LV] ==90){SetLevel(HUMMEL,90)} 
	else if(LEADER.CHRWORK[CWK_LV] ==91){SetLevel(HUMMEL,91)} 
	else if(LEADER.CHRWORK[CWK_LV] ==92){SetLevel(HUMMEL,92)} 
	else if(LEADER.CHRWORK[CWK_LV] ==93){SetLevel(HUMMEL,93)} 
	else if(LEADER.CHRWORK[CWK_LV] ==94){SetLevel(HUMMEL,94)} 
	else if(LEADER.CHRWORK[CWK_LV] ==95){SetLevel(HUMMEL,95)} 
	else if(LEADER.CHRWORK[CWK_LV] ==96){SetLevel(HUMMEL,96)} 
	else if(LEADER.CHRWORK[CWK_LV] ==97){SetLevel(HUMMEL,97)} 
	else if(LEADER.CHRWORK[CWK_LV] ==98){SetLevel(HUMMEL,98)} 
	else{SetLevel(HUMMEL,99)} 

    
    ResetStopFlag(STOPFLAG_TALK)
}

    function "0187"
    {
        SetStopFlag(STOPFLAG_TALK)
        if (!FLAG[GF_02MP1201_JOIN_KATRIN])
        {
            GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CKathleen#4C  Joined the Village.",0,0)
            WaitPrompt()
            WaitCloseWindow()        
            
    SetDiaryFlag( DF_JOIN_KATRIN, 1 ) //Footprint memo: Rescued Katrin.
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_OPEN, 1 ) //Person memo: Register when joining (Katrin)
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO1, 1 ) 
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_KATRIN, DRCHA_FLAG_INFO3, 1 )
    JoinNPC( NPC_KATRIN, JOIN_NPC_JOIN ) // Katrin has joined
    SetFlag( GF_02MP1201_JOIN_KATRIN , 1 )
    
    SetFlag(GF_SMITHY_LV,2) //Blacksmith level setting
    //SetFlag( GF_CAMP_SHIPYARD_LV, 1 ) // Drifting village development settings: Shipyard LV1
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )
    GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Weapons can now be reforged.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetDiaryShopFlag(SHOP_ID_WEAPON_A,0) // "Forge (enhanced)"
    SetDiaryShopFlag(SHOP_ID_WEAPON,1) // "Katlin's Weapon Workshop (Enhancement/Evolution)"
    SetDiaryShopFlag(SHOP_ID_ARMOR,1) // "Katlin's Weapon Workshop (Purchase Armor)"


            
            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 41))
            SetChrWork(RICOTTA,CWK_SUP_STR,(RICOTTA.CHRWORK[CWK_SUP_STR] + 33))
            SetChrWork(HUMMEL,CWK_SUP_STR,(HUMMEL.CHRWORK[CWK_SUP_STR] - 18))
            GetItem(ICON3D_WP_HUMMEL_000, 1)
            GetItem(ICON3D_AM_021, 1)
            EquipWeapon(HUMMEL,ICON3D_WP_HUMMEL_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY081])
        {
            SetFlag(GF_SHOP_RANK_3_02,1)
            SetFlag(GF_02MP4309_KILL_SPIDER,1)
            SetFlag(GF_QS201_SHOP_ADD,1)
            SetFlag(GF_TBOX_DUMMY081,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 2.",0,0)
            WaitPrompt()
            WaitCloseWindow()  

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 34))
            SetChrWork(RICOTTA,CWK_SUP_STR,(RICOTTA.CHRWORK[CWK_SUP_STR] - 55))
            GetItem(ICON3D_WP_RICOTTA_000, 1)
            GetItem(ICON3D_AM_022, 1)
            EquipWeapon(RICOTTA,ICON3D_WP_RICOTTA_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY082])
        {
            SetFlag(GF_SHOP_RANK_3_05,1)
            SetFlag(GF_SHOP_RANK_4_01,1)
            //The flag here is the trigger for speaking with Kathleen about the orichalcum and having new weapons made.
            //That event then trips the flag for being able to kill enemies flagged as Saurians.
            SetFlag(GF_03MP7401_GET_MATERIAL, 1)
            //Hummel has no shop upgarde to get him this weapon tier and therefore cannot upgrade to it. So we'll give it to him when we hit this level so Hummel isn't stuck with a tier 2 weapon all game.
            GetItem(ICON3D_WP_HUMMEL_002,1)
            EquipWeapon(HUMMEL, ICON3D_WP_HUMMEL_002)
            SetFlag(GF_TBOX_DUMMY082,1)
            GetItem(ICON3D_HIIROKANE,1)
            GetItemMessageExPlus(ICON3D_HIIROKANE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Turn this into Kathleen.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 3.",0,0)
            WaitPrompt()
            WaitCloseWindow()

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] + 47))
        }
        else if (!FLAG[GF_TBOX_DUMMY083])
        {
            SetFlag(GF_SHOP_RANK_5_02,1)
            SetFlag(GF_TBOX_DUMMY083,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 4.",0,0)
            WaitPrompt()
            WaitCloseWindow()

            SetChrWork(DANA,CWK_SUP_STR,(DANA.CHRWORK[CWK_SUP_STR] - 130))
            GetItem(ICON3D_AM_023, 1)
            GetItem(ICON3D_WP_DANA_000, 1)
            EquipWeapon(DANA,ICON3D_WP_DANA_000)
        }
        else if (!FLAG[GF_TBOX_DUMMY084])
        {
            SetFlag(GF_SHOP_RANK_5_04,1)
            SetFlag(GF_QS222_SHOP_ADD,1)
            SetFlag(GF_QS310_GET_ITEM,1)
            SetFlag(GF_QS310_GET_ITEM2,1)
            SetFlag(GF_QS310_GET_ITEM3,1)
            SetFlag(GF_TBOX_DUMMY084,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 5.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        else if (!FLAG[GF_TBOX_DUMMY085])
        {
            SetFlag(GF_SHOP_RANK_5_07,1)
            SetFlag(GF_TBOX_DUMMY085,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank 6.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        else if (!FLAG[GF_TBOX_DUMMY086])
        {
            SetFlag(GF_SHOP_RANK_6_01,1)
            SetFlag(GF_05MP6349_KILL_BOSS,1)
            SetFlag(GF_QS600_SHOP_ADD,1)
            SetFlag(GF_TBOX_DUMMY086,1)
            SetFlag(GF_NPC_6_03_AFTER_INTERCEPT12,1)
            SetFlag(GF_06MP1201_GOTO_GEND,1)
            GetItem(ICON3D_FIRESTONE,1)
            GetItemMessageExPlus(ICON3D_FIRESTONE,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
            WaitPrompt()
            WaitCloseWindow()
            GetItemMessageExPlus(-1,0,ITEMMSG_SE_NORMAL,"Shops have been upgraded: Rank MAX.",0,0)
            WaitPrompt()
            WaitCloseWindow()
        }
        ResetStopFlag(STOPFLAG_TALK)
    }
    
function "0404"
{
    
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_BETTER,"#2CLaxia#4C Joined the Party.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetFlag(SF_LAXIA_JOINED, 1)
    SetFlag(SF_LAXIA_JOINOK, 1)
 
    SetDiaryFlag( DF_JOIN_LAXIA, 1 )	
    SetDiaryCharaFlag( DRCHA_LAXIA, DRCHA_FLAG_OPEN, 1 )
    SetDiaryCharaFlag( DRCHA_LAXIA, DRCHA_FLAG_INFO1, 1 ) //Person memo: Additional information release 1 (Dogi)
    SetDiaryCharaFlag( DRCHA_LAXIA, DRCHA_FLAG_INFO2, 1 ) 
    SetDiaryCharaFlag( DRCHA_LAXIA, DRCHA_FLAG_INFO3, 1 )
    GetItem(ICON3D_WP_LAXIA_000, 1)
    EquipWeapon(LAXIA,ICON3D_WP_LAXIA_000)
    SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 2) )
    
    if( FLAG[GF_03MP1201_ALARM_INTERCEPT])
    {
        GetItem(ICON3D_WP_LAXIA_003, 1)		
	    EquipWeapon(LAXIA, ICON3D_WP_LAXIA_003)
    }

    JoinParty(PARTY_LAXIA)

    if(FLAG[GF_TBOX_DUMMY111]) //if skill shuffle is on
    {
        CallFunc("rng:0522")
        CallFunc("rng:0523")
    }
	SetLevel(LAXIA,3) 
	if(LEADER.CHRWORK[CWK_LV] ==1){SetLevel(LAXIA,1)} 
	else if(LEADER.CHRWORK[CWK_LV] ==2){SetLevel(LAXIA,2)} 
	else if(LEADER.CHRWORK[CWK_LV] ==3){SetLevel(LAXIA,3)} 
	else if(LEADER.CHRWORK[CWK_LV] ==4){SetLevel(LAXIA,4)} 
	else if(LEADER.CHRWORK[CWK_LV] ==5){SetLevel(LAXIA,5)} 
	else if(LEADER.CHRWORK[CWK_LV] ==6){SetLevel(LAXIA,6)} 
	else if(LEADER.CHRWORK[CWK_LV] ==7){SetLevel(LAXIA,7)} 
	else if(LEADER.CHRWORK[CWK_LV] ==8){SetLevel(LAXIA,8)} 
	else if(LEADER.CHRWORK[CWK_LV] ==9){SetLevel(LAXIA,9)} 
	else if(LEADER.CHRWORK[CWK_LV] ==10){SetLevel(LAXIA,10)} 
	else if(LEADER.CHRWORK[CWK_LV] ==11){SetLevel(LAXIA,11)} 
	else if(LEADER.CHRWORK[CWK_LV] ==12){SetLevel(LAXIA,12)} 
	else if(LEADER.CHRWORK[CWK_LV] ==13){SetLevel(LAXIA,13)} 
	else if(LEADER.CHRWORK[CWK_LV] ==14){SetLevel(LAXIA,14)} 
	else if(LEADER.CHRWORK[CWK_LV] ==15){SetLevel(LAXIA,15)} 
	else if(LEADER.CHRWORK[CWK_LV] ==16){SetLevel(LAXIA,16)} 
	else if(LEADER.CHRWORK[CWK_LV] ==17){SetLevel(LAXIA,17)} 
	else if(LEADER.CHRWORK[CWK_LV] ==18){SetLevel(LAXIA,18)} 
	else if(LEADER.CHRWORK[CWK_LV] ==19){SetLevel(LAXIA,19)} 
	else if(LEADER.CHRWORK[CWK_LV] ==20){SetLevel(LAXIA,20)} 
	else if(LEADER.CHRWORK[CWK_LV] ==21){SetLevel(LAXIA,21)} 
	else if(LEADER.CHRWORK[CWK_LV] ==22){SetLevel(LAXIA,22)} 
	else if(LEADER.CHRWORK[CWK_LV] ==23){SetLevel(LAXIA,23)} 
	else if(LEADER.CHRWORK[CWK_LV] ==24){SetLevel(LAXIA,24)} 
	else if(LEADER.CHRWORK[CWK_LV] ==25){SetLevel(LAXIA,25)} 
	else if(LEADER.CHRWORK[CWK_LV] ==26){SetLevel(LAXIA,26)} 
	else if(LEADER.CHRWORK[CWK_LV] ==27){SetLevel(LAXIA,27)} 
	else if(LEADER.CHRWORK[CWK_LV] ==28){SetLevel(LAXIA,28)} 
	else if(LEADER.CHRWORK[CWK_LV] ==29){SetLevel(LAXIA,29)} 
	else if(LEADER.CHRWORK[CWK_LV] ==30){SetLevel(LAXIA,30)} 
	else if(LEADER.CHRWORK[CWK_LV] ==31){SetLevel(LAXIA,31)} 
	else if(LEADER.CHRWORK[CWK_LV] ==32){SetLevel(LAXIA,32)} 
	else if(LEADER.CHRWORK[CWK_LV] ==33){SetLevel(LAXIA,33)} 
	else if(LEADER.CHRWORK[CWK_LV] ==34){SetLevel(LAXIA,34)} 
	else if(LEADER.CHRWORK[CWK_LV] ==35){SetLevel(LAXIA,35)} 
	else if(LEADER.CHRWORK[CWK_LV] ==36){SetLevel(LAXIA,36)} 
	else if(LEADER.CHRWORK[CWK_LV] ==37){SetLevel(LAXIA,37)} 
	else if(LEADER.CHRWORK[CWK_LV] ==38){SetLevel(LAXIA,38)} 
	else if(LEADER.CHRWORK[CWK_LV] ==39){SetLevel(LAXIA,39)} 
	else if(LEADER.CHRWORK[CWK_LV] ==40){SetLevel(LAXIA,40)} 
	else if(LEADER.CHRWORK[CWK_LV] ==41){SetLevel(LAXIA,41)} 
	else if(LEADER.CHRWORK[CWK_LV] ==42){SetLevel(LAXIA,42)} 
	else if(LEADER.CHRWORK[CWK_LV] ==43){SetLevel(LAXIA,43)} 
	else if(LEADER.CHRWORK[CWK_LV] ==44){SetLevel(LAXIA,44)} 
	else if(LEADER.CHRWORK[CWK_LV] ==45){SetLevel(LAXIA,45)} 
	else if(LEADER.CHRWORK[CWK_LV] ==46){SetLevel(LAXIA,46)} 
	else if(LEADER.CHRWORK[CWK_LV] ==47){SetLevel(LAXIA,47)} 
	else if(LEADER.CHRWORK[CWK_LV] ==48){SetLevel(LAXIA,48)} 
	else if(LEADER.CHRWORK[CWK_LV] ==49){SetLevel(LAXIA,49)} 
	else if(LEADER.CHRWORK[CWK_LV] ==50){SetLevel(LAXIA,50)} 
	else if(LEADER.CHRWORK[CWK_LV] ==51){SetLevel(LAXIA,51)} 
	else if(LEADER.CHRWORK[CWK_LV] ==52){SetLevel(LAXIA,52)} 
	else if(LEADER.CHRWORK[CWK_LV] ==53){SetLevel(LAXIA,53)} 
	else if(LEADER.CHRWORK[CWK_LV] ==54){SetLevel(LAXIA,54)} 
	else if(LEADER.CHRWORK[CWK_LV] ==55){SetLevel(LAXIA,55)} 
	else if(LEADER.CHRWORK[CWK_LV] ==56){SetLevel(LAXIA,56)} 
	else if(LEADER.CHRWORK[CWK_LV] ==57){SetLevel(LAXIA,57)} 
	else if(LEADER.CHRWORK[CWK_LV] ==58){SetLevel(LAXIA,58)} 
	else if(LEADER.CHRWORK[CWK_LV] ==59){SetLevel(LAXIA,59)} 
	else if(LEADER.CHRWORK[CWK_LV] ==60){SetLevel(LAXIA,60)} 
	else if(LEADER.CHRWORK[CWK_LV] ==61){SetLevel(LAXIA,61)} 
	else if(LEADER.CHRWORK[CWK_LV] ==62){SetLevel(LAXIA,62)} 
	else if(LEADER.CHRWORK[CWK_LV] ==63){SetLevel(LAXIA,63)} 
	else if(LEADER.CHRWORK[CWK_LV] ==64){SetLevel(LAXIA,64)} 
	else if(LEADER.CHRWORK[CWK_LV] ==65){SetLevel(LAXIA,65)} 
	else if(LEADER.CHRWORK[CWK_LV] ==66){SetLevel(LAXIA,66)} 
	else if(LEADER.CHRWORK[CWK_LV] ==67){SetLevel(LAXIA,67)} 
	else if(LEADER.CHRWORK[CWK_LV] ==68){SetLevel(LAXIA,68)} 
	else if(LEADER.CHRWORK[CWK_LV] ==69){SetLevel(LAXIA,69)} 
	else if(LEADER.CHRWORK[CWK_LV] ==70){SetLevel(LAXIA,70)} 
	else if(LEADER.CHRWORK[CWK_LV] ==71){SetLevel(LAXIA,71)} 
	else if(LEADER.CHRWORK[CWK_LV] ==72){SetLevel(LAXIA,72)} 
	else if(LEADER.CHRWORK[CWK_LV] ==73){SetLevel(LAXIA,73)} 
	else if(LEADER.CHRWORK[CWK_LV] ==74){SetLevel(LAXIA,74)} 
	else if(LEADER.CHRWORK[CWK_LV] ==75){SetLevel(LAXIA,75)} 
	else if(LEADER.CHRWORK[CWK_LV] ==76){SetLevel(LAXIA,76)} 
	else if(LEADER.CHRWORK[CWK_LV] ==77){SetLevel(LAXIA,77)} 
	else if(LEADER.CHRWORK[CWK_LV] ==78){SetLevel(LAXIA,78)} 
	else if(LEADER.CHRWORK[CWK_LV] ==79){SetLevel(LAXIA,79)} 
	else if(LEADER.CHRWORK[CWK_LV] ==80){SetLevel(LAXIA,80)} 
	else if(LEADER.CHRWORK[CWK_LV] ==81){SetLevel(LAXIA,81)} 
	else if(LEADER.CHRWORK[CWK_LV] ==82){SetLevel(LAXIA,82)} 
	else if(LEADER.CHRWORK[CWK_LV] ==83){SetLevel(LAXIA,83)} 
	else if(LEADER.CHRWORK[CWK_LV] ==84){SetLevel(LAXIA,84)} 
	else if(LEADER.CHRWORK[CWK_LV] ==85){SetLevel(LAXIA,85)} 
	else if(LEADER.CHRWORK[CWK_LV] ==86){SetLevel(LAXIA,86)} 
	else if(LEADER.CHRWORK[CWK_LV] ==87){SetLevel(LAXIA,87)} 
	else if(LEADER.CHRWORK[CWK_LV] ==88){SetLevel(LAXIA,88)} 
	else if(LEADER.CHRWORK[CWK_LV] ==89){SetLevel(LAXIA,89)} 
	else if(LEADER.CHRWORK[CWK_LV] ==90){SetLevel(LAXIA,90)} 
	else if(LEADER.CHRWORK[CWK_LV] ==91){SetLevel(LAXIA,91)} 
	else if(LEADER.CHRWORK[CWK_LV] ==92){SetLevel(LAXIA,92)} 
	else if(LEADER.CHRWORK[CWK_LV] ==93){SetLevel(LAXIA,93)} 
	else if(LEADER.CHRWORK[CWK_LV] ==94){SetLevel(LAXIA,94)} 
	else if(LEADER.CHRWORK[CWK_LV] ==95){SetLevel(LAXIA,95)} 
	else if(LEADER.CHRWORK[CWK_LV] ==96){SetLevel(LAXIA,96)} 
	else if(LEADER.CHRWORK[CWK_LV] ==97){SetLevel(LAXIA,97)} 
	else if(LEADER.CHRWORK[CWK_LV] ==98){SetLevel(LAXIA,98)} 
	else{SetLevel(LAXIA,99)} 

    
}

function "0398"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_004,1)
    GetItemMessageExPlus(ICON3D_AC_004,1,ITEMMSG_SE_JINGLE," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0483"
{
    GetItem(ICON3D_DASH_BOOTS,1)
    GetItemMessageExPlus(ICON3D_DASH_BOOTS,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0465"
{
    GetItem(ICON3D_GATHERITEM,1)
    GetItemMessageExPlus(ICON3D_GATHERITEM,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0426"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_048,1)
    GetItemMessageExPlus(ICON3D_AC_048,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0456"
{
    GetItem(ICON3D_US_ADD_SP,1)
    GetItemMessageExPlus(ICON3D_US_ADD_SP,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0459"
{
    GetItem(ICON3D_US_SKILL_BOOK_L,1)
    GetItemMessageExPlus(ICON3D_US_SKILL_BOOK_L,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0484"
{
    GetItem(ICON3D_US_SEARCH_BOOK03,1)
    GetItemMessageExPlus(ICON3D_US_SEARCH_BOOK03,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0580"
{
    GetItem(ICON3D_US_SKILL_BOOK_A,1)
    GetItemMessageExPlus(ICON3D_US_SKILL_BOOK_A,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0137"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_LAXIA,SKILL_LAXIA_SP_C4,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CLaxia has learned skill #2CNeedle Break#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0458"
{

    GetSkill(PARTY_HUMMEL,SKILL_HUMMEL_SP_B2,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CHummel has learned skill #2CTriple Bomber#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0583"
{
    GetItem(ICON3D_AC_049,1)
    GetItemMessageExPlus(ICON3D_AC_049,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0139"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_SKILL_BOOK_H,1)
    GetItemMessageExPlus(ICON3D_US_SKILL_BOOK_H,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0138"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_RICOTTA,SKILL_RICOTTA_SP_C1,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CRicotta has learned skill #2CWild Spin#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0232"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_RICOTTA,SKILL_RICOTTA_SP_A2,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CRicotta has learned skill #2CSpiral Drive#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0106"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R5_STONE,1)
    GetItemMessageExPlus(ICON3D_MT_R5_STONE,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0124"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_DANA,SKILL_DANA_SP_B3,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CDana has learned skill #2CBoomerang Edge#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0450"
{
    GetItem(ICON3D_DRUG_RECIPE05,1)
    GetItemMessageExPlus(ICON3D_DRUG_RECIPE05,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0115"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_ADOL,SKILL_ADOL_SP_A3,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CAdol has learned skill #2CBrave Charge#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0076"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_SEARCH_BOOK02,1)
    GetItemMessageExPlus(ICON3D_US_SEARCH_BOOK02,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0075"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_HUMMEL,SKILL_HUMMEL_SP_B5,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CHummel has learned skill #2CAssault Rain#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0155"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_LAXIA,SKILL_LAXIA_SP_B4,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CLaxia has learned skill #2CSpark Chaser#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0409"
{
    GetItem(ICON3D_DRUG_RECIPE09,1)
    GetItemMessageExPlus(ICON3D_DRUG_RECIPE09,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0145"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_DANA,SKILL_DANA_SP_C1,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CDana has learned skill #2CTwin Edge#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0091"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_ADD_SP,1)
    GetItemMessageExPlus(ICON3D_US_ADD_SP,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0128"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_ADOL,SKILL_ADOL_SP_B5,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CAdol has learned skill #2CAura Blade#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0386"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_SAHAD,SKILL_SAHAD_SP_B4,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CSahad has learned skill #2CSeine Toss#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0163"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R5_STONE,1)
    GetItemMessageExPlus(ICON3D_MT_R5_STONE,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0192"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_RICOTTA,SKILL_RICOTTA_SP_B5,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CRicotta has learned skill #2CGreen Whip#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0018"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_ADOL,SKILL_ADOL_SP_B1,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CAdol has learned skill #2CForce Edge#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    EventCue("mp0405:EV_M05S170_ED")
    ResetStopFlag(STOPFLAG_TALK)
}

function "0444"
{

    GetSkill(PARTY_HUMMEL,SKILL_HUMMEL_SP_B3,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CHummel has learned skill #2CJudgment#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0478"
{
    GetItem(ICON3D_AR_052,1)
    GetItemMessageExPlus(ICON3D_AR_052,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0576"
{
    GetItem(ICON3D_MT_R5_STONE,1)
    GetItemMessageExPlus(ICON3D_MT_R5_STONE,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0006"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_LAXIA,SKILL_LAXIA_SP_B1,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CLaxia has learned skill #2CStun Thrust#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0581"
{
    GetItem(ICON3D_US_SEARCH_BOOK01,1)
    GetItemMessageExPlus(ICON3D_US_SEARCH_BOOK01,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0533"
{
    GetItem(ICON3D_AC_062,1)
    GetItemMessageExPlus(ICON3D_AC_062,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0480"
{
    GetItem(ICON3D_US_RESSURECT_02,1)
    GetItemMessageExPlus(ICON3D_US_RESSURECT_02,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0516"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_DANA,SKILL_DANA_SP_C2,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CDana has learned skill #2CSonic Rise#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0447"
{

    GetSkill(PARTY_LAXIA,SKILL_LAXIA_SP_C2,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CLaxia has learned skill #2CWake Up!#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0022"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_SKILL_BOOK_D,1)
    GetItemMessageExPlus(ICON3D_US_SKILL_BOOK_D,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0563"
{

    GetSkill(PARTY_RICOTTA,SKILL_RICOTTA_SP_B1,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CRicotta has learned skill #2CFlame Swing#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0123"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_SAHAD,SKILL_SAHAD_SP_C4,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CSahad has learned skill #2CGale Blow#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0248"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_ADOL,SKILL_ADOL_SP_C3,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CAdol has learned skill #2CRising Slash#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0088"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_SAHAD,SKILL_SAHAD_SP_B2,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CSahad has learned skill #2CGreat Ram#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0132"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_LAXIA,SKILL_LAXIA_SP_C1,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CLaxia has learned skill #2CDagger Fling#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0240"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_ADD_SP,1)
    GetItemMessageExPlus(ICON3D_US_ADD_SP,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0540"
{
    GetItem(ICON3D_US_SEARCH_BOOK04,1)
    GetItemMessageExPlus(ICON3D_US_SEARCH_BOOK04,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0460"
{

    GetSkill(PARTY_SAHAD,SKILL_SAHAD_SP_B1,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CSahad has learned skill #2CVortex#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0433"
{

    GetSkill(PARTY_ADOL,SKILL_ADOL_SP_A2,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CAdol has learned skill #2CThrust Storm#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0104"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_DANA,SKILL_DANA_SP_B4,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CDana has learned skill #2CDragon Wave#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0086"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_DANA,SKILL_DANA_SP_B5,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CDana has learned skill #2CMistral Edge#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0074"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_DANA,SKILL_DANA_SP_B1,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CDana has learned skill #2CEarth Dragon#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0252"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_ADOL,SKILL_ADOL_SP_C4,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CAdol has learned skill #2CSword Impact#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0411"
{

    GetSkill(PARTY_ADOL,SKILL_ADOL_SP_A1,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CAdol has learned skill #2CBlade Rush#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0275"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_RICOTTA,SKILL_RICOTTA_SP_C4,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CRicotta has learned skill #2CBandit Tackle#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0012"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_RICOTTA,SKILL_RICOTTA_SP_B4,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CRicotta has learned skill #2CBeast Attack#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0231"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_HUMMEL,SKILL_HUMMEL_SP_C1,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CHummel has learned skill #2CBurst Shot#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0464"
{
    GetItem(ICON3D_US_ADD_SP,1)
    GetItemMessageExPlus(ICON3D_US_ADD_SP,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0067"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_HUMMEL,SKILL_HUMMEL_SP_B4,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CHummel has learned skill #2CCounter Trick#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0554"
{

    GetSkill(PARTY_LAXIA,SKILL_LAXIA_SP_A3,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CLaxia has learned skill #2CLethal Raid#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0499"
{
    GetItem(ICON3D_AC_059,1)
    GetItemMessageExPlus(ICON3D_AC_059,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0236"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_DANA,SKILL_DANA_SP_B2,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CDana has learned skill #2CTwin Moon Blade#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0057"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_041,1)
    GetItemMessageExPlus(ICON3D_AC_041,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0129"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_SKILL_BOOK_S,1)
    GetItemMessageExPlus(ICON3D_US_SKILL_BOOK_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0063"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_547,1)
    GetItemMessageExPlus(ICON3D_AC_547,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0024"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_SAHAD,SKILL_SAHAD_SP_A2,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CSahad has learned skill #2CRaging Deluge#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0466"
{

    GetSkill(PARTY_SAHAD,SKILL_SAHAD_SP_A1,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CSahad has learned skill #2CMagna Wave#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0160"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_061,1)
    GetItemMessageExPlus(ICON3D_AC_061,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0468"
{
    GetItem(ICON3D_US_RESSURECT_02,1)
    GetItemMessageExPlus(ICON3D_US_RESSURECT_02,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0538"
{

    GetSkill(PARTY_SAHAD,SKILL_SAHAD_SP_A3,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CSahad has learned skill #2CSpiral Anchor#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0209"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_DANA,SKILL_DANA_SP_A3,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CDana has learned skill #2CWater Burst#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0001"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_ADD_SP,1)
    GetItemMessageExPlus(ICON3D_US_ADD_SP,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0078"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_WP_ADOL_009,1) //rusty sword is the best representation of broken weapon I can think of
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#2CBroken Mistilteinn#0C Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetFlag(GF_TBOX_DUMMY071,1)
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0445"
{

    GetSkill(PARTY_SAHAD,SKILL_SAHAD_SP_B5,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CSahad has learned skill #2CUpper Break#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0422"
{

    GetSkill(PARTY_HUMMEL,SKILL_HUMMEL_SP_A2,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CHummel has learned skill #2CProminence Shot#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0040"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_EXSPEEDUP,1)
    GetItemMessageExPlus(ICON3D_EXSPEEDUP,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0193"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_EXTRA_02,1)
    GetItemMessageExPlus(ICON3D_US_EXTRA_02,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0152"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_549,1)
    GetItemMessageExPlus(ICON3D_AC_549,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0265"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_WP_ADOL_009,1) //rusty sword is the best representation of broken weapon I can think of
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#2CBroken Spirit Ring#4C Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    SetFlag(GF_TBOX_DUMMY108,1)
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0120"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_SAHAD,SKILL_SAHAD_SP_C2,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CSahad has learned skill #2CGrand Anchor#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0027"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_LAXIA,SKILL_LAXIA_SP_B2,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CLaxia has learned skill #2CBlitz Charge#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0017"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_048,1)
    GetItemMessageExPlus(ICON3D_AC_048,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0542"
{

    GetSkill(PARTY_HUMMEL,SKILL_HUMMEL_SP_B1,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CHummel has learned skill #2CGuilty Raid#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0546"
{

    GetSkill(PARTY_HUMMEL,SKILL_HUMMEL_SP_A1,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CHummel has learned skill #2CHasty Valor#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0037"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_LAXIA,SKILL_LAXIA_SP_B5,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CLaxia has learned skill #2CEagle Lancer#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0494"
{

    GetSkill(PARTY_RICOTTA,SKILL_RICOTTA_SP_A1,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CRicotta has learned skill #2CTriple Bang#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0482"
{

    GetSkill(PARTY_RICOTTA,SKILL_RICOTTA_SP_C3,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CRicotta has learned skill #2CScrew Fang#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0201"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_DANA,SKILL_DANA_SP_C3,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CDana has learned skill #2CElemental Shot#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0390"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_LAXIA,SKILL_LAXIA_SP_A1,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CLaxia has learned skill #2CPiercing Tempest#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0190"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_ADOL,SKILL_ADOL_SP_C2,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CAdol has learned skill #2CArc Shot#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0058"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_SKILL_BOOK_R,1)
    GetItemMessageExPlus(ICON3D_US_SKILL_BOOK_R,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0220"
{
    SetStopFlag(STOPFLAG_TALK)
    
    GetSkill(PARTY_RICOTTA,SKILL_RICOTTA_SP_B2,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CRicotta has learned skill #2CMighty Orbit#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()  
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0401"
{

    GetSkill(PARTY_ADOL,SKILL_ADOL_SP_B3,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CAdol has learned skill #2CSky Drive#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0560"
{

    GetSkill(PARTY_HUMMEL,SKILL_HUMMEL_SP_C3,1)
    GetItemMessageExPlus(-1,1,ITEMMSG_SE_NORMAL,"#4CHummel has learned skill #2CSomersault#4C.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0550"
{
    GetItem(ICON3D_US_ADD_EXP_01,1)
    GetItemMessageExPlus(ICON3D_US_ADD_EXP_01,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0090"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_ADD_EXP_02,1)
    GetItemMessageExPlus(ICON3D_US_ADD_EXP_02,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0272"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_ADD_EXP_03,1)
    GetItemMessageExPlus(ICON3D_US_ADD_EXP_03,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0537"
{
    GetItem(ICON3D_US_DRAGONFRUIT_S,1)
    GetItemMessageExPlus(ICON3D_US_DRAGONFRUIT_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0199"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AR_048,1)
    GetItemMessageExPlus(ICON3D_AR_048,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0267"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_SEED_TOMATO,1)
    GetItemMessageExPlus(ICON3D_SEED_TOMATO,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0031"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N3_STONE,2)
    GetItemMessageExPlus(ICON3D_MT_N3_STONE,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0400"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R3_PARTS04,2)
    GetItemMessageExPlus(ICON3D_MT_R3_PARTS04,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0393"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MEMO_R_003,1)
    GetItemMessageExPlus(ICON3D_MEMO_R_003,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0166"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N3_STONE,2)
    GetItemMessageExPlus(ICON3D_MT_N3_STONE,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0473"
{
    GetItem(ICON3D_MT_N4_LEATHER,1)
    GetItemMessageExPlus(ICON3D_MT_N4_LEATHER,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0032"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MEMO_R_002,1)
    GetItemMessageExPlus(ICON3D_MEMO_R_002,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0161"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N4_BONE,1)
    GetItemMessageExPlus(ICON3D_MT_N4_BONE,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0182"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_COCONUT_S,2)
    GetItemMessageExPlus(ICON3D_US_COCONUT_S,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0033"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N3_STONE,2)
    GetItemMessageExPlus(ICON3D_MT_N3_STONE,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0015"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_FD_VG_PUMPKIN,2)
    GetItemMessageExPlus(ICON3D_FD_VG_PUMPKIN,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0020"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MEMO_R_005,1)
    GetItemMessageExPlus(ICON3D_MEMO_R_005,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0455"
{
    GetItem(ICON3D_MEMO_R_004,1)
    GetItemMessageExPlus(ICON3D_MEMO_R_004,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0230"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_FD_VG_PUMPKIN,2)
    GetItemMessageExPlus(ICON3D_FD_VG_PUMPKIN,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0059"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_MANGO_S,2)
    GetItemMessageExPlus(ICON3D_US_MANGO_S,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0080"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N4_STONE,1)
    GetItemMessageExPlus(ICON3D_MT_N4_STONE,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0177"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_000,1)
    GetItemMessageExPlus(ICON3D_AC_000,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0215"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_MANGO,2)
    GetItemMessageExPlus(ICON3D_US_MANGO,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0534"
{
    GetItem(ICON3D_FISHBAIT_WORM,10)
    GetItemMessageExPlus(ICON3D_FISHBAIT_WORM,10,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0065"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_025,1)
    GetItemMessageExPlus(ICON3D_AC_025,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0039"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_044,1)
    GetItemMessageExPlus(ICON3D_AC_044,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0094"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_BESTIARYPT,1)
    GetItemMessageExPlus(ICON3D_US_BESTIARYPT,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0442"
{
    GetItem(ICON3D_US_MANGO_S,1)
    GetItemMessageExPlus(ICON3D_US_MANGO_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0136"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_MANGO_S,1)
    GetItemMessageExPlus(ICON3D_US_MANGO_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0111"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R1_PARTS05,2)
    GetItemMessageExPlus(ICON3D_MT_R1_PARTS05,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0165"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R1_FLOWER,3)
    GetItemMessageExPlus(ICON3D_MT_R1_FLOWER,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0051"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_BERRY_S,1)
    GetItemMessageExPlus(ICON3D_US_BERRY_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0274"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N2_STONE,3)
    GetItemMessageExPlus(ICON3D_MT_N2_STONE,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0005"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N2_WOOD,3)
    GetItemMessageExPlus(ICON3D_MT_N2_WOOD,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0183"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_ADD_EXP_02,3)
    GetItemMessageExPlus(ICON3D_US_ADD_EXP_02,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0579"
{
    GetItem(ICON3D_MT_N2_STONE,5)
    GetItemMessageExPlus(ICON3D_MT_N2_STONE,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0479"
{
    GetItem(ICON3D_US_COCONUT_S,1)
    GetItemMessageExPlus(ICON3D_US_COCONUT_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0513"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AR_001,1)
    GetItemMessageExPlus(ICON3D_AR_001,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0150"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_FISHBAIT_WORM,5)
    GetItemMessageExPlus(ICON3D_FISHBAIT_WORM,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0498"
{
    GetItem(ICON3D_US_MANGO_S,1)
    GetItemMessageExPlus(ICON3D_US_MANGO_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0013"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_FD_VG_PAPRIKA,5)
    GetItemMessageExPlus(ICON3D_FD_VG_PAPRIKA,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    EventCue("mp0404:EV_M05S150_ED")
    ResetStopFlag(STOPFLAG_TALK)
}

function "0180"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_ADD_EXP_01,3)
    GetItemMessageExPlus(ICON3D_US_ADD_EXP_01,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0424"
{
    GetItem(ICON3D_PIECE_MONOLITH,1)
    GetItemMessageExPlus(ICON3D_PIECE_MONOLITH,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0134"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N2_STONE,3)
    GetItemMessageExPlus(ICON3D_MT_N2_STONE,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0571"
{
    GetItem(ICON3D_FISHBAIT_WORM,5)
    GetItemMessageExPlus(ICON3D_FISHBAIT_WORM,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0099"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_ADD_HP,1)
    GetItemMessageExPlus(ICON3D_US_ADD_HP,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0089"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AR_029,1)
    GetItemMessageExPlus(ICON3D_AR_029,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0126"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R1_FLOWER,3)
    GetItemMessageExPlus(ICON3D_MT_R1_FLOWER,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0402"
{
    GetItem(ICON3D_AR_007,1)
    GetItemMessageExPlus(ICON3D_AR_007,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0121"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_RESSURECT_01,1)
    GetItemMessageExPlus(ICON3D_US_RESSURECT_01,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0278"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AR_003,1)
    GetItemMessageExPlus(ICON3D_AR_003,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0475"
{
    GetItem(ICON3D_US_ADD_EXP_01,3)
    GetItemMessageExPlus(ICON3D_US_ADD_EXP_01,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0153"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_CURE_POISON,5)
    GetItemMessageExPlus(ICON3D_US_CURE_POISON,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0096"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R1_PARTS06,1)
    GetItemMessageExPlus(ICON3D_MT_R1_PARTS06,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0263"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_MANGO_S,1)
    GetItemMessageExPlus(ICON3D_US_MANGO_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0003"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_NR2_STONE,1)
    GetItemMessageExPlus(ICON3D_MT_NR2_STONE,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0026"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AR_008,1)
    GetItemMessageExPlus(ICON3D_AR_008,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0019"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_012,1)
    GetItemMessageExPlus(ICON3D_AC_012,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    EventCue("mp0408:EV_M05S152_ED")
    ResetStopFlag(STOPFLAG_TALK)
}

function "0428"
{
    GetItem(ICON3D_US_ADD_DEF,1)
    GetItemMessageExPlus(ICON3D_US_ADD_DEF,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0553"
{
    GetItem(ICON3D_MT_R1_PARTS02,5)
    GetItemMessageExPlus(ICON3D_MT_R1_PARTS02,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0154"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_FISHBAIT_WORM,5)
    GetItemMessageExPlus(ICON3D_FISHBAIT_WORM,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0107"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R2_PARTS03,3)
    GetItemMessageExPlus(ICON3D_MT_R2_PARTS03,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0389"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R1_FLOWER,5)
    GetItemMessageExPlus(ICON3D_MT_R1_FLOWER,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0242"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_COCONUT_S,1)
    GetItemMessageExPlus(ICON3D_US_COCONUT_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0050"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N2_STONE,5)
    GetItemMessageExPlus(ICON3D_MT_N2_STONE,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0453"
{
    GetItem(ICON3D_US_RESSURECT_01,1)
    GetItemMessageExPlus(ICON3D_US_RESSURECT_01,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0205"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_CURE_BLOODLOSS,3)
    GetItemMessageExPlus(ICON3D_US_CURE_BLOODLOSS,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0162"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_CURE_ALL,3)
    GetItemMessageExPlus(ICON3D_US_CURE_ALL,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0544"
{
    GetItem(ICON3D_MT_N2_STONE,3)
    GetItemMessageExPlus(ICON3D_MT_N2_STONE,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0194"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_CURE_POISON,3)
    GetItemMessageExPlus(ICON3D_US_CURE_POISON,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0397"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_029,1)
    GetItemMessageExPlus(ICON3D_AC_029,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0399"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_ADD_STR,1)
    GetItemMessageExPlus(ICON3D_US_ADD_STR,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0101"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_MANGO,5)
    GetItemMessageExPlus(ICON3D_US_MANGO,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0577"
{
    GetItem(ICON3D_US_ADD_EXP_02,2)
    GetItemMessageExPlus(ICON3D_US_ADD_EXP_02,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0495"
{
    GetItem(ICON3D_US_BERRY_S,2)
    GetItemMessageExPlus(ICON3D_US_BERRY_S,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0446"
{
    GetItem(ICON3D_MT_N2_FLOWER,5)
    GetItemMessageExPlus(ICON3D_MT_N2_FLOWER,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0454"
{
    GetItem(ICON3D_US_COCONUT_S,1)
    GetItemMessageExPlus(ICON3D_US_COCONUT_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0558"
{
    GetItem(ICON3D_MT_N2_LIQUID,5)
    GetItemMessageExPlus(ICON3D_MT_N2_LIQUID,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0247"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R1_PARTS01,3)
    GetItemMessageExPlus(ICON3D_MT_R1_PARTS01,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0222"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_FISHBAIT_WORM,5)
    GetItemMessageExPlus(ICON3D_FISHBAIT_WORM,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0565"
{
    GetItem(ICON3D_US_ADD_DEF,1)
    GetItemMessageExPlus(ICON3D_US_ADD_DEF,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0069"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_BERRY_S,3)
    GetItemMessageExPlus(ICON3D_US_BERRY_S,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0045"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_014,1)
    GetItemMessageExPlus(ICON3D_AC_014,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0125"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R3_PARTS07,2)
    GetItemMessageExPlus(ICON3D_MT_R3_PARTS07,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0578"
{
    GetItem(ICON3D_AR_023,1)
    GetItemMessageExPlus(ICON3D_AR_023,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0186"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_042,1)
    GetItemMessageExPlus(ICON3D_AC_042,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0034"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_009,1)
    GetItemMessageExPlus(ICON3D_AC_009,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0270"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R2_PARTS05,3)
    GetItemMessageExPlus(ICON3D_MT_R2_PARTS05,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0512"
{
    GetItem(ICON3D_US_CURE_PARALYZE,5)
    GetItemMessageExPlus(ICON3D_US_CURE_PARALYZE,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0093"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_COCONUT_S,1)
    GetItemMessageExPlus(ICON3D_US_COCONUT_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0117"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_001,1)
    GetItemMessageExPlus(ICON3D_AC_001,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0243"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_ADD_DEF,1)
    GetItemMessageExPlus(ICON3D_US_ADD_DEF,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0113"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_RESSURECT_01,1)
    GetItemMessageExPlus(ICON3D_US_RESSURECT_01,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0264"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_039,1)
    GetItemMessageExPlus(ICON3D_AC_039,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0185"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AR_009,1)
    GetItemMessageExPlus(ICON3D_AR_009,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0414"
{
    GetItem(ICON3D_US_CURE_DARK,5)
    GetItemMessageExPlus(ICON3D_US_CURE_DARK,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0437"
{
    GetItem(ICON3D_MT_N3_LIQUID,2)
    GetItemMessageExPlus(ICON3D_MT_N3_LIQUID,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0158"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_PRESENT_PARO1,1)
    GetItemMessageExPlus(ICON3D_PRESENT_PARO1,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0470"
{
    GetItem(ICON3D_US_CURE_BLOODLOSS,3)
    GetItemMessageExPlus(ICON3D_US_CURE_BLOODLOSS,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0202"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N3_STONE,2)
    GetItemMessageExPlus(ICON3D_MT_N3_STONE,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0197"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_CURE_POISON,5)
    GetItemMessageExPlus(ICON3D_US_CURE_POISON,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0030"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N3_STONE,2)
    GetItemMessageExPlus(ICON3D_MT_N3_STONE,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0175"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AR_006,1)
    GetItemMessageExPlus(ICON3D_AR_006,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0181"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_ADD_DEF,1)
    GetItemMessageExPlus(ICON3D_US_ADD_DEF,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0403"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_FD_VG_CORN,5)
    GetItemMessageExPlus(ICON3D_FD_VG_CORN,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0038"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_ADD_STR,1)
    GetItemMessageExPlus(ICON3D_US_ADD_STR,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0216"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N4_STONE,2)
    GetItemMessageExPlus(ICON3D_MT_N4_STONE,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0431"
{
    GetItem(ICON3D_US_CURE_DARK,3)
    GetItemMessageExPlus(ICON3D_US_CURE_DARK,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0198"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_016,1)
    GetItemMessageExPlus(ICON3D_AC_016,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0118"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N2_STONE,3)
    GetItemMessageExPlus(ICON3D_MT_N2_STONE,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0157"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_DRUG_RECIPE01,1)
    GetItemMessageExPlus(ICON3D_DRUG_RECIPE01,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0575"
{
    GetItem(ICON3D_US_ADD_EXP_03,1)
    GetItemMessageExPlus(ICON3D_US_ADD_EXP_03,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0062"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_CURE_POISON,5)
    GetItemMessageExPlus(ICON3D_US_CURE_POISON,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0476"
{
    GetItem(ICON3D_US_ADD_STR,1)
    GetItemMessageExPlus(ICON3D_US_ADD_STR,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0485"
{
    GetItem(ICON3D_US_MANGO_S,1)
    GetItemMessageExPlus(ICON3D_US_MANGO_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0567"
{
    GetItem(ICON3D_US_ADD_LEVEL,1)
    GetItemMessageExPlus(ICON3D_US_ADD_LEVEL,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0114"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R2_STONE,3)
    GetItemMessageExPlus(ICON3D_MT_R2_STONE,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0237"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_HEALSOLO_01,1)
    GetItemMessageExPlus(ICON3D_US_HEALSOLO_01,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0383"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_CURE_POISON,3)
    GetItemMessageExPlus(ICON3D_US_CURE_POISON,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0229"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_035,1)
    GetItemMessageExPlus(ICON3D_AC_035,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0378"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_CURE_PARALYZE,3)
    GetItemMessageExPlus(ICON3D_US_CURE_PARALYZE,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0140"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_SEED_PAPRIKA,1)
    GetItemMessageExPlus(ICON3D_SEED_PAPRIKA,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0514"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_CURE_FLAME,3)
    GetItemMessageExPlus(ICON3D_US_CURE_FLAME,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0548"
{
    GetItem(ICON3D_US_CURE_PARALYZE,3)
    GetItemMessageExPlus(ICON3D_US_CURE_PARALYZE,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0382"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_FISHBAIT_WORM,5)
    GetItemMessageExPlus(ICON3D_FISHBAIT_WORM,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0210"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R3_PARTS04,1)
    GetItemMessageExPlus(ICON3D_MT_R3_PARTS04,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0388"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N3_LEATHER,2)
    GetItemMessageExPlus(ICON3D_MT_N3_LEATHER,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0418"
{
    GetItem(ICON3D_AR_002,1)
    GetItemMessageExPlus(ICON3D_AR_002,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0217"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_DRUG_RECIPE03,1)
    GetItemMessageExPlus(ICON3D_DRUG_RECIPE03,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0171"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_MANGO_S,1)
    GetItemMessageExPlus(ICON3D_US_MANGO_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0251"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_ADD_HP,1)
    GetItemMessageExPlus(ICON3D_US_ADD_HP,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0572"
{
    GetItem(ICON3D_US_MANGO_S,1)
    GetItemMessageExPlus(ICON3D_US_MANGO_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0570"
{
    GetItem(ICON3D_FD_WHEAT,5)
    GetItemMessageExPlus(ICON3D_FD_WHEAT,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0141"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_NR2_STONE,3)
    GetItemMessageExPlus(ICON3D_MT_NR2_STONE,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0007"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N3_STONE,2)
    GetItemMessageExPlus(ICON3D_MT_N3_STONE,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0377"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_PRESENT_AUSTEN,1)
    GetItemMessageExPlus(ICON3D_PRESENT_AUSTEN,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0419"
{
    GetItem(ICON3D_US_ADD_EXP_01,5)
    GetItemMessageExPlus(ICON3D_US_ADD_EXP_01,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0191"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_MANGO_S,1)
    GetItemMessageExPlus(ICON3D_US_MANGO_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0268"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_FD_LAND_EGG,5)
    GetItemMessageExPlus(ICON3D_FD_LAND_EGG,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0054"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_002,1)
    GetItemMessageExPlus(ICON3D_AC_002,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0246"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AR_027,1)
    GetItemMessageExPlus(ICON3D_AR_027,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0061"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_CURE_BLOODLOSS,3)
    GetItemMessageExPlus(ICON3D_US_CURE_BLOODLOSS,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0188"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N3_STONE,3)
    GetItemMessageExPlus(ICON3D_MT_N3_STONE,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0448"
{
    GetItem(ICON3D_DRUG_RECIPE04,1)
    GetItemMessageExPlus(ICON3D_DRUG_RECIPE04,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0011"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N3_STONE,5)
    GetItemMessageExPlus(ICON3D_MT_N3_STONE,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0002"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_FISHBAIT_WORM,5)
    GetItemMessageExPlus(ICON3D_FISHBAIT_WORM,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0253"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N4_STONE,2)
    GetItemMessageExPlus(ICON3D_MT_N4_STONE,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0164"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_032,1)
    GetItemMessageExPlus(ICON3D_AC_032,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0427"
{
    GetItem(ICON3D_MT_N4_STONE,2)
    GetItemMessageExPlus(ICON3D_MT_N4_STONE,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0421"
{
    GetItem(ICON3D_AR_021,1)
    GetItemMessageExPlus(ICON3D_AR_021,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0227"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_EV_EMPTY_BOTTLE,1)
    GetItemMessageExPlus(ICON3D_EV_EMPTY_BOTTLE,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0110"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_045,1)
    GetItemMessageExPlus(ICON3D_AC_045,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0457"
{
    GetItem(ICON3D_US_CURE_PARALYZE,5)
    GetItemMessageExPlus(ICON3D_US_CURE_PARALYZE,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0262"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_010,1)
    GetItemMessageExPlus(ICON3D_AC_010,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0449"
{
    GetItem(ICON3D_US_ADD_EXP_03,1)
    GetItemMessageExPlus(ICON3D_US_ADD_EXP_03,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0535"
{
    GetItem(ICON3D_MT_N4_STONE,2)
    GetItemMessageExPlus(ICON3D_MT_N4_STONE,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0425"
{
    GetItem(ICON3D_MT_R4_PARTS06,1)
    GetItemMessageExPlus(ICON3D_MT_R4_PARTS06,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0410"
{
    GetItem(ICON3D_AC_028,1)
    GetItemMessageExPlus(ICON3D_AC_028,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0116"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R4_PARTS03,2)
    GetItemMessageExPlus(ICON3D_MT_R4_PARTS03,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0103"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R4_PARTS02,2)
    GetItemMessageExPlus(ICON3D_MT_R4_PARTS02,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0041"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_SEED_CORN,1)
    GetItemMessageExPlus(ICON3D_SEED_CORN,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0146"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_CURE_BLOODLOSS,3)
    GetItemMessageExPlus(ICON3D_US_CURE_BLOODLOSS,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0043"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_027,1)
    GetItemMessageExPlus(ICON3D_AC_027,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0396"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_CURE_BLOODLOSS,5)
    GetItemMessageExPlus(ICON3D_US_CURE_BLOODLOSS,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0259"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AR_024,1)
    GetItemMessageExPlus(ICON3D_AR_024,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0223"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N3_STONE,2)
    GetItemMessageExPlus(ICON3D_MT_N3_STONE,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0064"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R3_PARTS05,2)
    GetItemMessageExPlus(ICON3D_MT_R3_PARTS05,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0008"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_PRESENT_HUMMEL1,1)
    GetItemMessageExPlus(ICON3D_PRESENT_HUMMEL1,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0561"
{
    GetItem(ICON3D_HEALINGCAPE,1)
    GetItemMessageExPlus(ICON3D_HEALINGCAPE,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0073"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_FISHBAIT_WORM,10)
    GetItemMessageExPlus(ICON3D_FISHBAIT_WORM,10,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0555"
{
    GetItem(ICON3D_US_DRAGONFRUIT_S,1)
    GetItemMessageExPlus(ICON3D_US_DRAGONFRUIT_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0131"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AR_049,1)
    GetItemMessageExPlus(ICON3D_AR_049,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0046"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_ADD_EXP_03,1)
    GetItemMessageExPlus(ICON3D_US_ADD_EXP_03,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0266"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_DRAGONFRUIT_S,1)
    GetItemMessageExPlus(ICON3D_US_DRAGONFRUIT_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0014"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_PRESENT_GRISELDA,1)
    GetItemMessageExPlus(ICON3D_PRESENT_GRISELDA,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0584"
{
    GetItem(ICON3D_SEED_PUMPKIN,1)
    GetItemMessageExPlus(ICON3D_SEED_PUMPKIN,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0213"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_ADD_EXP_03,1)
    GetItemMessageExPlus(ICON3D_US_ADD_EXP_03,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0147"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_DRAGONFRUIT_S,1)
    GetItemMessageExPlus(ICON3D_US_DRAGONFRUIT_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0244"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_ADD_STR,1)
    GetItemMessageExPlus(ICON3D_US_ADD_STR,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0381"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_ADD_DEF,1)
    GetItemMessageExPlus(ICON3D_US_ADD_DEF,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0189"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_ADD_HP,1)
    GetItemMessageExPlus(ICON3D_US_ADD_HP,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0184"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_CURE_FREEZE,5)
    GetItemMessageExPlus(ICON3D_US_CURE_FREEZE,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0392"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_PRESENT_DINA,1)
    GetItemMessageExPlus(ICON3D_PRESENT_DINA,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0406"
{
    GetItem(ICON3D_MT_N3_STONE,3)
    GetItemMessageExPlus(ICON3D_MT_N3_STONE,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0233"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R3_PARTS07,2)
    GetItemMessageExPlus(ICON3D_MT_R3_PARTS07,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0004"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_CURE_FREEZE,3)
    GetItemMessageExPlus(ICON3D_US_CURE_FREEZE,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0273"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_HEALSOLO_02,1)
    GetItemMessageExPlus(ICON3D_US_HEALSOLO_02,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0245"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N3_STONE,3)
    GetItemMessageExPlus(ICON3D_MT_N3_STONE,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0415"
{
    GetItem(ICON3D_MT_R3_PARTS04,2)
    GetItemMessageExPlus(ICON3D_MT_R3_PARTS04,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0105"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R3_FLOWER,2)
    GetItemMessageExPlus(ICON3D_MT_R3_FLOWER,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0441"
{
    GetItem(ICON3D_AR_030,1)
    GetItemMessageExPlus(ICON3D_AR_030,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0060"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_DRAGONFRUIT_S,1)
    GetItemMessageExPlus(ICON3D_US_DRAGONFRUIT_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0511"
{
    GetItem(ICON3D_MT_N4_STONE,2)
    GetItemMessageExPlus(ICON3D_MT_N4_STONE,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0497"
{
    GetItem(ICON3D_US_CURE_FLAME,3)
    GetItemMessageExPlus(ICON3D_US_CURE_FLAME,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0127"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N4_STONE,2)
    GetItemMessageExPlus(ICON3D_MT_N4_STONE,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0477"
{
    GetItem(ICON3D_US_ADD_EXP_03,1)
    GetItemMessageExPlus(ICON3D_US_ADD_EXP_03,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0569"
{
    GetItem(ICON3D_US_DRAGONFRUIT_S,1)
    GetItemMessageExPlus(ICON3D_US_DRAGONFRUIT_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0238"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N4_STONE,2)
    GetItemMessageExPlus(ICON3D_MT_N4_STONE,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0178"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R4_STONE,1)
    GetItemMessageExPlus(ICON3D_MT_R4_STONE,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0557"
{
    GetItem(ICON3D_US_MANGO_S,1)
    GetItemMessageExPlus(ICON3D_US_MANGO_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0029"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R4_WOOD,1)
    GetItemMessageExPlus(ICON3D_MT_R4_WOOD,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0079"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_034,1)
    GetItemMessageExPlus(ICON3D_AC_034,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0169"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_ADD_EXP_03,1)
    GetItemMessageExPlus(ICON3D_US_ADD_EXP_03,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0112"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_CURE_FLAME,5)
    GetItemMessageExPlus(ICON3D_US_CURE_FLAME,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0260"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R3_PARTS07,1)
    GetItemMessageExPlus(ICON3D_MT_R3_PARTS07,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0582"
{
    GetItem(ICON3D_US_CURE_PARALYZE,3)
    GetItemMessageExPlus(ICON3D_US_CURE_PARALYZE,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0149"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_DRUG_RECIPE10,1)
    GetItemMessageExPlus(ICON3D_DRUG_RECIPE10,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0224"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R3_FLOWER,1)
    GetItemMessageExPlus(ICON3D_MT_R3_FLOWER,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0549"
{
    GetItem(ICON3D_MT_R4_PARTS02,2)
    GetItemMessageExPlus(ICON3D_MT_R4_PARTS02,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0168"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N4_STONE,2)
    GetItemMessageExPlus(ICON3D_MT_N4_STONE,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0432"
{
    GetItem(ICON3D_MT_R4_PARTS01,2)
    GetItemMessageExPlus(ICON3D_MT_R4_PARTS01,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0379"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_DRUG_RECIPE06,1)
    GetItemMessageExPlus(ICON3D_DRUG_RECIPE06,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0463"
{
    GetItem(ICON3D_MT_R4_PARTS03,2)
    GetItemMessageExPlus(ICON3D_MT_R4_PARTS03,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0172"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_PRESENT_DANA2,1)
    GetItemMessageExPlus(ICON3D_PRESENT_DANA2,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0036"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_ADD_EXP_03,1)
    GetItemMessageExPlus(ICON3D_US_ADD_EXP_03,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0235"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_DRAGONFRUIT_S,1)
    GetItemMessageExPlus(ICON3D_US_DRAGONFRUIT_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0405"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R4_WOOD,2)
    GetItemMessageExPlus(ICON3D_MT_R4_WOOD,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0277"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R5_FLOWER,2)
    GetItemMessageExPlus(ICON3D_MT_R5_FLOWER,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0204"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R4_STONE,2)
    GetItemMessageExPlus(ICON3D_MT_R4_STONE,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0174"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_ADD_LEVEL,1)
    GetItemMessageExPlus(ICON3D_US_ADD_LEVEL,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0552"
{
    GetItem(ICON3D_MT_R5_PARTS07,1)
    GetItemMessageExPlus(ICON3D_MT_R5_PARTS07,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0271"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_060,1)
    GetItemMessageExPlus(ICON3D_AC_060,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0257"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_DRUG_RECIPE07,1)
    GetItemMessageExPlus(ICON3D_DRUG_RECIPE07,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0053"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_ADD_EXP_02,1)
    GetItemMessageExPlus(ICON3D_US_ADD_EXP_02,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0148"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_DRAGONFRUIT_S,1)
    GetItemMessageExPlus(ICON3D_US_DRAGONFRUIT_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0083"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R3_PARTS02,3)
    GetItemMessageExPlus(ICON3D_MT_R3_PARTS02,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0536"
{
    GetItem(ICON3D_MT_R3_PARTS03,3)
    GetItemMessageExPlus(ICON3D_MT_R3_PARTS03,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0541"
{
    GetItem(ICON3D_US_ADD_HP,1)
    GetItemMessageExPlus(ICON3D_US_ADD_HP,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0084"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R4_STONE,2)
    GetItemMessageExPlus(ICON3D_MT_R4_STONE,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0072"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R4_WOOD,2)
    GetItemMessageExPlus(ICON3D_MT_R4_WOOD,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0211"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R3_PARTS01,3)
    GetItemMessageExPlus(ICON3D_MT_R3_PARTS01,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0585"
{
    GetItem(ICON3D_MT_R3_PARTS04,3)
    GetItemMessageExPlus(ICON3D_MT_R3_PARTS04,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0170"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_FISHBAIT_WORM,5)
    GetItemMessageExPlus(ICON3D_FISHBAIT_WORM,5,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0071"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AM_000,2)
    GetItemMessageExPlus(ICON3D_AM_000,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0109"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_HEALSOLO_01,1)
    GetItemMessageExPlus(ICON3D_US_HEALSOLO_01,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0156"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_COCONUT,2)
    GetItemMessageExPlus(ICON3D_US_COCONUT,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0532"
{
    GetItem(ICON3D_AR_022,1)
    GetItemMessageExPlus(ICON3D_AR_022,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0547"
{
    GetItem(ICON3D_US_MANGO_S,1)
    GetItemMessageExPlus(ICON3D_US_MANGO_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0219"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_026,1)
    GetItemMessageExPlus(ICON3D_AC_026,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0461"
{
    GetItem(ICON3D_MT_R2_PARTS01,3)
    GetItemMessageExPlus(ICON3D_MT_R2_PARTS01,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0276"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R2_PARTS02,3)
    GetItemMessageExPlus(ICON3D_MT_R2_PARTS02,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0391"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R2_PARTS03,3)
    GetItemMessageExPlus(ICON3D_MT_R2_PARTS03,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0239"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_R2_PARTS04,3)
    GetItemMessageExPlus(ICON3D_MT_R2_PARTS04,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    EventCue("mp6345:SubEV_05_Get_Bell_ED")
    ResetStopFlag(STOPFLAG_TALK)
}

function "0556"
{
    GetItem(ICON3D_AR_047,1)
    GetItemMessageExPlus(ICON3D_AR_047,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0167"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_MT_N4_STONE,3)
    GetItemMessageExPlus(ICON3D_MT_N4_STONE,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0452"
{
    GetItem(ICON3D_US_HEALSOLO_01,1)
    GetItemMessageExPlus(ICON3D_US_HEALSOLO_01,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0573"
{
    GetItem(ICON3D_AC_031,1)
    GetItemMessageExPlus(ICON3D_AC_031,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0423"
{
    GetItem(ICON3D_DRUG_RECIPE08,1)
    GetItemMessageExPlus(ICON3D_DRUG_RECIPE08,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0474"
{
    GetItem(ICON3D_MT_R4_PARTS04,1)
    GetItemMessageExPlus(ICON3D_MT_R4_PARTS04,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0016"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_ADD_EXP_03,1)
    GetItemMessageExPlus(ICON3D_US_ADD_EXP_03,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0066"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_MANGO_S,1)
    GetItemMessageExPlus(ICON3D_US_MANGO_S,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0562"
{
    GetItem(ICON3D_US_ADD_DEF,1)
    GetItemMessageExPlus(ICON3D_US_ADD_DEF,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
}

function "0009"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_MANGO,2)
    GetItemMessageExPlus(ICON3D_US_MANGO,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    EventCue("mp0403:EV_M05S151_ED")
    ResetStopFlag(STOPFLAG_TALK)
}

function "0085"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AR_020,1)
    GetItemMessageExPlus(ICON3D_AR_020,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0256"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_DRAGONFRUIT_S,3)
    GetItemMessageExPlus(ICON3D_US_DRAGONFRUIT_S,3,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0221"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AR_026,1)
    GetItemMessageExPlus(ICON3D_AR_026,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0241"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_HEALSOLO_01,1)
    GetItemMessageExPlus(ICON3D_US_HEALSOLO_01,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0151"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AR_004,1)
    GetItemMessageExPlus(ICON3D_AR_004,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0196"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_US_HEALSOLO_02,1)
    GetItemMessageExPlus(ICON3D_US_HEALSOLO_02,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "0044"
{
    SetStopFlag(STOPFLAG_TALK)
    GetItem(ICON3D_AC_062,1)
    GetItemMessageExPlus(ICON3D_AC_062,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
    WaitPrompt()
    WaitCloseWindow()
    
    ResetStopFlag(STOPFLAG_TALK)
}

function "expMult"
{
    if(FLAG[SF_LOADMAP])
    {
        SetChrWorkGroup(B000,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B001,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B002,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B003,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B004,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B005,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B006,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B007,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B008,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B009,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B010,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B011,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B012,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B013,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B020,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B021,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B022,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B023,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B024,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B025,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B030,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B100,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B101,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B102,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B103,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B104,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B105,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B106,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B110,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B111,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B112,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B150,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B151,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B152,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B153,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B154,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B155,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B161,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B162,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B163,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B164,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B165,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(B170,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(G0001,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(G0002,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(G0003,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(G0004,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(G0005,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(G0006,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(G0007,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(G0008,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(G0009,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0100,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0101,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0102,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0103,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0104,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0105,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0106,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0107,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0108,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0109,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0110,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0111,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0112,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0113,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0120,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0121,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0122,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0123,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0124,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0140,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0141,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0142,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0143,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0144,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0145,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0146,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0147,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0148,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0149,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0150,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0151,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0200,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0201,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0202,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0203,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0220,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0221,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0222,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0223,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0224,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0225,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0226,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0240,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0241,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0300,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0301,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0302,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0303,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0340,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0341,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0400,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0401,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0402,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0403,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0440,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0441,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0442,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0500,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0501,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0502,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0503,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0504,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0600,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0601,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0602,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0603,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0604,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0605,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0620,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0621,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0622,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0623,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0640,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0641,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0642,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0643,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0644,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0660,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0661,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0662,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0663,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0664,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0680,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0700,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0701,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0800,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0801,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0805,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0806,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0810,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0811,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0815,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0816,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0830,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0831,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0840,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0841,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0850,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0851,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0860,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0861,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0870,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0871,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0881,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0882,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0883,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0884,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0885,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0886,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0887,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0888,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0889,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0890,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0900,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0901,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0902,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0903,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0910,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0911,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0915,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0916,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0920,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0925,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0926,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0930,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0931,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0935,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0936,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0940,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0941,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0942,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0945,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M0960,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1000,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1001,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1003,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1004,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1005,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1007,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1009,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1010,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1011,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1012,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1013,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1014,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1015,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1020,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1021,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1022,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1030,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1031,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1040,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1041,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1042,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1099,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1100,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1101,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1102,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1103,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1104,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1105,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1200,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1201,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1202,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1203,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1300,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1301,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1400,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1401,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1402,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1403,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1404,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1405,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1406,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1407,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1408,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1409,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1600,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1601,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1602,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1603,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1604,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1605,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1610,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1611,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1612,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M1613,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M2100,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M2101,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M2102,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M2103,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M9917,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M9918,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M9919,CWK_EXPMUL, 2.0f)
        SetChrWorkGroup(M9920,CWK_EXPMUL, 2.0f)

        SetFlag(GF_TBOX_DUMMY114,0)
		SetFlag(GF_TBOX_DUMMY115,0)
		SetFlag(GF_TBOX_DUMMY116,0)
		SetFlag(GF_TBOX_DUMMY117,0)
		SetFlag(GF_TBOX_DUMMY118,0)
		SetFlag(GF_TBOX_DUMMY119,0)
		SetFlag(GF_TBOX_DUMMY120,0)
		SetFlag(GF_TBOX_DUMMY121,0)
		SetFlag(GF_TBOX_DUMMY122,0)
		SetFlag(GF_TBOX_DUMMY123,0)
		SetFlag(GF_TBOX_DUMMY124,0)
		SetFlag(GF_TBOX_DUMMY125,0)
		SetFlag(GF_TBOX_DUMMY126,0)
        CallFunc("rng:bossCheck")
    }
}

function "bossCheck"
{
	
    if(FLAG[GF_01MP1103_JOIN_SAHAD] && !FLAG[GF_TBOX_DUMMY114])
    {
        SetFlag(GF_TBOX_DUMMY114,1)
        CallFunc("rng:expGrowth")
    }
    if(FLAG[GF_02MP1308_KILL_CHAMELEON] && !FLAG[GF_TBOX_DUMMY115])
    {
        SetFlag(GF_TBOX_DUMMY115,1)
        CallFunc("rng:expGrowth")
    }
    if(FLAG[GF_TBOX_DUMMY074] && !FLAG[GF_TBOX_DUMMY116])
    {
        SetFlag(GF_TBOX_DUMMY116,1)
        CallFunc("rng:expGrowth")
    }
    if(FLAG[GF_02MP2308_KILL_HIPPO] && !FLAG[GF_TBOX_DUMMY117])
    {
        SetFlag(GF_TBOX_DUMMY117,1)
        CallFunc("rng:expGrowth")
    }
    if(FLAG[GF_02MP1103_KILL_KIERGAARD] && !FLAG[GF_TBOX_DUMMY118])
    {
        SetFlag(GF_TBOX_DUMMY118,1)
        CallFunc("rng:expGrowth")
    }
    if(FLAG[GF_03MP4341_KILL_ANCIENT] && !FLAG[GF_TBOX_DUMMY119])
    {
        SetFlag(GF_TBOX_DUMMY119,1)
        CallFunc("rng:expGrowth")
    }
    if(FLAG[GF_04MP6410_KILL_GUARDIAN] && !FLAG[GF_TBOX_DUMMY120])
    {
        SetFlag(GF_TBOX_DUMMY120,1)
        CallFunc("rng:expGrowth")
    }
    if(FLAG[GF_05MP6329_KILL_BAHABOSS] && !FLAG[GF_TBOX_DUMMY121])
    {
        SetFlag(GF_TBOX_DUMMY121,1)
        CallFunc("rng:expGrowth")
    }
    if(FLAG[GF_05MP0405_READ_REED] && !FLAG[GF_TBOX_DUMMY122])
    {
        SetFlag(GF_TBOX_DUMMY122,1)
        CallFunc("rng:expGrowth")
    }
    if(FLAG[GF_TBOX_DUMMY078] && !FLAG[GF_TBOX_DUMMY123])
    {
        SetFlag(GF_TBOX_DUMMY123,1)
        CallFunc("rng:expGrowth")
    }
    if(FLAG[GF_TBOX_DUMMY080] && !FLAG[GF_TBOX_DUMMY124])
    {
        SetFlag(GF_TBOX_DUMMY124,1)
        CallFunc("rng:expGrowth")
    }
    if((FLAG[GF_06MP6305_TALK_HYDRA] || FLAG[GF_06MP6306_TALK_MINOS] || FLAG[GF_06MP6307_TALK_NESTOR] || FLAG[GF_06MP6308_TALK_SARAI]) && !FLAG[GF_TBOX_DUMMY125])
    {
        SetFlag(GF_TBOX_DUMMY125,1)
        CallFunc("rng:expGrowth")
    }
    if(FLAG[GF_SUBEV_06_6413_KILL_BOSS] && !FLAG[GF_TBOX_DUMMY126])
    {
        SetFlag(GF_TBOX_DUMMY126,1)
        CallFunc("rng:expGrowth")
    }
}

function "expGrowth"
{
    SetChrWorkGroup(B000,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B001,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B002,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B003,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B004,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B005,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B006,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B007,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B008,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B009,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B010,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B011,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B012,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B013,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B020,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B021,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B022,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B023,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B024,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B025,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B030,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B100,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B101,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B102,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B103,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B104,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B105,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B106,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B110,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B111,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B112,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B150,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B151,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B152,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B153,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B154,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B155,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B161,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B162,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B163,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B164,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B165,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(B170,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(G0001,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(G0002,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(G0003,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(G0004,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(G0005,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(G0006,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(G0007,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(G0008,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(G0009,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0100,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0101,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0102,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0103,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0104,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0105,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0106,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0107,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0108,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0109,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0110,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0111,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0112,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0113,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0120,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0121,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0122,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0123,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0124,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0140,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0141,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0142,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0143,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0144,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0145,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0146,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0147,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0148,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0149,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0150,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0151,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0200,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0201,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0202,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0203,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0220,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0221,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0222,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0223,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0224,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0225,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0226,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0240,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0241,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0300,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0301,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0302,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0303,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0340,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0341,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0400,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0401,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0402,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0403,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0440,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0441,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0442,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0500,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0501,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0502,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0503,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0504,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0600,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0601,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0602,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0603,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0604,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0605,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0620,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0621,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0622,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0623,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0640,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0641,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0642,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0643,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0644,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0660,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0661,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0662,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0663,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0664,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0680,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0700,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0701,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0800,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0801,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0805,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0806,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0810,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0811,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0815,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0816,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0830,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0831,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0840,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0841,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0850,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0851,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0860,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0861,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0870,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0871,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0881,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0882,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0883,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0884,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0885,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0886,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0887,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0888,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0889,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0890,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0900,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0901,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0902,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0903,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0910,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0911,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0915,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0916,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0920,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0925,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0926,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0930,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0931,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0935,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0936,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0940,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0941,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0942,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0945,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M0960,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1000,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1001,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1003,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1004,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1005,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1007,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1009,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1010,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1011,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1012,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1013,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1014,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1015,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1020,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1021,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1022,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1030,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1031,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1040,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1041,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1042,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1099,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1100,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1101,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1102,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1103,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1104,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1105,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1200,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1201,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1202,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1203,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1300,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1301,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1400,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1401,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1402,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1403,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1404,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1405,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1406,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1407,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1408,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1409,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1600,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1601,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1602,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1603,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1604,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1605,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1610,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1611,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1612,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M1613,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M2100,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M2101,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M2102,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M2103,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M9917,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M9918,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M9919,CWK_EXPMUL, 1.1f)
    SetChrWorkGroup(M9920,CWK_EXPMUL, 1.1f)
    CallFunc("rng:bossCheck")
    
}

function "newInterceptControl"
{
	SetWork(WK_ITC_BASE_LV, 9)
	SetWork(WK_ITC_DECOY_NUM, 8)
	SetWork(WK_ITC_DECOY_LV, 5)
	SetWork(WK_ITC_DECOY_OPT, 1)
	SetWork(WK_ITC_BARRICADE_NUM, 4)
	SetWork(WK_ITC_BARRICADE_LV, 5)
	SetWork(WK_ITC_BARRICADE_OPT, 1)
	SetWork(WK_ITC_CATAPULT_NUM, 1)
	SetWork(WK_ITC_CATAPULT_LV, 5)
	SetWork(WK_ITC_CATAPULT_OPT, 1)
	SetWork(WK_ITC_GONG_NUM, 1)
	SetWork(WK_ITC_GONG_LV, 3)
	SetWork(WK_ITC_GONG_OPT, 1)

    if (FLAG[GF_INTERCEPT_LASTRESULT] == 1)
    {


        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE01)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_MT_N2_STONE,10)
                GetItemMessageExPlus(ICON3D_MT_N2_STONE,10,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_N1_LEATHER,10)
                GetItemMessageExPlus(ICON3D_MT_N1_LEATHER,10,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_N1_BONE,10)
                GetItemMessageExPlus(ICON3D_MT_N1_BONE,10,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_US_ADD_LEVEL,1)
                GetItemMessageExPlus(ICON3D_US_ADD_LEVEL,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE02)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_US_BERRY_S,2)
                GetItemMessageExPlus(ICON3D_US_BERRY_S,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_US_COCONUT_S,2)
                GetItemMessageExPlus(ICON3D_US_COCONUT_S,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_US_MANGO_S,2)
                GetItemMessageExPlus(ICON3D_US_MANGO_S,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_US_DRAGONFRUIT_S,2)
                GetItemMessageExPlus(ICON3D_US_DRAGONFRUIT_S,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            SetFlag(GF_TBOX_DUMMY089,1)
            
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE03)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_USFD_FOOD04,1)
                GetItemMessageExPlus(ICON3D_USFD_FOOD04,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            SetFlag(GF_TBOX_DUMMY090,1)
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE04)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_USFD_FOOD03,1)
                GetItemMessageExPlus(ICON3D_USFD_FOOD03,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_N2_LEATHER,10)
                GetItemMessageExPlus(ICON3D_MT_N2_LEATHER,10,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_N2_BONE,10)
                GetItemMessageExPlus(ICON3D_MT_N2_BONE,10,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE05)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_MT_N3_STONE,20)
                GetItemMessageExPlus(ICON3D_MT_N3_STONE,20,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_R2_PARTS01,20)
                GetItemMessageExPlus(ICON3D_MT_R2_PARTS01,20,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_R2_PARTS02,20)
                GetItemMessageExPlus(ICON3D_MT_R2_PARTS02,20,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_US_ADD_LEVEL,1)
                GetItemMessageExPlus(ICON3D_US_ADD_LEVEL,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            SetFlag(GF_TBOX_DUMMY091,1)
            
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE06)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_MT_R2_PARTS01,20)
                GetItemMessageExPlus(ICON3D_MT_R2_PARTS01,20,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_R2_PARTS02,20)
                GetItemMessageExPlus(ICON3D_MT_R2_PARTS02,20,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_R2_PARTS03,20)
                GetItemMessageExPlus(ICON3D_MT_R2_PARTS03,20,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_R1_PARTS03,20)
                GetItemMessageExPlus(ICON3D_MT_R1_PARTS03,20,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE07)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_US_ADD_LEVEL,1)
                GetItemMessageExPlus(ICON3D_US_ADD_LEVEL,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_R2_PARTS03,20)
                GetItemMessageExPlus(ICON3D_MT_R2_PARTS03,20,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_R1_PARTS03,20)
                GetItemMessageExPlus(ICON3D_MT_R1_PARTS03,20,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            SetFlag(GF_TBOX_DUMMY092,1)
            
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE31)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_US_BERRY_S,2)
                GetItemMessageExPlus(ICON3D_US_BERRY_S,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_US_COCONUT_S,2)
                GetItemMessageExPlus(ICON3D_US_COCONUT_S,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_US_MANGO_S,2)
                GetItemMessageExPlus(ICON3D_US_MANGO_S,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_US_DRAGONFRUIT_S,2)
                GetItemMessageExPlus(ICON3D_US_DRAGONFRUIT_S,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE32)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_USFD_FOOD15,1)
                GetItemMessageExPlus(ICON3D_USFD_FOOD15,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_N3_LIQUID,20)
                GetItemMessageExPlus(ICON3D_MT_N3_LIQUID,20,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_US_ADD_LEVEL,1)
                GetItemMessageExPlus(ICON3D_US_ADD_LEVEL,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE33)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_USFD_FOOD12,1)
                GetItemMessageExPlus(ICON3D_USFD_FOOD12,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_N4_STONE,20)
                GetItemMessageExPlus(ICON3D_MT_N4_STONE,20,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_US_ADD_LEVEL,1)
                GetItemMessageExPlus(ICON3D_US_ADD_LEVEL,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE34)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_MT_R3_PARTS01,12)
                GetItemMessageExPlus(ICON3D_MT_R3_PARTS01,12,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_R3_PARTS02,12)
                GetItemMessageExPlus(ICON3D_MT_R3_PARTS02,12,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_R3_PARTS03,12)
                GetItemMessageExPlus(ICON3D_MT_R3_PARTS03,12,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_US_ADD_LEVEL,1)
                GetItemMessageExPlus(ICON3D_US_ADD_LEVEL,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE35)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_MT_N4_STONE,20)
                GetItemMessageExPlus(ICON3D_MT_N4_STONE,20,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_US_ADD_LEVEL,1)
                GetItemMessageExPlus(ICON3D_US_ADD_LEVEL,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE36)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_MT_N4_BONE,12)
                GetItemMessageExPlus(ICON3D_MT_N4_BONE,12,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_N4_LEATHER,12)
                GetItemMessageExPlus(ICON3D_MT_N4_LEATHER,12,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_N4_LIQUID,12)
                GetItemMessageExPlus(ICON3D_MT_N4_LIQUID,12,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_US_ADD_LEVEL,1)
                GetItemMessageExPlus(ICON3D_US_ADD_LEVEL,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE37)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_MT_R4_STONE,20)
                GetItemMessageExPlus(ICON3D_MT_R4_STONE,20,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_US_ADD_LEVEL,1)
                GetItemMessageExPlus(ICON3D_US_ADD_LEVEL,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE08)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_MT_N4_STONE,20)
                GetItemMessageExPlus(ICON3D_MT_N4_STONE,20,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_R3_PARTS01,12)
                GetItemMessageExPlus(ICON3D_MT_R3_PARTS01,12,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_R3_PARTS02,12)
                GetItemMessageExPlus(ICON3D_MT_R3_PARTS02,12,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_R3_PARTS03,12)
                GetItemMessageExPlus(ICON3D_MT_R3_PARTS03,12,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE09)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_MT_N4_STONE,20)
                GetItemMessageExPlus(ICON3D_MT_N4_STONE,20,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_N4_BONE,12)
                GetItemMessageExPlus(ICON3D_MT_N4_BONE,12,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_N4_LEATHER,12)
                GetItemMessageExPlus(ICON3D_MT_N4_LEATHER,12,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_N4_LIQUID,12)
                GetItemMessageExPlus(ICON3D_MT_N4_LIQUID,12,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            SetFlag(GF_TBOX_DUMMY093,1)
            
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE11)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_MT_R4_PARTS01,12)
                GetItemMessageExPlus(ICON3D_MT_R4_PARTS01,12,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_R4_PARTS02,12)
                GetItemMessageExPlus(ICON3D_MT_R4_PARTS02,12,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_MT_R4_PARTS03,12)
                GetItemMessageExPlus(ICON3D_MT_R4_PARTS03,12,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_US_ADD_LEVEL,1)
                GetItemMessageExPlus(ICON3D_US_ADD_LEVEL,1,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE12)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_MT_R5_STONE,12)
                GetItemMessageExPlus(ICON3D_MT_R5_STONE,12,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                

                GetItem(ICON3D_US_ADD_LEVEL,2)
                GetItemMessageExPlus(ICON3D_US_ADD_LEVEL,2,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE38)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_US_ADD_LEVEL,4)
                GetItemMessageExPlus(ICON3D_US_ADD_LEVEL,4,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE39)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_US_ADD_LEVEL,8)
                GetItemMessageExPlus(ICON3D_US_ADD_LEVEL,8,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE21)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_US_ADD_LEVEL,12)
                GetItemMessageExPlus(ICON3D_US_ADD_LEVEL,12,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE22)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_US_ADD_LEVEL,14)
                GetItemMessageExPlus(ICON3D_US_ADD_LEVEL,14,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE23)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_US_ADD_LEVEL,15)
                GetItemMessageExPlus(ICON3D_US_ADD_LEVEL,15,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE24)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_US_ADD_LEVEL,16)
                GetItemMessageExPlus(ICON3D_US_ADD_LEVEL,16,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE25)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_US_ADD_LEVEL,17)
                GetItemMessageExPlus(ICON3D_US_ADD_LEVEL,17,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            ResetStopFlag(STOPFLAG_TALK)
        }
        if (FLAG[GF_INTERCEPT_LASTSTAGEID] == INTERCEPT_STAGE26)
        {
            SetStopFlag(STOPFLAG_TALK)



                GetItem(ICON3D_US_ADD_LEVEL,18)
                GetItemMessageExPlus(ICON3D_US_ADD_LEVEL,18,ITEMMSG_SE_NORMAL," Obtained.",0,0)
                WaitPrompt()
                WaitCloseWindow()

                
            ResetStopFlag(STOPFLAG_TALK)
        }
        SetFlag(GF_INTERCEPT_LASTRESULT, 0)
	    SetFlag(GF_INTERCEPT_LASTSTAGEID, INTERCEPT_STAGE_NONE)
	    CallFunc("mp1201:init") 
    }
}  

function "newTradeHandler"
{
        
    if(ALLITEMWORK[ICON3D_MT_R4_GOLD] > 0 && !FLAG[GF_TBOX_DUMMY095])
    {
        MenuAdd(10, "#2C Prismatic Jewel x 1 #0C for #2C Sword Tip Fang x 3#0C .")
    }
    else
    {
        MenuAdd(11, "Prismatic Jewel x 1 for Sword Tip Fang x 3.")
    }
    if(ALLITEMWORK[ICON3D_MT_R4_GOLD] > 0 && !FLAG[GF_TBOX_DUMMY096])
	{
        MenuAdd(20, "#2C Prismatic Jewel x 1 #0C for #2C Alison x 1#0C .")
	}
	else
	{
        MenuAdd(21, "Prismatic Jewel x 1 for Alison x 1.")
	}

	if(ALLITEMWORK[ICON3D_MT_R4_GOLD] >= 2 && !FLAG[GF_TBOX_DUMMY097])
	{
		MenuAdd(110, "#2C Prismatic Jewel x 2 #0C for #2C Starry Shell x 2#0C .")
	}
	else
	{
		MenuAdd(111, "Prismatic Jewel x 2 for Starry Shell x 2.")
	}
	
	if(ALLITEMWORK[ICON3D_MT_R4_GOLD] >= 10 && !FLAG[GF_TBOX_DUMMY098])
	{
		MenuAdd(30, "#2C Prismatic Jewel x 10 #0C for #2C Spirit Elixir x 1#0C .")
	}
	else
	{
		MenuAdd(31, "Prismatic Jewel x 10 for Spirit Elixir x 1.")
	}
	
	if(ALLITEMWORK[ICON3D_MT_R4_GOLD] >= 25 && !FLAG[GF_TBOX_DUMMY099])
    {
		MenuAdd(40, "#2C Prismatic Jewel x 25 #0C for #2C Aeolus urn x 1#0C .")
	}
	else
	{
		MenuAdd(41, "Prismatic Jewel x 25 for Aeolus urn x 1.")
	}

	//--------------------------------------------------------------------------------------

	if(ALLITEMWORK[ICON3D_MT_R4_GOLD] >= 1 && !FLAG[GF_OLDITEM_TRADE_01])	
    {
		MenuAdd(50, "#2C Prismatic Jewel x 1 #0C for #2C Sahad Skill -Magna Wave x 1#0C .")
	}
	else
	{
		MenuAdd(51, "Prismatic Jewel x 1 for Sahad Skill -Magna Wave x 1.")
	}

	if(ALLITEMWORK[ICON3D_MT_R4_GOLD] >= 1 && !FLAG[GF_OLDITEM_TRADE_02])	
    {
		MenuAdd(60, "#2C Prismatic Jewel x 1 #0C for #2C Ship Blueprints x 1#0C .")
	}
	else
	{
		MenuAdd(61, "Prismatic Jewel x 1 for Ship Blueprints x 1.")
	}
	
	if(ALLITEMWORK[ICON3D_MT_R4_GOLD] >= 2 && !FLAG[GF_OLDITEM_TRADE_03])	
    {
		MenuAdd(70, "#2C Prismatic Jewel x 2 #0C for #2C Great Tree Drop x 1#0C .")
	}
	else
	{
		MenuAdd(71, "Prismatic Jewel x 2 for Great Tree Drop x 1.")
	}

	if(ALLITEMWORK[ICON3D_MT_R4_GOLD] >= 2 && !FLAG[GF_OLDITEM_TRADE_04])	
    {
		MenuAdd(80, "#2C Prismatic Jewel x 2 #0C for #2C Recipe Book/Heartfelt Bolognese x 1#0C .")
	}
	else
	{
		MenuAdd(81, "Prismatic Jewel x 2 for Recipe Book/Heartfelt Bolognese x 1.")
	}		

	if(ALLITEMWORK[ICON3D_MT_R4_GOLD] >= 3 && !FLAG[GF_OLDITEM_TRADE_05])	
    {
		MenuAdd(90, "#2C Prismatic Jewel x 3 #0C for #2C Hemostatic x 3#0C .")
	}
	else
	{
		MenuAdd(91, "Prismatic Jewel x 3 for Hemostatic x 3.")
	}

}

function "openTree"
{
    if(ALLITEMWORK[ICON3D_972] >= 2 && !FLAG[GF_06MP6409_OPEN_GATE]) //ICON3D_972:junk item used for tracking
    {
        SetFlag(GF_06MP6409_OPEN_GATE, 1)
        CallFunc("mp6409:init")
    }
}

function "goal"
{
    if(ALLITEMWORK[ICON3D_972] >= 3 && !FLAG[GF_06MP6301_GOTO_BOSSROOM]) //ICON3D_972:junk item used for tracking
    {
        SetFlag( GF_06MP6301_OPEN_STAIRS , 1 )
	    SetFlag( GF_06MP6301_GOTO_BOSSROOM , 1 )
        CallFunc("mp6301:init")
    }
}

    function "finalBoss"
    {
        SetFlag(GF_MP8323_2NDBATTLE,1)
        LoadArg("map/mp8323/mp8323.arg")
		EventCue("mp8323:init")
    }
    
    function "ending"
    {
        LoadArg("map/mp0021/mp0021.arg")
        EventCue("mp0021:EV_M07S130")
    }
    
    function "ending2"
    {
        LoadArg("map/mp0021/mp0021.arg")
        EventCue("mp0021:EV_M07S130")
    }
    